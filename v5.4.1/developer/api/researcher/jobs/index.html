<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../../../versions.json";
      const search_worker_js = "../../../../assets/javascript/search-worker.js";
      const search_index_json = "../../../../search/search_index.json";
      const base_url = '../../../..';
    </script><!-- Site title --><title>Jobs - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../../../ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../../../assets/img/menu.svg> <img class=close style=display:none src=../../../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../../../getting-started/getting-started/ class>Basic Example</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Installation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/installation/0-basic-software-installation/ class>Software Installation</a> </li> <li class> <a href=../../../../tutorials/installation/1-setting-up-environment/ class>Setting Up Environment</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../../../tutorials/pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/pytorch/05_Transfer-learning_tutorial_usingDenseNet-121/ class>Transfer-learning in Fed-BioMed tutorial</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/flamby/flamby/ class>General Concepts</a> </li> <li class> <a href=../../../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby integration in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../../../../tutorials/concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../../../user-guide/deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../../../user-guide/deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../../../user-guide/nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../../../user-guide/nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../../../user-guide/nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../../../user-guide/nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../../../user-guide/researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../../../user-guide/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../../../user-guide/researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../../../user-guide/researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../../../user-guide/researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../../../user-guide/researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../../../user-guide/advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../../../user-guide/secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../common/certificate_manager/ class>Certificate Manager</a> </li> <li class> <a href=../../common/cli/ class>CLI</a> </li> <li class> <a href=../../common/config/ class>Config</a> </li> <li class> <a href=../../common/constants/ class>Constants</a> </li> <li class> <a href=../../common/data/ class>Data</a> </li> <li class> <a href=../../common/db/ class>DB</a> </li> <li class> <a href=../../common/environ/ class>Environ</a> </li> <li class> <a href=../../common/exceptions/ class>Exceptions</a> </li> <li class> <a href=../../common/ipython/ class>IPython</a> </li> <li class> <a href=../../common/json/ class>Json</a> </li> <li class> <a href=../../common/logger/ class>Logger</a> </li> <li class> <a href=../../common/message/ class>Message</a> </li> <li class> <a href=../../common/metrics/ class>Metrics</a> </li> <li class> <a href=../../common/models/ class>Model</a> </li> <li class> <a class href=../../common/mpc_controller.md>MPC controller</a> </li> <li class> <a href=../../common/optimizers/ class>Optimizers</a> </li> <li class> <a href=../../common/privacy/ class>Privacy</a> </li> <li class> <a href=../../common/secagg/ class>Secagg</a> </li> <li class> <a href=../../common/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../common/serializer/ class>Serializer</a> </li> <li class> <a href=../../common/singleton/ class>Singleton</a> </li> <li class> <a href=../../common/synchro/ class>Synchro</a> </li> <li class> <a href=../../common/tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../../common/training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../../common/training_args/ class>TrainingArgs</a> </li> <li class> <a href=../../common/utils/ class>Utils</a> </li> <li class> <a href=../../common/validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../node/cli/ class>CLI</a> </li> <li class> <a href=../../node/cli_utils/ class>CLI Utils</a> </li> <li class> <a href=../../node/config/ class>Config</a> </li> <li class> <a href=../../node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../node/environ/ class>Environ</a> </li> <li class> <a href=../../node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../node/node/ class>Node</a> </li> <li class> <a href=../../node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../node/requests/ class>Requests</a> </li> <li class> <a href=../../node/round/ class>Round</a> </li> <li class> <a href=../../node/secagg/ class>Secagg</a> </li> <li class> <a href=../../node/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../aggregators/ class>Aggregators</a> </li> <li class> <a href=../cli/ class>CLI</a> </li> <li class> <a href=../config/ class>Config</a> </li> <li class> <a href=../datasets/ class>Datasets</a> </li> <li class> <a href=../environ/ class>Environ</a> </li> <li class> <a href=../federated_workflows/ class>Federated Workflows</a> </li> <li class> <a href=../filetools/ class>Filetools</a> </li> <li class=current> <a href=./ class="link current">Jobs</a> </li> <li class> <a href=../monitor/ class>Monitor</a> </li> <li class> <a href=../node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../requests/ class>Requests</a> </li> <li class> <a href=../secagg/ class>Secagg</a> </li> <li class> <a href=../strategies/ class>Strategies</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Transport <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../transport/client/ class>Client</a> </li> <li class> <a href=../../transport/controller/ class>Controller</a> </li> <li class> <a href=../../transport/node_agent/ class>NodeAgent</a> </li> <li class> <a href=../../transport/server/ class>Server</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../../usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../../ci/ class>Continuous Integration</a> </li> <li class> <a href=../../../definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../../testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../../messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <h1>Jobs</h1> <article> <div class="doc doc-object doc-module"> <div class="doc doc-contents first"> <div class="doc doc-children"> <h2 id=fedbiomed.researcher.federated_workflows.jobs-classes>Classes</h2> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.federated_workflows.jobs.Job class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">Job</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>Job</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>nodes</span><span class=p>,</span> <span class=n>keep_files_dir</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title="abc.ABC" href="https://docs.python.org/3/library/abc.html#abc.ABC">ABC</a></code></p> <p>Job represents a task to be executed on the node.</p> <p>This is a base class that provides the basic functionality necessary to establish communication with the remote nodes. Actual tasks should inherit from <code>Job</code> to implement their own domain logic.</p> <div class="admonition info"> <p class=admonition-title>Functional life-cycle</p> <p>Jobs must follow a "functional" life-cycle, meaning that they should be created just before the execution of the task, and destroyed shortly after. Jobs should not persist outside the scope of the function that requested the execution of the task.</p> </div> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.federated_workflows.jobs.Job.requests" href="#fedbiomed.researcher.federated_workflows.jobs.Job.requests">requests</a></code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests.RequestPolicy" href="../requests/#fedbiomed.researcher.requests.RequestPolicy">RequestPolicy</a>] | None</code> </td> <td> <div class=doc-md-description> <p>read-only <a class="autorefs autorefs-internal" href="../requests/#fedbiomed.researcher.requests.Requests"><code>Requests</code></a> object handling communication with remote nodes</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.federated_workflows.jobs.Job.nodes" href="#fedbiomed.researcher.federated_workflows.jobs.Job.nodes">nodes</a></code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>node IDs participating in the task</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code> </td> <td> <div class=doc-md-description> <p>A dict of node_id containing the nodes used for training</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>keep_files_dir</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>Directory for storing files created by the job that we want to keep beyond the execution of the job.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="32 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
<span class=linenos data-linenos="33 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="34 "></span>    <span class=o>*</span><span class=p>,</span>
<span class=linenos data-linenos="35 "></span>    <span class=n>nodes</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="36 "></span>    <span class=n>keep_files_dir</span><span class=p>:</span> <span class=nb>str</span>
<span class=linenos data-linenos="37 "></span><span class=p>):</span>
<span class=linenos data-linenos="38 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor of the class</span>
<span class=linenos data-linenos="39 "></span>
<span class=linenos data-linenos="40 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="41 "></span><span class=sd>        nodes: A dict of node_id containing the nodes used for training</span>
<span class=linenos data-linenos="42 "></span><span class=sd>        keep_files_dir: Directory for storing files created by the job that we want to keep beyond the execution</span>
<span class=linenos data-linenos="43 "></span><span class=sd>            of the job.</span>
<span class=linenos data-linenos="44 "></span>
<span class=linenos data-linenos="45 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="46 "></span>
<span class=linenos data-linenos="47 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span> <span class=o>=</span> <span class=n>environ</span><span class=p>[</span><span class=s1>&#39;RESEARCHER_ID&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="48 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span> <span class=o>=</span> <span class=n>Requests</span><span class=p>()</span>
<span class=linenos data-linenos="49 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>nodes</span> <span class=ow>or</span> <span class=p>[]</span>  <span class=c1># List of node ids participating in this task</span>
<span class=linenos data-linenos="50 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_keep_files_dir</span> <span class=o>=</span> <span class=n>keep_files_dir</span>
<span class=linenos data-linenos="51 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>RequestPolicy</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.federated_workflows.jobs.Job-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.federated_workflows.jobs.Job.nodes class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">nodes</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>nodes</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.federated_workflows.jobs.Job.requests class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">requests</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>requests</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.researcher.federated_workflows.jobs.Job-classes>Classes</h4> <div class="doc doc-object doc-class"> <h5 id=fedbiomed.researcher.federated_workflows.jobs.Job.RequestTimer class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">RequestTimer</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>RequestTimer</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Context manager that computes the processing time elapsed for the request and the reply</p> <p>Usage: <div class=highlight><pre><span></span><code>nodes = [&#39;node_1&#39;, &#39;node_2&#39;]
job = Job(nodes, file)
with job._timer() as my_timer:
    # ... send some request

my_timer
# {node_1: 2.22, node_2: 2.21} # request time for each Node in second
</code></pre></div></p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>existing nodes that will be requested for the Job</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="77 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]):</span>
<span class=linenos data-linenos="78 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=linenos data-linenos="79 "></span><span class=sd>    Constructor of NodeTimer</span>
<span class=linenos data-linenos="80 "></span>
<span class=linenos data-linenos="81 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="82 "></span><span class=sd>        nodes: existing nodes that will be requested for the Job</span>
<span class=linenos data-linenos="83 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="84 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_timer</span> <span class=o>=</span> <span class=p>{</span><span class=n>node_id</span><span class=p>:</span> <span class=mf>0.</span>  <span class=k>for</span> <span class=n>node_id</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>}</span>
</code></pre></div> </details> <div class="doc doc-children"> </div> </div> </div> <h4 id=fedbiomed.researcher.federated_workflows.jobs.Job-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.federated_workflows.jobs.Job.execute class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">execute</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>execute</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Payload of the job.</p> <p>Completes a request to the job's nodes and collects replies.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></code> </td> <td> <div class=doc-md-description> <p>values specific to the type of job</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 95 "></span><span class=nd>@abstractmethod</span>
<span class=linenos data-linenos=" 96 "></span><span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
<span class=linenos data-linenos=" 97 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Payload of the job.</span>
<span class=linenos data-linenos=" 98 "></span>
<span class=linenos data-linenos=" 99 "></span><span class=sd>    Completes a request to the job&#39;s nodes and collects replies.</span>
<span class=linenos data-linenos="100 "></span>
<span class=linenos data-linenos="101 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="102 "></span><span class=sd>        values specific to the type of job</span>
<span class=linenos data-linenos="103 "></span><span class=sd>    &quot;&quot;&quot;</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.federated_workflows.jobs.TrainingJob class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">TrainingJob</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>TrainingJob</span><span class=p>(</span><span class=n>experiment_id</span><span class=p>,</span> <span class=n>round_</span><span class=p>,</span> <span class=n>training_plan</span><span class=p>,</span> <span class=n>training_args</span><span class=p>,</span> <span class=n>model_args</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>nodes_state_ids</span><span class=p>,</span> <span class=n>aggregator_args</span><span class=p>,</span> <span class=n>secagg_arguments</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>do_training</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>optim_aux_var</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.federated_workflows.jobs._job.Job" href="#fedbiomed.researcher.federated_workflows.jobs.Job">Job</a></code></p> <p>TrainingJob is a task for training an ML model on the nodes by executing a <a class="autorefs autorefs-internal" href="../../common/training_plans/#fedbiomed.common.training_plans.BaseTrainingPlan">TrainingPlan</a>.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>experiment_id</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>unique ID of this experiment</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>round_</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code> </td> <td> <div class=doc-md-description> <p>current number of round the algorithm is performing (a round is considered to be all the training steps of a federated model between 2 aggregations).</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>training_plan</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.training_plans.BaseTrainingPlan" href="../../common/training_plans/#fedbiomed.common.training_plans.BaseTrainingPlan">BaseTrainingPlan</a></code> </td> <td> <div class=doc-md-description> <p>TrainingPlan with properly initialized model and optimizer</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>training_args</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>, <a class="autorefs autorefs-internal" title="fedbiomed.common.training_args.TrainingArgs" href="../../common/training_args/#fedbiomed.common.training_args.TrainingArgs">TrainingArgs</a>]</code> </td> <td> <div class=doc-md-description> <p>arguments for training</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>model_args</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>]</code> </td> <td> <div class=doc-md-description> <p>arguments for the model</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>data</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.datasets.FederatedDataSet" href="../datasets/#fedbiomed.researcher.datasets.FederatedDataSet">FederatedDataSet</a></code> </td> <td> <div class=doc-md-description> <p>metadata of the federated data set</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>nodes_state_ids</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>unique IDs of the node states saved remotely</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>aggregator_args</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</code> </td> <td> <div class=doc-md-description> <p>aggregator arguments required for remote execution</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>secagg_arguments</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>, None]</code> </td> <td> <div class=doc-md-description> <p>Secure aggregation arguments, some depending on scheme used</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>do_training</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> </td> <td> <div class=doc-md-description> <p>if False, skip training in this round (do only validation). Defaults to True.</p> </div> </td> <td> <code>True</code> </td> </tr> <tr class=doc-section-item> <td><code>optim_aux_var</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]]</code> </td> <td> <div class=doc-md-description> <p>Auxiliary variables of the researcher-side Optimizer, if any. Note that such variables may only be used if both the Experiment and node-side training plan hold a declearn-based <a class="autorefs autorefs-internal" href="../../common/optimizers/#fedbiomed.common.optimizers.Optimizer">Optimizer</a>, and their plug-ins are coherent with each other as to expected information exchange.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>*args</code></td> <td> </td> <td> <div class=doc-md-description> <p>Positional argument of parent class <a class="autorefs autorefs-internal" href="#fedbiomed.researcher.federated_workflows.jobs.Job"><code>Job</code></a></p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> </td> <td> <div class=doc-md-description> <p>Named arguments of parent class. Please see <a class="autorefs autorefs-internal" href="#fedbiomed.researcher.federated_workflows.jobs.Job"><code>Job</code></a></p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_training_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="25 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
<span class=linenos data-linenos="26 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="27 "></span>    <span class=n>experiment_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<span class=linenos data-linenos="28 "></span>    <span class=n>round_</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
<span class=linenos data-linenos="29 "></span>    <span class=n>training_plan</span><span class=p>:</span> <span class=n>BaseTrainingPlan</span><span class=p>,</span>
<span class=linenos data-linenos="30 "></span>    <span class=n>training_args</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=n>TrainingArgs</span><span class=p>],</span>
<span class=linenos data-linenos="31 "></span>    <span class=n>model_args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>dict</span><span class=p>],</span>
<span class=linenos data-linenos="32 "></span>    <span class=n>data</span><span class=p>:</span> <span class=n>FederatedDataSet</span><span class=p>,</span>
<span class=linenos data-linenos="33 "></span>    <span class=n>nodes_state_ids</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>],</span>
<span class=linenos data-linenos="34 "></span>    <span class=n>aggregator_args</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]],</span>
<span class=linenos data-linenos="35 "></span>    <span class=n>secagg_arguments</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Dict</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="36 "></span>    <span class=n>do_training</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="37 "></span>    <span class=n>optim_aux_var</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="38 "></span>    <span class=o>**</span><span class=n>kwargs</span>
<span class=linenos data-linenos="39 "></span><span class=p>):</span>
<span class=linenos data-linenos="40 "></span>
<span class=linenos data-linenos="41 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Constructor of the class</span>
<span class=linenos data-linenos="42 "></span>
<span class=linenos data-linenos="43 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="44 "></span><span class=sd>        experiment_id: unique ID of this experiment</span>
<span class=linenos data-linenos="45 "></span><span class=sd>        round_: current number of round the algorithm is performing (a round is considered to be all the</span>
<span class=linenos data-linenos="46 "></span><span class=sd>            training steps of a federated model between 2 aggregations).</span>
<span class=linenos data-linenos="47 "></span><span class=sd>        training_plan: TrainingPlan with properly initialized model and optimizer</span>
<span class=linenos data-linenos="48 "></span><span class=sd>        training_args: arguments for training</span>
<span class=linenos data-linenos="49 "></span><span class=sd>        model_args: arguments for the model</span>
<span class=linenos data-linenos="50 "></span><span class=sd>        data: metadata of the federated data set</span>
<span class=linenos data-linenos="51 "></span><span class=sd>        nodes_state_ids: unique IDs of the node states saved remotely</span>
<span class=linenos data-linenos="52 "></span><span class=sd>        aggregator_args: aggregator arguments required for remote execution</span>
<span class=linenos data-linenos="53 "></span><span class=sd>        secagg_arguments: Secure aggregation arguments, some depending on scheme used</span>
<span class=linenos data-linenos="54 "></span><span class=sd>        do_training: if False, skip training in this round (do only validation). Defaults to True.</span>
<span class=linenos data-linenos="55 "></span><span class=sd>        optim_aux_var: Auxiliary variables of the researcher-side Optimizer, if any.</span>
<span class=linenos data-linenos="56 "></span><span class=sd>            Note that such variables may only be used if both the Experiment and node-side training plan</span>
<span class=linenos data-linenos="57 "></span><span class=sd>            hold a declearn-based [Optimizer][fedbiomed.common.optimizers.Optimizer], and their plug-ins</span>
<span class=linenos data-linenos="58 "></span><span class=sd>            are coherent with each other as to expected information exchange.</span>
<span class=linenos data-linenos="59 "></span><span class=sd>        *args: Positional argument of parent class</span>
<span class=linenos data-linenos="60 "></span><span class=sd>            [`Job`][fedbiomed.researcher.federated_workflows.jobs.Job]</span>
<span class=linenos data-linenos="61 "></span><span class=sd>        **kwargs: Named arguments of parent class. Please see</span>
<span class=linenos data-linenos="62 "></span><span class=sd>            [`Job`][fedbiomed.researcher.federated_workflows.jobs.Job]</span>
<span class=linenos data-linenos="63 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="64 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=linenos data-linenos="65 "></span>    <span class=c1># to be used for `execute()`</span>
<span class=linenos data-linenos="66 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_experiment_id</span> <span class=o>=</span> <span class=n>experiment_id</span>
<span class=linenos data-linenos="67 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_round_</span> <span class=o>=</span> <span class=n>round_</span>
<span class=linenos data-linenos="68 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span> <span class=o>=</span> <span class=n>training_plan</span>
<span class=linenos data-linenos="69 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span> <span class=o>=</span> <span class=n>training_args</span>
<span class=linenos data-linenos="70 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span> <span class=o>=</span> <span class=n>model_args</span>
<span class=linenos data-linenos="71 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>data</span>
<span class=linenos data-linenos="72 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_nodes_state_ids</span> <span class=o>=</span> <span class=n>nodes_state_ids</span>
<span class=linenos data-linenos="73 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_aggregator_args</span> <span class=o>=</span> <span class=n>aggregator_args</span>
<span class=linenos data-linenos="74 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_secagg_arguments</span> <span class=o>=</span> <span class=n>secagg_arguments</span> <span class=ow>or</span> <span class=p>{}</span>  <span class=c1># Assign empty dict to secagg arguments if it is None</span>
<span class=linenos data-linenos="75 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_do_training</span> <span class=o>=</span> <span class=n>do_training</span>
<span class=linenos data-linenos="76 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_optim_aux_var</span> <span class=o>=</span> <span class=n>optim_aux_var</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.federated_workflows.jobs.TrainingJob-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.federated_workflows.jobs.TrainingJob.execute class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">execute</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>execute</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sends training request to nodes and waits for the responses</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>, <a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>]]</code> </td> <td> <div class=doc-md-description> <p>A tuple of * training replies for this round * Dict of auxiliary variables, collating node-wise information, with format <code>{mod_name: {node_id: node_dict}}</code>.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_training_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="127 "></span><span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>Dict</span><span class=p>,</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>]]:</span>
<span class=linenos data-linenos="128 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Sends training request to nodes and waits for the responses</span>
<span class=linenos data-linenos="129 "></span>
<span class=linenos data-linenos="130 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="131 "></span><span class=sd>        A tuple of</span>
<span class=linenos data-linenos="132 "></span><span class=sd>          * training replies for this round</span>
<span class=linenos data-linenos="133 "></span><span class=sd>          * Dict of auxiliary variables, collating node-wise information, with</span>
<span class=linenos data-linenos="134 "></span><span class=sd>            format `{mod_name: {node_id: node_dict}}`.</span>
<span class=linenos data-linenos="135 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="136 "></span>
<span class=linenos data-linenos="137 "></span>    <span class=c1># Populate request message</span>
<span class=linenos data-linenos="138 "></span>    <span class=n>msg</span> <span class=o>=</span> <span class=p>{</span>
<span class=linenos data-linenos="139 "></span>        <span class=s1>&#39;researcher_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span><span class=p>,</span>
<span class=linenos data-linenos="140 "></span>        <span class=s1>&#39;experiment_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_experiment_id</span><span class=p>,</span>
<span class=linenos data-linenos="141 "></span>        <span class=s1>&#39;training_args&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span><span class=o>.</span><span class=n>dict</span><span class=p>(),</span>
<span class=linenos data-linenos="142 "></span>        <span class=s1>&#39;training&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_do_training</span><span class=p>,</span>
<span class=linenos data-linenos="143 "></span>        <span class=s1>&#39;model_args&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=p>{},</span>
<span class=linenos data-linenos="144 "></span>        <span class=s1>&#39;round&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_round_</span><span class=p>,</span>
<span class=linenos data-linenos="145 "></span>        <span class=s1>&#39;training_plan&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>source</span><span class=p>(),</span>
<span class=linenos data-linenos="146 "></span>        <span class=s1>&#39;training_plan_class&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
<span class=linenos data-linenos="147 "></span>        <span class=s1>&#39;params&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>get_model_params</span><span class=p>(</span>
<span class=linenos data-linenos="148 "></span>            <span class=n>exclude_buffers</span><span class=o>=</span><span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span><span class=o>.</span><span class=n>dict</span><span class=p>()[</span><span class=s1>&#39;share_persistent_buffers&#39;</span><span class=p>]),</span>
<span class=linenos data-linenos="149 "></span>        <span class=s1>&#39;secagg_arguments&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_secagg_arguments</span><span class=p>,</span>
<span class=linenos data-linenos="150 "></span>        <span class=s1>&#39;aggregator_args&#39;</span><span class=p>:</span> <span class=p>{},</span>
<span class=linenos data-linenos="151 "></span>    <span class=p>}</span>
<span class=linenos data-linenos="152 "></span>
<span class=linenos data-linenos="153 "></span>    <span class=c1># Prepare optimizer auxiliary variables, if any.</span>
<span class=linenos data-linenos="154 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_do_training</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_optim_aux_var</span><span class=p>:</span>
<span class=linenos data-linenos="155 "></span>        <span class=n>aux_shared</span><span class=p>,</span> <span class=n>aux_bynode</span> <span class=o>=</span> <span class=p>(</span>
<span class=linenos data-linenos="156 "></span>            <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_agg_optimizer_aux_var</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_optim_aux_var</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>))</span>
<span class=linenos data-linenos="157 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="158 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="159 "></span>        <span class=n>aux_shared</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="160 "></span>        <span class=n>aux_bynode</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="161 "></span>
<span class=linenos data-linenos="162 "></span>    <span class=c1># Loop over nodes, add node specific data and send train request</span>
<span class=linenos data-linenos="163 "></span>    <span class=n>messages</span> <span class=o>=</span> <span class=n>MessagesByNode</span><span class=p>()</span>
<span class=linenos data-linenos="164 "></span>
<span class=linenos data-linenos="165 "></span>    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="166 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;dataset_id&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>data</span><span class=p>()[</span><span class=n>node</span><span class=p>][</span><span class=s1>&#39;dataset_id&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="167 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;aux_vars&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>aux_shared</span><span class=p>,</span> <span class=n>aux_bynode</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=kc>None</span><span class=p>)]</span>
<span class=linenos data-linenos="168 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;state_id&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes_state_ids</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
<span class=linenos data-linenos="169 "></span>
<span class=linenos data-linenos="170 "></span>        <span class=c1># add aggregator parameters to message header</span>
<span class=linenos data-linenos="171 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;aggregator_args&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_aggregator_args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=p>{})</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_aggregator_args</span> <span class=k>else</span> <span class=p>{}</span>
<span class=linenos data-linenos="172 "></span>
<span class=linenos data-linenos="173 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_log_round_info</span><span class=p>(</span><span class=n>node</span><span class=o>=</span><span class=n>node</span><span class=p>,</span> <span class=n>training</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_do_training</span><span class=p>)</span>
<span class=linenos data-linenos="174 "></span>
<span class=linenos data-linenos="175 "></span>        <span class=n>messages</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=n>node</span><span class=p>:</span> <span class=n>TrainRequest</span><span class=p>(</span><span class=o>**</span><span class=n>msg</span><span class=p>)})</span>  <span class=c1># send request to node</span>
<span class=linenos data-linenos="176 "></span>
<span class=linenos data-linenos="177 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>RequestTimer</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>)</span> <span class=k>as</span> <span class=n>timer</span><span class=p>:</span>  <span class=c1># compute request time</span>
<span class=linenos data-linenos="178 "></span>        <span class=c1># Send training request</span>
<span class=linenos data-linenos="179 "></span>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span><span class=p>)</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos="180 "></span>
<span class=linenos data-linenos="181 "></span>            <span class=n>errors</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>errors</span><span class=p>()</span>
<span class=linenos data-linenos="182 "></span>            <span class=n>replies</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span>
<span class=linenos data-linenos="183 "></span>
<span class=linenos data-linenos="184 "></span>    <span class=n>training_replies</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_training_results</span><span class=p>(</span><span class=n>replies</span><span class=o>=</span><span class=n>replies</span><span class=p>,</span>
<span class=linenos data-linenos="185 "></span>                                                  <span class=n>errors</span><span class=o>=</span><span class=n>errors</span><span class=p>)</span>
<span class=linenos data-linenos="186 "></span>
<span class=linenos data-linenos="187 "></span>    <span class=n>timing_results</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_timing_results</span><span class=p>(</span><span class=n>replies</span><span class=p>,</span> <span class=n>timer</span><span class=p>)</span>
<span class=linenos data-linenos="188 "></span>    <span class=c1># `training_replies` can be empty if there wasnot any replies</span>
<span class=linenos data-linenos="189 "></span>    <span class=k>for</span> <span class=n>node_id</span> <span class=ow>in</span> <span class=n>replies</span><span class=p>:</span>
<span class=linenos data-linenos="190 "></span>        <span class=k>if</span> <span class=n>training_replies</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node_id</span><span class=p>):</span>
<span class=linenos data-linenos="191 "></span>            <span class=n>training_replies</span><span class=p>[</span><span class=n>node_id</span><span class=p>]</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s1>&#39;timing&#39;</span><span class=p>:</span> <span class=n>timing_results</span><span class=p>[</span><span class=n>node_id</span><span class=p>]})</span>
<span class=linenos data-linenos="192 "></span>
<span class=linenos data-linenos="193 "></span>    <span class=c1># Extract aux variables from training replies</span>
<span class=linenos data-linenos="194 "></span>    <span class=n>aux_vars</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="195 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_do_training</span><span class=p>:</span>
<span class=linenos data-linenos="196 "></span>        <span class=n>aux_vars</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_extract_received_optimizer_aux_var_from_round</span><span class=p>(</span><span class=n>training_replies</span><span class=p>)</span>
<span class=linenos data-linenos="197 "></span>
<span class=linenos data-linenos="198 "></span>    <span class=k>return</span> <span class=n>training_replies</span><span class=p>,</span> <span class=n>aux_vars</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.federated_workflows.jobs.TrainingPlanApproveJob class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">TrainingPlanApproveJob</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>TrainingPlanApproveJob</span><span class=p>(</span><span class=n>training_plan</span><span class=p>,</span> <span class=n>description</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.federated_workflows.jobs._job.Job" href="#fedbiomed.researcher.federated_workflows.jobs.Job">Job</a></code></p> <p>Task for requesting nodes approval for running a given <a class="autorefs autorefs-internal" href="../../common/training_plans/#fedbiomed.common.training_plans.BaseTrainingPlan">TrainingPlan</a> on these nodes.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>training_plan</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.training_plans.BaseTrainingPlan" href="../../common/training_plans/#fedbiomed.common.training_plans.BaseTrainingPlan">BaseTrainingPlan</a></code> </td> <td> <div class=doc-md-description> <p>an instance of a TrainingPlan object</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>description</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>human-readable description of the TrainingPlan for the reviewer on the node</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>*args</code></td> <td> </td> <td> <div class=doc-md-description> <p>Positonal argument of parent class <a class="autorefs autorefs-internal" href="#fedbiomed.researcher.federated_workflows.jobs.Job"><code>Job</code></a></p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> </td> <td> <div class=doc-md-description> <p>Named arguments of parent class. Please see <a class="autorefs autorefs-internal" href="#fedbiomed.researcher.federated_workflows.jobs.Job"><code>Job</code></a></p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_training_plan_approval_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="19 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="20 "></span>             <span class=n>training_plan</span><span class=p>:</span> <span class=n>BaseTrainingPlan</span><span class=p>,</span>
<span class=linenos data-linenos="21 "></span>             <span class=n>description</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<span class=linenos data-linenos="22 "></span>             <span class=o>**</span><span class=n>kwargs</span>
<span class=linenos data-linenos="23 "></span>             <span class=p>):</span>
<span class=linenos data-linenos="24 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor of the class.</span>
<span class=linenos data-linenos="25 "></span>
<span class=linenos data-linenos="26 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="27 "></span><span class=sd>        training_plan: an instance of a TrainingPlan object</span>
<span class=linenos data-linenos="28 "></span><span class=sd>        description: human-readable description of the TrainingPlan for the reviewer on the node</span>
<span class=linenos data-linenos="29 "></span><span class=sd>        *args: Positonal argument of parent class</span>
<span class=linenos data-linenos="30 "></span><span class=sd>            [`Job`][fedbiomed.researcher.federated_workflows.jobs.Job]</span>
<span class=linenos data-linenos="31 "></span><span class=sd>        **kwargs: Named arguments of parent class. Please see</span>
<span class=linenos data-linenos="32 "></span><span class=sd>            [`Job`][fedbiomed.researcher.federated_workflows.jobs.Job]</span>
<span class=linenos data-linenos="33 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="34 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=linenos data-linenos="35 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span> <span class=o>=</span> <span class=p>[</span><span class=n>DiscardOnTimeout</span><span class=p>(</span><span class=mi>5</span><span class=p>)]</span>  <span class=c1># specific policy for TrainingApproval</span>
<span class=linenos data-linenos="36 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span> <span class=o>=</span> <span class=n>training_plan</span>
<span class=linenos data-linenos="37 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_description</span> <span class=o>=</span> <span class=n>description</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.federated_workflows.jobs.TrainingPlanApproveJob-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.federated_workflows.jobs.TrainingPlanApproveJob.execute class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">execute</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>execute</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Requests the approval of the provided TrainingPlan.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of pairs (node_id: status), where status indicates to the researcher</p> </div> </td> </tr> <tr class=doc-section-item> <td></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></code> </td> <td> <div class=doc-md-description> <p>that the training plan has been correctly downloaded on the node side.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>Warning</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></code> </td> <td> <div class=doc-md-description> <p>status does not mean that the training plan is approved, only that it has been added</p> </div> </td> </tr> <tr class=doc-section-item> <td></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></code> </td> <td> <div class=doc-md-description> <p>to the "approval queue" on the node side.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_training_plan_approval_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="39 "></span><span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos="40 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Requests the approval of the provided TrainingPlan.</span>
<span class=linenos data-linenos="41 "></span>
<span class=linenos data-linenos="42 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="43 "></span><span class=sd>        a dictionary of pairs (node_id: status), where status indicates to the researcher</span>
<span class=linenos data-linenos="44 "></span><span class=sd>        that the training plan has been correctly downloaded on the node side.</span>
<span class=linenos data-linenos="45 "></span><span class=sd>        Warning: status does not mean that the training plan is approved, only that it has been added</span>
<span class=linenos data-linenos="46 "></span><span class=sd>        to the &quot;approval queue&quot; on the node side.</span>
<span class=linenos data-linenos="47 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="48 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span><span class=o>.</span><span class=n>training_plan_approve</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=p>,</span>
<span class=linenos data-linenos="49 "></span>                                            <span class=bp>self</span><span class=o>.</span><span class=n>_description</span><span class=p>,</span>
<span class=linenos data-linenos="50 "></span>                                            <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>,</span>
<span class=linenos data-linenos="51 "></span>                                            <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.federated_workflows.jobs.TrainingPlanCheckJob class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">TrainingPlanCheckJob</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>TrainingPlanCheckJob</span><span class=p>(</span><span class=n>experiment_id</span><span class=p>,</span> <span class=n>training_plan</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.federated_workflows.jobs._job.Job" href="#fedbiomed.researcher.federated_workflows.jobs.Job">Job</a></code></p> <p>Task for checking if nodes accept running a given <a class="autorefs autorefs-internal" href="../../common/training_plans/#fedbiomed.common.training_plans.BaseTrainingPlan">TrainingPlan</a>.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>experiment_id</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>unique ID of this experiment</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>training_plan</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.training_plans.BaseTrainingPlan" href="../../common/training_plans/#fedbiomed.common.training_plans.BaseTrainingPlan">BaseTrainingPlan</a></code> </td> <td> <div class=doc-md-description> <p>an instance of a TrainingPlan object</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> </td> <td> <div class=doc-md-description> <p>Named arguments of parent class. Please see <a class="autorefs autorefs-internal" href="#fedbiomed.researcher.federated_workflows.jobs.Job"><code>Job</code></a></p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_training_plan_approval_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="59 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
<span class=linenos data-linenos="60 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="61 "></span>    <span class=n>experiment_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
<span class=linenos data-linenos="62 "></span>    <span class=n>training_plan</span><span class=p>:</span> <span class=n>BaseTrainingPlan</span><span class=p>,</span>
<span class=linenos data-linenos="63 "></span>    <span class=o>**</span><span class=n>kwargs</span>
<span class=linenos data-linenos="64 "></span><span class=p>):</span>
<span class=linenos data-linenos="65 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor of the class.</span>
<span class=linenos data-linenos="66 "></span>
<span class=linenos data-linenos="67 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="68 "></span><span class=sd>        experiment_id: unique ID of this experiment</span>
<span class=linenos data-linenos="69 "></span><span class=sd>        training_plan: an instance of a TrainingPlan object</span>
<span class=linenos data-linenos="70 "></span><span class=sd>        **kwargs: Named arguments of parent class. Please see</span>
<span class=linenos data-linenos="71 "></span><span class=sd>            [`Job`][fedbiomed.researcher.federated_workflows.jobs.Job]</span>
<span class=linenos data-linenos="72 "></span>
<span class=linenos data-linenos="73 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="74 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=linenos data-linenos="75 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span> <span class=o>=</span> <span class=p>[</span><span class=n>DiscardOnTimeout</span><span class=p>(</span><span class=mi>5</span><span class=p>)]</span>  <span class=c1># specific policy for TrainingApproval</span>
<span class=linenos data-linenos="76 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_experiment_id</span> <span class=o>=</span> <span class=n>experiment_id</span>
<span class=linenos data-linenos="77 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span> <span class=o>=</span> <span class=n>training_plan</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.federated_workflows.jobs.TrainingPlanCheckJob-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.federated_workflows.jobs.TrainingPlanCheckJob.execute class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">execute</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>execute</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Checks whether model is approved or not.</p> <p>This method sends <code>training-plan-status</code> request to the nodes. It should be run before running experiment. So, researchers can find out if their model has been approved</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></code> </td> <td> <div class=doc-md-description> <p>A dict of <code>Message</code> objects indexed by node ID, one for each job's nodes</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/federated_workflows/jobs/_training_plan_approval_job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 79 "></span><span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos=" 80 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Checks whether model is approved or not.</span>
<span class=linenos data-linenos=" 81 "></span>
<span class=linenos data-linenos=" 82 "></span><span class=sd>    This method sends `training-plan-status` request to the nodes. It should be run before running experiment.</span>
<span class=linenos data-linenos=" 83 "></span><span class=sd>    So, researchers can find out if their model has been approved</span>
<span class=linenos data-linenos=" 84 "></span>
<span class=linenos data-linenos=" 85 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos=" 86 "></span><span class=sd>        A dict of `Message` objects indexed by node ID, one for each job&#39;s nodes</span>
<span class=linenos data-linenos=" 87 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 88 "></span>
<span class=linenos data-linenos=" 89 "></span>    <span class=n>message</span> <span class=o>=</span> <span class=n>TrainingPlanStatusRequest</span><span class=p>(</span><span class=o>**</span><span class=p>{</span>
<span class=linenos data-linenos=" 90 "></span>        <span class=s1>&#39;researcher_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span><span class=p>,</span>
<span class=linenos data-linenos=" 91 "></span>        <span class=s1>&#39;experiment_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_experiment_id</span><span class=p>,</span>
<span class=linenos data-linenos=" 92 "></span>        <span class=s1>&#39;training_plan&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>source</span><span class=p>(),</span>
<span class=linenos data-linenos=" 93 "></span>    <span class=p>})</span>
<span class=linenos data-linenos=" 94 "></span>
<span class=linenos data-linenos=" 95 "></span>    <span class=c1># Send message to each node that has been found after dataset search request</span>
<span class=linenos data-linenos=" 96 "></span>    <span class=c1># TODO: add timer to compute request time</span>
<span class=linenos data-linenos=" 97 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_policies</span><span class=p>)</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos=" 98 "></span>        <span class=n>replies</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span>
<span class=linenos data-linenos=" 99 "></span>
<span class=linenos data-linenos="100 "></span>        <span class=k>for</span> <span class=n>node_id</span><span class=p>,</span> <span class=n>reply</span> <span class=ow>in</span> <span class=n>replies</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="101 "></span>            <span class=k>if</span> <span class=n>reply</span><span class=o>.</span><span class=n>success</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
<span class=linenos data-linenos="102 "></span>                <span class=k>if</span> <span class=n>reply</span><span class=o>.</span><span class=n>approval_obligation</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
<span class=linenos data-linenos="103 "></span>                    <span class=k>if</span> <span class=n>reply</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>TrainingPlanApprovalStatus</span><span class=o>.</span><span class=n>APPROVED</span><span class=o>.</span><span class=n>value</span><span class=p>:</span>
<span class=linenos data-linenos="104 "></span>                        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Training plan has been approved by the node: </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="105 "></span>                    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="106 "></span>                        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Training plan has NOT been approved by the node: </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s1>.&#39;</span> <span class=o>+</span>
<span class=linenos data-linenos="107 "></span>                                       <span class=sa>f</span><span class=s1>&#39;Training plan status : </span><span class=si>{</span><span class=n>reply</span><span class=o>.</span><span class=n>status</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="108 "></span>                <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="109 "></span>                    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Training plan approval is not required by the node: </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="110 "></span>            <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="111 "></span>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Node : </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2> : </span><span class=si>{</span><span class=n>reply</span><span class=o>.</span><span class=n>msg</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="112 "></span>
<span class=linenos data-linenos="113 "></span>    <span class=c1># Get the nodes that haven&#39;t replied training-plan-status request</span>
<span class=linenos data-linenos="114 "></span>    <span class=n>non_replied_nodes</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>)</span> <span class=o>-</span> <span class=nb>set</span><span class=p>(</span><span class=n>replies</span><span class=o>.</span><span class=n>keys</span><span class=p>()))</span>
<span class=linenos data-linenos="115 "></span>    <span class=k>if</span> <span class=n>non_replied_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="116 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Request for checking training plan status hasn&#39;t been replied </span><span class=se>\</span>
<span class=linenos data-linenos="117 "></span><span class=s2>                         by the nodes: </span><span class=si>{</span><span class=n>non_replied_nodes</span><span class=si>}</span><span class=s2>. You might get error </span><span class=se>\</span>
<span class=linenos data-linenos="118 "></span><span class=s2>                             while running your experiment. &quot;</span><span class=p>)</span>
<span class=linenos data-linenos="119 "></span>
<span class=linenos data-linenos="120 "></span>    <span class=k>return</span> <span class=n>replies</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs-classes class=md-nav__link> Classes </a> <nav class=toc-nav aria-label=Classes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job class=md-nav__link> Job </a> <nav class=toc-nav aria-label=Job> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job.nodes class=md-nav__link> nodes </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job.requests class=md-nav__link> requests </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job-classes class=md-nav__link> Classes </a> <nav class=toc-nav aria-label=Classes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job.RequestTimer class=md-nav__link> RequestTimer </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.Job.execute class=md-nav__link> execute </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingJob class=md-nav__link> TrainingJob </a> <nav class=toc-nav aria-label=TrainingJob> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingJob-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingJob.execute class=md-nav__link> execute </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingPlanApproveJob class=md-nav__link> TrainingPlanApproveJob </a> <nav class=toc-nav aria-label=TrainingPlanApproveJob> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingPlanApproveJob-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingPlanApproveJob.execute class=md-nav__link> execute </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingPlanCheckJob class=md-nav__link> TrainingPlanCheckJob </a> <nav class=toc-nav aria-label=TrainingPlanCheckJob> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingPlanCheckJob-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.federated_workflows.jobs.TrainingPlanCheckJob.execute class=md-nav__link> execute </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed  2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../../assets/javascript/lunr.js></script> <script src=../../../../assets/javascript/theme.js></script> </body> </html>