<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../../../versions.json";
      const search_worker_js = "../../../../assets/javascript/search-worker.js";
      const search_index_json = "../../../../search/search_index.json";
      const base_url = '../../../..';
    </script><!-- Site title --><title>Requests - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../../../ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../../../assets/img/menu.svg> <img class=close style=display:none src=../../../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../../../getting-started/getting-started/ class>Basic Example</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Installation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/installation/0-basic-software-installation/ class>Software Installation</a> </li> <li class> <a href=../../../../tutorials/installation/1-setting-up-environment/ class>Setting Up Environment</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../../../tutorials/pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/pytorch/05_Transfer-learning_tutorial_usingDenseNet-121/ class>Transfer-learning in Fed-BioMed tutorial</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/flamby/flamby/ class>General Concepts</a> </li> <li class> <a href=../../../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby integration in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../../../../tutorials/concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../../../user-guide/deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../../../user-guide/deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../../../user-guide/nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../../../user-guide/nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../../../user-guide/nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../../../user-guide/nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../../../user-guide/researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../../../user-guide/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../../../user-guide/researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../../../user-guide/researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../../../user-guide/researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../../../user-guide/researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../../../user-guide/advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../../../user-guide/secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../common/certificate_manager/ class>Certificate Manager</a> </li> <li class> <a href=../../common/cli/ class>CLI</a> </li> <li class> <a href=../../common/config/ class>Config</a> </li> <li class> <a href=../../common/constants/ class>Constants</a> </li> <li class> <a href=../../common/data/ class>Data</a> </li> <li class> <a href=../../common/db/ class>DB</a> </li> <li class> <a href=../../common/environ/ class>Environ</a> </li> <li class> <a href=../../common/exceptions/ class>Exceptions</a> </li> <li class> <a href=../../common/ipython/ class>IPython</a> </li> <li class> <a href=../../common/json/ class>Json</a> </li> <li class> <a href=../../common/logger/ class>Logger</a> </li> <li class> <a href=../../common/message/ class>Message</a> </li> <li class> <a href=../../common/metrics/ class>Metrics</a> </li> <li class> <a href=../../common/models/ class>Model</a> </li> <li class> <a class href=../../common/mpc_controller.md>MPC controller</a> </li> <li class> <a href=../../common/optimizers/ class>Optimizers</a> </li> <li class> <a href=../../common/privacy/ class>Privacy</a> </li> <li class> <a href=../../common/secagg/ class>Secagg</a> </li> <li class> <a href=../../common/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../common/serializer/ class>Serializer</a> </li> <li class> <a href=../../common/singleton/ class>Singleton</a> </li> <li class> <a href=../../common/synchro/ class>Synchro</a> </li> <li class> <a href=../../common/tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../../common/training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../../common/training_args/ class>TrainingArgs</a> </li> <li class> <a href=../../common/utils/ class>Utils</a> </li> <li class> <a href=../../common/validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../node/cli/ class>CLI</a> </li> <li class> <a href=../../node/cli_utils/ class>CLI Utils</a> </li> <li class> <a href=../../node/config/ class>Config</a> </li> <li class> <a href=../../node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../node/environ/ class>Environ</a> </li> <li class> <a href=../../node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../node/node/ class>Node</a> </li> <li class> <a href=../../node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../node/requests/ class>Requests</a> </li> <li class> <a href=../../node/round/ class>Round</a> </li> <li class> <a href=../../node/secagg/ class>Secagg</a> </li> <li class> <a href=../../node/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../aggregators/ class>Aggregators</a> </li> <li class> <a href=../cli/ class>CLI</a> </li> <li class> <a href=../config/ class>Config</a> </li> <li class> <a href=../datasets/ class>Datasets</a> </li> <li class> <a href=../environ/ class>Environ</a> </li> <li class> <a href=../federated_workflows/ class>Federated Workflows</a> </li> <li class> <a href=../filetools/ class>Filetools</a> </li> <li class> <a href=../jobs/ class>Jobs</a> </li> <li class> <a href=../monitor/ class>Monitor</a> </li> <li class> <a href=../node_state_agent/ class>NodeStateAgent</a> </li> <li class=current> <a href=./ class="link current">Requests</a> </li> <li class> <a href=../secagg/ class>Secagg</a> </li> <li class> <a href=../strategies/ class>Strategies</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Transport <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../transport/client/ class>Client</a> </li> <li class> <a href=../../transport/controller/ class>Controller</a> </li> <li class> <a href=../../transport/node_agent/ class>NodeAgent</a> </li> <li class> <a href=../../transport/server/ class>Server</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../../usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../../ci/ class>Continuous Integration</a> </li> <li class> <a href=../../../definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../../testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../../messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <h1>Requests</h1> <article> <div class="doc doc-object doc-module"> <div class="doc doc-contents first"> <div class="doc doc-children"> <h2 id=fedbiomed.researcher.requests-classes>Classes</h2> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.DiscardOnTimeout class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DiscardOnTimeout</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DiscardOnTimeout</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title="fedbiomed.researcher.requests._policies._ReplyTimeoutPolicy">_ReplyTimeoutPolicy</span></code></p> <p>Discards request that do not answer in given timeout</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>timeout</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code> </td> <td> <div class=doc-md-description> <p>maximum time for policy</p> </div> </td> <td> <code>5</code> </td> </tr> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code> </td> <td> <div class=doc-md-description> <p>optional list of nodes to apply the policy. By default applies to all known nodes of request.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="54 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="55 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Implements timeout attributes</span>
<span class=linenos data-linenos="56 "></span>
<span class=linenos data-linenos="57 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="58 "></span><span class=sd>        timeout: maximum time for policy</span>
<span class=linenos data-linenos="59 "></span><span class=sd>        nodes: optional list of nodes to apply the policy. By default applies to all known nodes of request.</span>
<span class=linenos data-linenos="60 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="61 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span>
<span class=linenos data-linenos="62 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
<span class=linenos data-linenos="63 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_time</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.DiscardOnTimeout-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.DiscardOnTimeout.continue_ class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">continue_</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>continue_</span><span class=p>(</span><span class=n>requests</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Discards requests that reach timeout, always continue</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._status.PolicyStatus" href="#fedbiomed.researcher.requests.PolicyStatus">PolicyStatus</a></code> </td> <td> <div class=doc-md-description> <p>CONTINUE</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="101 "></span><span class=k>def</span><span class=w> </span><span class=nf>continue_</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requests</span><span class=p>:</span> <span class=n>TRequest</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="102 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Discards requests that reach timeout, always continue</span>
<span class=linenos data-linenos="103 "></span>
<span class=linenos data-linenos="104 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="105 "></span><span class=sd>        CONTINUE</span>
<span class=linenos data-linenos="106 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="107 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>requests</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.FederatedRequest class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">FederatedRequest</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>FederatedRequest</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>nodes</span><span class=p>,</span> <span class=n>policy</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Dispatches federated requests</p> <p>This class has been design to be send a request and wait until a response is received</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>message</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-internal" title="fedbiomed.common.message.Message" href="../../common/message/#fedbiomed.common.message.Message">Message</a>, <a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._requests.MessagesByNode" href="#fedbiomed.researcher.requests.MessagesByNode">MessagesByNode</a>]</code> </td> <td> <div class=doc-md-description> <p>either a common <code>Message</code> to send to nodes or a dict of distinct message per node indexed by the node ID</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-internal" title="fedbiomed.transport.node_agent.NodeAgent" href="../../transport/node_agent/#fedbiomed.transport.node_agent.NodeAgent">NodeAgent</a>]</code> </td> <td> <div class=doc-md-description> <p>list of nodes that are sent the message</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>policy</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._policies.RequestPolicy" href="#fedbiomed.researcher.requests.RequestPolicy">RequestPolicy</a>]]</code> </td> <td> <div class=doc-md-description> <p>list of policies for controlling the handling of the request</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="133 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
<span class=linenos data-linenos="134 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="135 "></span>    <span class=n>message</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Message</span><span class=p>,</span> <span class=n>MessagesByNode</span><span class=p>],</span>
<span class=linenos data-linenos="136 "></span>    <span class=n>nodes</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>NodeAgent</span><span class=p>],</span>
<span class=linenos data-linenos="137 "></span>    <span class=n>policy</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=n>RequestPolicy</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="138 "></span><span class=p>):</span>
<span class=linenos data-linenos="139 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor of the class.</span>
<span class=linenos data-linenos="140 "></span>
<span class=linenos data-linenos="141 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="142 "></span><span class=sd>        message: either a common `Message` to send to nodes or a dict of distinct message per node</span>
<span class=linenos data-linenos="143 "></span><span class=sd>            indexed by the node ID</span>
<span class=linenos data-linenos="144 "></span><span class=sd>        nodes: list of nodes that are sent the message</span>
<span class=linenos data-linenos="145 "></span><span class=sd>        policy: list of policies for controlling the handling of the request</span>
<span class=linenos data-linenos="146 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="147 "></span>
<span class=linenos data-linenos="148 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_message</span> <span class=o>=</span> <span class=n>message</span>
<span class=linenos data-linenos="149 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span> <span class=o>=</span> <span class=n>nodes</span>
<span class=linenos data-linenos="150 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_requests</span> <span class=o>=</span> <span class=p>[]</span>
<span class=linenos data-linenos="151 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_request_id</span> <span class=o>=</span> <span class=n>REQUEST_PREFIX</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="152 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_nodes_status</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="153 "></span>
<span class=linenos data-linenos="154 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_pending_replies</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Semaphore</span><span class=p>(</span><span class=n>value</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=linenos data-linenos="155 "></span>
<span class=linenos data-linenos="156 "></span>    <span class=c1># Set-up policies</span>
<span class=linenos data-linenos="157 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_policy</span> <span class=o>=</span> <span class=n>PolicyController</span><span class=p>(</span><span class=n>policy</span><span class=p>)</span>
<span class=linenos data-linenos="158 "></span>
<span class=linenos data-linenos="159 "></span>    <span class=c1># Set up single requests</span>
<span class=linenos data-linenos="160 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_message</span><span class=p>,</span> <span class=n>Message</span><span class=p>):</span>
<span class=linenos data-linenos="161 "></span>        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="162 "></span>            <span class=bp>self</span><span class=o>.</span><span class=n>_requests</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<span class=linenos data-linenos="163 "></span>                <span class=n>Request</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_message</span><span class=p>,</span> <span class=n>node</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_pending_replies</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_request_id</span><span class=p>)</span>
<span class=linenos data-linenos="164 "></span>            <span class=p>)</span>
<span class=linenos data-linenos="165 "></span>
<span class=linenos data-linenos="166 "></span>    <span class=c1># Different message for each node</span>
<span class=linenos data-linenos="167 "></span>    <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_message</span><span class=p>,</span> <span class=n>MessagesByNode</span><span class=p>):</span>
<span class=linenos data-linenos="168 "></span>        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="169 "></span>            <span class=k>if</span> <span class=n>m</span> <span class=o>:=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_message</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>id</span><span class=p>):</span>
<span class=linenos data-linenos="170 "></span>                <span class=bp>self</span><span class=o>.</span><span class=n>_requests</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<span class=linenos data-linenos="171 "></span>                    <span class=n>Request</span><span class=p>(</span><span class=n>m</span><span class=p>,</span> <span class=n>node</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_pending_replies</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_request_id</span><span class=p>)</span>
<span class=linenos data-linenos="172 "></span>                <span class=p>)</span>
<span class=linenos data-linenos="173 "></span>            <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="174 "></span>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Node </span><span class=si>{</span><span class=n>node</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> is unknown. Send message to others, ignore this one.&quot;</span><span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.FederatedRequest-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.FederatedRequest.policy class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">policy</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>policy</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns policy controller</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.FederatedRequest.requests class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">requests</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>requests</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns requests</p> </div> </div> <h4 id=fedbiomed.researcher.requests.FederatedRequest-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.FederatedRequest.disconnected_requests class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">disconnected_requests</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>disconnected_requests</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the requests to disconnected nodes</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-internal" title="fedbiomed.common.message.Message" href="../../common/message/#fedbiomed.common.message.Message">Message</a>]</code> </td> <td> <div class=doc-md-description> <p>A list of request <code>Message</code> sent to disconnected nodes</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="233 "></span><span class=k>def</span><span class=w> </span><span class=nf>disconnected_requests</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Message</span><span class=p>]:</span>
<span class=linenos data-linenos="234 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the requests to disconnected nodes</span>
<span class=linenos data-linenos="235 "></span>
<span class=linenos data-linenos="236 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="237 "></span><span class=sd>        A list of request `Message` sent to disconnected nodes</span>
<span class=linenos data-linenos="238 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="239 "></span>    <span class=k>return</span> <span class=p>[</span><span class=n>req</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_requests</span> <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>RequestStatus</span><span class=o>.</span><span class=n>DISCONNECT</span><span class=p>]</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.FederatedRequest.errors class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">errors</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>errors</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns errors of each request</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-internal" title="fedbiomed.common.message.ErrorMessage" href="../../common/message/#fedbiomed.common.message.ErrorMessage">ErrorMessage</a>]</code> </td> <td> <div class=doc-md-description> <p>A dict of error <code>Message</code> received for this request, indexed by node ID</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="224 "></span><span class=k>def</span><span class=w> </span><span class=nf>errors</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>ErrorMessage</span><span class=p>]:</span>
<span class=linenos data-linenos="225 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns errors of each request</span>
<span class=linenos data-linenos="226 "></span>
<span class=linenos data-linenos="227 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="228 "></span><span class=sd>        A dict of error `Message` received for this request, indexed by node ID</span>
<span class=linenos data-linenos="229 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="230 "></span>
<span class=linenos data-linenos="231 "></span>    <span class=k>return</span> <span class=p>{</span><span class=n>req</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=n>req</span><span class=o>.</span><span class=n>error</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_requests</span> <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>error</span><span class=p>}</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.FederatedRequest.replies class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">replies</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>replies</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns replies of each request</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-internal" title="fedbiomed.common.message.Message" href="../../common/message/#fedbiomed.common.message.Message">Message</a>]</code> </td> <td> <div class=doc-md-description> <p>A dict of replies <code>Message</code> received for this request, indexed by node ID</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="215 "></span><span class=k>def</span><span class=w> </span><span class=nf>replies</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Message</span><span class=p>]:</span>
<span class=linenos data-linenos="216 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns replies of each request</span>
<span class=linenos data-linenos="217 "></span>
<span class=linenos data-linenos="218 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="219 "></span><span class=sd>        A dict of replies `Message` received for this request, indexed by node ID</span>
<span class=linenos data-linenos="220 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="221 "></span>
<span class=linenos data-linenos="222 "></span>    <span class=k>return</span> <span class=p>{</span><span class=n>req</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=n>req</span><span class=o>.</span><span class=n>reply</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_requests</span> <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>reply</span><span class=p>}</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.FederatedRequest.send class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">send</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>send</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sends federated request</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="241 "></span><span class=k>def</span><span class=w> </span><span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="242 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Sends federated request&quot;&quot;&quot;</span>
<span class=linenos data-linenos="243 "></span>    <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_requests</span><span class=p>:</span>
<span class=linenos data-linenos="244 "></span>        <span class=n>req</span><span class=o>.</span><span class=n>send</span><span class=p>()</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.FederatedRequest.wait class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">wait</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>wait</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Waits for the replies of the messages that are sent</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="246 "></span><span class=k>def</span><span class=w> </span><span class=nf>wait</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="247 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Waits for the replies of the messages that are sent&quot;&quot;&quot;</span>
<span class=linenos data-linenos="248 "></span>
<span class=linenos data-linenos="249 "></span>    <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>_policy</span><span class=o>.</span><span class=n>continue_all</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_requests</span><span class=p>)</span> <span class=o>==</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>CONTINUE</span><span class=p>:</span>
<span class=linenos data-linenos="250 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_pending_replies</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>REQUEST_STATUS_CHECK_TIMEOUT</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.MessagesByNode class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">MessagesByNode</span> </h3> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code></p> <p>Type to defined messages by node</p> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.PolicyController class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">PolicyController</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>PolicyController</span><span class=p>(</span><span class=n>policies</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="168 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
<span class=linenos data-linenos="169 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="170 "></span>    <span class=n>policies</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=n>RequestPolicy</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="171 "></span><span class=p>):</span>
<span class=linenos data-linenos="172 "></span>
<span class=linenos data-linenos="173 "></span>    <span class=n>policies</span> <span class=o>=</span> <span class=n>policies</span> <span class=ow>or</span> <span class=p>[]</span>
<span class=linenos data-linenos="174 "></span>    <span class=n>policies</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>RequestPolicy</span><span class=p>())</span>
<span class=linenos data-linenos="175 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span> <span class=o>=</span> <span class=n>policies</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.PolicyController-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.PolicyController.continue_all class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">continue_all</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>continue_all</span><span class=p>(</span><span class=n>requests</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Checks if all policies indicate to continue.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>requests</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<span title="fedbiomed.researcher.requests._policies.TRequest">TRequest</span>]</code> </td> <td> <div class=doc-md-description> <p>List of <a class="autorefs autorefs-internal" href="#fedbiomed.researcher.requests.Request">Request</a> objects to check against policies</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._status.PolicyStatus" href="#fedbiomed.researcher.requests.PolicyStatus">PolicyStatus</a></code> </td> <td> <div class=doc-md-description> <p>CONTINUE if all policies indicates to continue</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="177 "></span><span class=k>def</span><span class=w> </span><span class=nf>continue_all</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requests</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>TRequest</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="178 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Checks if all policies indicate to continue.</span>
<span class=linenos data-linenos="179 "></span>
<span class=linenos data-linenos="180 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="181 "></span><span class=sd>        requests: List of [Request][fedbiomed.researcher.requests.Request] objects to</span>
<span class=linenos data-linenos="182 "></span><span class=sd>            check against policies</span>
<span class=linenos data-linenos="183 "></span>
<span class=linenos data-linenos="184 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="185 "></span><span class=sd>        CONTINUE if all policies indicates to continue</span>
<span class=linenos data-linenos="186 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="187 "></span>
<span class=linenos data-linenos="188 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>requests</span><span class=p>:</span>
<span class=linenos data-linenos="189 "></span>        <span class=k>return</span> <span class=kc>False</span>
<span class=linenos data-linenos="190 "></span>
<span class=linenos data-linenos="191 "></span>    <span class=n>status</span> <span class=o>=</span> <span class=nb>all</span><span class=p>(</span>
<span class=linenos data-linenos="192 "></span>        <span class=p>[</span><span class=n>policy</span><span class=o>.</span><span class=n>continue_</span><span class=p>(</span><span class=n>requests</span><span class=o>=</span><span class=n>requests</span><span class=p>)</span> <span class=o>==</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>CONTINUE</span>
<span class=linenos data-linenos="193 "></span>            <span class=k>for</span> <span class=n>policy</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span><span class=p>]</span>
<span class=linenos data-linenos="194 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="195 "></span>
<span class=linenos data-linenos="196 "></span>    <span class=k>return</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>CONTINUE</span> <span class=k>if</span> <span class=n>status</span> <span class=k>else</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>COMPLETED</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.PolicyController.has_stopped_any class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">has_stopped_any</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>has_stopped_any</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Checks if any of the policies indicates to stop</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> </td> <td> <div class=doc-md-description> <p>True if request has stopped due to given strategy</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="198 "></span><span class=k>def</span><span class=w> </span><span class=nf>has_stopped_any</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=linenos data-linenos="199 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Checks if any of the policies indicates to stop</span>
<span class=linenos data-linenos="200 "></span>
<span class=linenos data-linenos="201 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="202 "></span><span class=sd>        True if request has stopped due to given strategy</span>
<span class=linenos data-linenos="203 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="204 "></span>
<span class=linenos data-linenos="205 "></span>    <span class=n>is_stopped</span> <span class=o>=</span> <span class=nb>any</span><span class=p>(</span>
<span class=linenos data-linenos="206 "></span>        <span class=p>[</span><span class=n>policy</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>STOPPED</span> <span class=k>for</span> <span class=n>policy</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span><span class=p>]</span>
<span class=linenos data-linenos="207 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="208 "></span>
<span class=linenos data-linenos="209 "></span>    <span class=k>return</span> <span class=n>is_stopped</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.PolicyController.report class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">report</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>report</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reports strategy stop status</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>Dict of policies stopped, indexed by the node ID that caused the stop</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="211 "></span><span class=k>def</span><span class=w> </span><span class=nf>report</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
<span class=linenos data-linenos="212 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reports strategy stop status</span>
<span class=linenos data-linenos="213 "></span>
<span class=linenos data-linenos="214 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="215 "></span><span class=sd>        Dict of policies stopped, indexed by the node ID that caused the stop</span>
<span class=linenos data-linenos="216 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="217 "></span>    <span class=n>report</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="218 "></span>    <span class=k>for</span> <span class=n>st</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_policies</span><span class=p>:</span>
<span class=linenos data-linenos="219 "></span>        <span class=k>if</span> <span class=n>st</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>STOPPED</span><span class=p>:</span>
<span class=linenos data-linenos="220 "></span>            <span class=n>report</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=n>st</span><span class=o>.</span><span class=n>stop_caused_by</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>id</span> <span class=p>:</span> <span class=n>st</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>})</span>
<span class=linenos data-linenos="221 "></span>
<span class=linenos data-linenos="222 "></span>    <span class=k>return</span> <span class=n>report</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.PolicyStatus class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">PolicyStatus</span> </h3> <div class="doc doc-contents "> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.PolicyStatus-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.PolicyStatus.COMPLETED class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">COMPLETED</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>COMPLETED</span> <span class=o>=</span> <span class=s1>&#39;COMPLETED&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.PolicyStatus.CONTINUE class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">CONTINUE</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>CONTINUE</span> <span class=o>=</span> <span class=s1>&#39;CONTINUE&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.PolicyStatus.STOPPED class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">STOPPED</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>STOPPED</span> <span class=o>=</span> <span class=s1>&#39;STOPPED&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.Request class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">Request</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>Request</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>node</span><span class=p>,</span> <span class=n>sem_pending</span><span class=p>,</span> <span class=n>request_id</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>message</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.message.Message" href="../../common/message/#fedbiomed.common.message.Message">Message</a></code> </td> <td> <div class=doc-md-description> <p>Message to send to the node</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>node</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.transport.node_agent.NodeAgent" href="../../transport/node_agent/#fedbiomed.transport.node_agent.NodeAgent">NodeAgent</a></code> </td> <td> <div class=doc-md-description> <p>Node agent</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>request_id</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>unique ID of request</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>sem_pending</code></td> <td> <code><a class="autorefs autorefs-external" title="threading.Semaphore" href="https://docs.python.org/3/library/threading.html#threading.Semaphore">Semaphore</a></code> </td> <td> <div class=doc-md-description> <p>semaphore for signaling new pending reply</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="51 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
<span class=linenos data-linenos="52 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="53 "></span>    <span class=n>message</span><span class=p>:</span> <span class=n>Message</span><span class=p>,</span>
<span class=linenos data-linenos="54 "></span>    <span class=n>node</span><span class=p>:</span> <span class=n>NodeAgent</span><span class=p>,</span>
<span class=linenos data-linenos="55 "></span>    <span class=n>sem_pending</span><span class=p>:</span> <span class=n>threading</span><span class=o>.</span><span class=n>Semaphore</span><span class=p>,</span>
<span class=linenos data-linenos="56 "></span>    <span class=n>request_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="57 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="58 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Single request for node</span>
<span class=linenos data-linenos="59 "></span>
<span class=linenos data-linenos="60 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="61 "></span><span class=sd>        message: Message to send to the node</span>
<span class=linenos data-linenos="62 "></span><span class=sd>        node: Node agent</span>
<span class=linenos data-linenos="63 "></span><span class=sd>        request_id: unique ID of request</span>
<span class=linenos data-linenos="64 "></span><span class=sd>        sem_pending: semaphore for signaling new pending reply</span>
<span class=linenos data-linenos="65 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="66 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_request_id</span> <span class=o>=</span> <span class=n>request_id</span> <span class=k>if</span> <span class=n>request_id</span> <span class=k>else</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="67 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_node</span> <span class=o>=</span> <span class=n>node</span>
<span class=linenos data-linenos="68 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_message</span> <span class=o>=</span> <span class=n>message</span>
<span class=linenos data-linenos="69 "></span>
<span class=linenos data-linenos="70 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_sem_pending</span> <span class=o>=</span> <span class=n>sem_pending</span>
<span class=linenos data-linenos="71 "></span>
<span class=linenos data-linenos="72 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>reply</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="73 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>error</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="74 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.Request-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.Request.error class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">error</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>error</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.Request.node class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">node</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>node</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns node agent</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.Request.reply class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">reply</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>reply</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.Request.status class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">status</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.researcher.requests.Request-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Request.flush class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">flush</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>flush</span><span class=p>(</span><span class=n>stopped</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Flushes the reply that has been processed</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>stopped</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> </td> <td> <div class=doc-md-description> <p>True if the request was stopped before completion</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="102 "></span><span class=k>def</span><span class=w> </span><span class=nf>flush</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>stopped</span><span class=p>:</span> <span class=nb>bool</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="103 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Flushes the reply that has been processed</span>
<span class=linenos data-linenos="104 "></span>
<span class=linenos data-linenos="105 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="106 "></span><span class=sd>        stopped: True if the request was stopped before completion</span>
<span class=linenos data-linenos="107 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="108 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_node</span><span class=o>.</span><span class=n>flush</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_request_id</span><span class=p>,</span> <span class=n>stopped</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Request.has_finished class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">has_finished</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>has_finished</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Queries if the request has finished.</p> <p>Also tracks if node has disconnected.</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="81 "></span><span class=k>def</span><span class=w> </span><span class=nf>has_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=linenos data-linenos="82 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Queries if the request has finished.</span>
<span class=linenos data-linenos="83 "></span>
<span class=linenos data-linenos="84 "></span><span class=sd>    Also tracks if node has disconnected.</span>
<span class=linenos data-linenos="85 "></span>
<span class=linenos data-linenos="86 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="87 "></span><span class=sd>        True if a reply was received from node</span>
<span class=linenos data-linenos="88 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="89 "></span>
<span class=linenos data-linenos="90 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_node</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>NodeActiveStatus</span><span class=o>.</span><span class=n>DISCONNECTED</span><span class=p>:</span>
<span class=linenos data-linenos="91 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>RequestStatus</span><span class=o>.</span><span class=n>DISCONNECT</span>
<span class=linenos data-linenos="92 "></span>        <span class=k>return</span> <span class=kc>True</span>  <span class=c1># Don&#39;t expect any reply</span>
<span class=linenos data-linenos="93 "></span>
<span class=linenos data-linenos="94 "></span>    <span class=k>return</span> <span class=kc>True</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>reply</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>error</span> <span class=k>else</span> <span class=kc>False</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Request.on_reply class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">on_reply</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>on_reply</span><span class=p>(</span><span class=n>reply</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Callback for node agent to execute once it replies.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>reply</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.message.Message" href="../../common/message/#fedbiomed.common.message.Message">Message</a></code> </td> <td> <div class=doc-md-description> <p>reply message received from node</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="110 "></span><span class=k>def</span><span class=w> </span><span class=nf>on_reply</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>reply</span><span class=p>:</span> <span class=n>Message</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="111 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Callback for node agent to execute once it replies.</span>
<span class=linenos data-linenos="112 "></span>
<span class=linenos data-linenos="113 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="114 "></span><span class=sd>        reply: reply message received from node</span>
<span class=linenos data-linenos="115 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="116 "></span>
<span class=linenos data-linenos="117 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>reply</span><span class=p>,</span> <span class=n>ErrorMessage</span><span class=p>):</span>
<span class=linenos data-linenos="118 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>error</span> <span class=o>=</span> <span class=n>reply</span>
<span class=linenos data-linenos="119 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>RequestStatus</span><span class=o>.</span><span class=n>ERROR</span>
<span class=linenos data-linenos="120 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="121 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>reply</span> <span class=o>=</span> <span class=n>reply</span>
<span class=linenos data-linenos="122 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>RequestStatus</span><span class=o>.</span><span class=n>SUCCESS</span>
<span class=linenos data-linenos="123 "></span>
<span class=linenos data-linenos="124 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_sem_pending</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Request.send class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">send</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>send</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sends the request</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 96 "></span><span class=k>def</span><span class=w> </span><span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos=" 97 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Sends the request&quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 98 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_message</span><span class=o>.</span><span class=n>request_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_request_id</span>
<span class=linenos data-linenos=" 99 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_node</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_message</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>on_reply</span><span class=p>)</span>
<span class=linenos data-linenos="100 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>RequestStatus</span><span class=o>.</span><span class=n>NO_REPLY_YET</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.RequestPolicy class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">RequestPolicy</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>RequestPolicy</span><span class=p>(</span><span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Base strategy to collect replies from remote agents</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="16 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos="17 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="18 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span> <span class=o>=</span> <span class=n>nodes</span>
<span class=linenos data-linenos="19 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>stop_caused_by</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.RequestPolicy-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.RequestPolicy.status class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">status</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.RequestPolicy.stop_caused_by class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">stop_caused_by</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>stop_caused_by</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.researcher.requests.RequestPolicy-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.RequestPolicy.completed class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">completed</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>completed</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Updates status of strategy as completed without any issue</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="44 "></span><span class=k>def</span><span class=w> </span><span class=nf>completed</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="45 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Updates status of strategy as completed without any issue&quot;&quot;&quot;</span>
<span class=linenos data-linenos="46 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>COMPLETED</span>
<span class=linenos data-linenos="47 "></span>
<span class=linenos data-linenos="48 "></span>    <span class=k>return</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>COMPLETED</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.RequestPolicy.continue_ class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">continue_</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>continue_</span><span class=p>(</span><span class=n>requests</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Default strategy stops collecting result once all nodes has answered</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._status.PolicyStatus" href="#fedbiomed.researcher.requests.PolicyStatus">PolicyStatus</a></code> </td> <td> <div class=doc-md-description> <p>False stops the iteration</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="21 "></span><span class=k>def</span><span class=w> </span><span class=nf>continue_</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requests</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="22 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Default strategy stops collecting result once all nodes has answered</span>
<span class=linenos data-linenos="23 "></span>
<span class=linenos data-linenos="24 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="25 "></span><span class=sd>        False stops the iteration</span>
<span class=linenos data-linenos="26 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="27 "></span>
<span class=linenos data-linenos="28 "></span>    <span class=n>has_finished</span> <span class=o>=</span> <span class=nb>all</span><span class=p>([</span><span class=n>req</span><span class=o>.</span><span class=n>has_finished</span><span class=p>()</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=n>requests</span><span class=p>])</span>
<span class=linenos data-linenos="29 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>keep</span><span class=p>()</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>has_finished</span> <span class=k>else</span> <span class=bp>self</span><span class=o>.</span><span class=n>completed</span><span class=p>()</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.RequestPolicy.keep class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">keep</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>keep</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Keeps continue collecting replies from nodes</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="38 "></span><span class=k>def</span><span class=w> </span><span class=nf>keep</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="39 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Keeps continue collecting replies from nodes&quot;&quot;&quot;</span>
<span class=linenos data-linenos="40 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>CONTINUE</span>
<span class=linenos data-linenos="41 "></span>
<span class=linenos data-linenos="42 "></span>    <span class=k>return</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>CONTINUE</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.RequestPolicy.stop class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">stop</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>stop</span><span class=p>(</span><span class=n>req</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Stop sign for strategy</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="31 "></span><span class=k>def</span><span class=w> </span><span class=nf>stop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>req</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="32 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Stop sign for strategy&quot;&quot;&quot;</span>
<span class=linenos data-linenos="33 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>STOPPED</span>
<span class=linenos data-linenos="34 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>stop_caused_by</span> <span class=o>=</span> <span class=n>req</span>
<span class=linenos data-linenos="35 "></span>
<span class=linenos data-linenos="36 "></span>    <span class=k>return</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>STOPPED</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.RequestStatus class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">RequestStatus</span> </h3> <div class="doc doc-contents "> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.RequestStatus-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.RequestStatus.DISCONNECT class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">DISCONNECT</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>DISCONNECT</span> <span class=o>=</span> <span class=s1>&#39;DISCONNECT&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.RequestStatus.ERROR class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">ERROR</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>ERROR</span> <span class=o>=</span> <span class=s1>&#39;ERROR&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.RequestStatus.NO_REPLY_YET class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">NO_REPLY_YET</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>NO_REPLY_YET</span> <span class=o>=</span> <span class=s1>&#39;NO_REPLY_YET&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.RequestStatus.SUCCESS class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">SUCCESS</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>SUCCESS</span> <span class=o>=</span> <span class=s1>&#39;SUCCESS&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.requests.RequestStatus.TIMEOUT class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">TIMEOUT</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>TIMEOUT</span> <span class=o>=</span> <span class=s1>&#39;TIMEOUT&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.Requests class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">Requests</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>Requests</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Manages communication between researcher and nodes.</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="258 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="259 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor of the class</span>
<span class=linenos data-linenos="260 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="261 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_monitor_message_callback</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="262 "></span>
<span class=linenos data-linenos="263 "></span>    <span class=c1># Creates grpc server and starts it</span>
<span class=linenos data-linenos="264 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_grpc_server</span> <span class=o>=</span> <span class=n>GrpcServer</span><span class=p>(</span>
<span class=linenos data-linenos="265 "></span>        <span class=n>host</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;SERVER_HOST&quot;</span><span class=p>],</span>
<span class=linenos data-linenos="266 "></span>        <span class=n>port</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;SERVER_PORT&quot;</span><span class=p>],</span>
<span class=linenos data-linenos="267 "></span>        <span class=n>on_message</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>on_message</span><span class=p>,</span>
<span class=linenos data-linenos="268 "></span>        <span class=n>ssl</span><span class=o>=</span><span class=n>SSLCredentials</span><span class=p>(</span>
<span class=linenos data-linenos="269 "></span>            <span class=n>key</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;FBM_CERTIFICATE_KEY&#39;</span><span class=p>],</span>
<span class=linenos data-linenos="270 "></span>            <span class=n>cert</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;FBM_CERTIFICATE_PEM&#39;</span><span class=p>])</span>
<span class=linenos data-linenos="271 "></span>
<span class=linenos data-linenos="272 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="273 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>start_messaging</span><span class=p>()</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.Requests-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.add_monitor_callback class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">add_monitor_callback</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>add_monitor_callback</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Adds callback function for monitor messages</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>callback</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>], None]</code> </td> <td> <div class=doc-md-description> <p>Callback function for handling monitor messages that come due 'general/monitoring' channel</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="503 "></span><span class=k>def</span><span class=w> </span><span class=nf>add_monitor_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=n>Dict</span><span class=p>],</span> <span class=kc>None</span><span class=p>]):</span>
<span class=linenos data-linenos="504 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Adds callback function for monitor messages</span>
<span class=linenos data-linenos="505 "></span>
<span class=linenos data-linenos="506 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="507 "></span><span class=sd>        callback: Callback function for handling monitor messages that come due &#39;general/monitoring&#39; channel</span>
<span class=linenos data-linenos="508 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="509 "></span>
<span class=linenos data-linenos="510 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_monitor_message_callback</span> <span class=o>=</span> <span class=n>callback</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.list class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">list</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nb>list</span><span class=p>(</span><span class=nf>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Lists available data in each node</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._requests.Requests.list" href="#fedbiomed.researcher.requests.Requests.list">list</a>]</code> </td> <td> <div class=doc-md-description> <p>optionally filter nodes with this list. Default is None, no filtering, consider all nodes</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>verbose</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> </td> <td> <div class=doc-md-description> <p>If it is true it prints datasets in readable format</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>A dict with node_id as keys, and list of dicts describing available data as values</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="399 "></span><span class=k>def</span><span class=w> </span><span class=nf>list</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>list</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>verbose</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="400 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Lists available data in each node</span>
<span class=linenos data-linenos="401 "></span>
<span class=linenos data-linenos="402 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="403 "></span><span class=sd>        nodes: optionally filter nodes with this list. Default is None, no filtering, consider all nodes</span>
<span class=linenos data-linenos="404 "></span><span class=sd>        verbose: If it is true it prints datasets in readable format</span>
<span class=linenos data-linenos="405 "></span>
<span class=linenos data-linenos="406 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="407 "></span><span class=sd>        A dict with node_id as keys, and list of dicts describing available data as values</span>
<span class=linenos data-linenos="408 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="409 "></span>
<span class=linenos data-linenos="410 "></span>    <span class=n>message</span> <span class=o>=</span> <span class=n>ListRequest</span><span class=p>(</span><span class=n>researcher_id</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;RESEARCHER_ID&#39;</span><span class=p>])</span>
<span class=linenos data-linenos="411 "></span>
<span class=linenos data-linenos="412 "></span>    <span class=n>data_found</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="413 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>nodes</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=p>[</span><span class=n>DiscardOnTimeout</span><span class=p>(</span><span class=mi>5</span><span class=p>)])</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos="414 "></span>        <span class=k>for</span> <span class=n>node_id</span><span class=p>,</span> <span class=n>reply</span> <span class=ow>in</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="415 "></span>            <span class=n>data_found</span><span class=p>[</span><span class=n>node_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>reply</span><span class=o>.</span><span class=n>databases</span>
<span class=linenos data-linenos="416 "></span>
<span class=linenos data-linenos="417 "></span>    <span class=k>if</span> <span class=n>verbose</span><span class=p>:</span>
<span class=linenos data-linenos="418 "></span>        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>data_found</span><span class=p>:</span>
<span class=linenos data-linenos="419 "></span>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>data_found</span><span class=p>[</span><span class=n>node</span><span class=p>])</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<span class=linenos data-linenos="420 "></span>                <span class=n>rows</span> <span class=o>=</span> <span class=p>[</span><span class=n>row</span><span class=o>.</span><span class=n>values</span><span class=p>()</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>data_found</span><span class=p>[</span><span class=n>node</span><span class=p>]]</span>
<span class=linenos data-linenos="421 "></span>                <span class=n>headers</span> <span class=o>=</span> <span class=n>data_found</span><span class=p>[</span><span class=n>node</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
<span class=linenos data-linenos="422 "></span>                <span class=n>info</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1> Node: </span><span class=si>{}</span><span class=s1> | Number of Datasets: </span><span class=si>{}</span><span class=s1> </span><span class=se>\n</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>data_found</span><span class=p>[</span><span class=n>node</span><span class=p>]))</span>
<span class=linenos data-linenos="423 "></span>                <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>info</span> <span class=o>+</span> <span class=n>tabulate</span><span class=o>.</span><span class=n>tabulate</span><span class=p>(</span><span class=n>rows</span><span class=p>,</span> <span class=n>headers</span><span class=p>,</span> <span class=n>tablefmt</span><span class=o>=</span><span class=s2>&quot;grid&quot;</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="424 "></span>            <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="425 "></span>                <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1> Node: </span><span class=si>{}</span><span class=s1> | Number of Datasets: </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>data_found</span><span class=p>[</span><span class=n>node</span><span class=p>]))</span> <span class=o>+</span>
<span class=linenos data-linenos="426 "></span>                            <span class=s2>&quot; No data has been set up for this node.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="427 "></span>
<span class=linenos data-linenos="428 "></span>    <span class=k>return</span> <span class=n>data_found</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.on_message class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">on_message</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>on_message</span><span class=p>(</span><span class=n>msg</span><span class=p>,</span> <span class=n>type_</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Handles arbitrary messages received from the remote agents</p> <p>This callback is only used for feedback messages from nodes (logs, experiment monitor), not for node replies to requests.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>msg</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>], <a class="autorefs autorefs-internal" title="fedbiomed.common.message.Message" href="../../common/message/#fedbiomed.common.message.Message">Message</a>]</code> </td> <td> <div class=doc-md-description> <p>de-serialized msg</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>type_</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.constants.MessageType" href="../../common/constants/#fedbiomed.common.constants.MessageType">MessageType</a></code> </td> <td> <div class=doc-md-description> <p>Reply type one of reply, log, scalar</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="281 "></span><span class=k>def</span><span class=w> </span><span class=nf>on_message</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>Message</span><span class=p>],</span> <span class=n>type_</span><span class=p>:</span> <span class=n>MessageType</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="282 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handles arbitrary messages received from the remote agents</span>
<span class=linenos data-linenos="283 "></span>
<span class=linenos data-linenos="284 "></span><span class=sd>    This callback is only used for feedback messages from nodes (logs, experiment</span>
<span class=linenos data-linenos="285 "></span><span class=sd>    monitor), not for node replies to requests.</span>
<span class=linenos data-linenos="286 "></span>
<span class=linenos data-linenos="287 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="288 "></span><span class=sd>        msg: de-serialized msg</span>
<span class=linenos data-linenos="289 "></span><span class=sd>        type_: Reply type one of reply, log, scalar</span>
<span class=linenos data-linenos="290 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="291 "></span>
<span class=linenos data-linenos="292 "></span>    <span class=k>if</span> <span class=n>type_</span> <span class=o>==</span> <span class=n>MessageType</span><span class=o>.</span><span class=n>LOG</span><span class=p>:</span>
<span class=linenos data-linenos="293 "></span>        <span class=c1># forward the treatment to node_log_handling() (same thread)</span>
<span class=linenos data-linenos="294 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>print_node_log_message</span><span class=p>(</span><span class=n>msg</span><span class=o>.</span><span class=n>get_dict</span><span class=p>())</span>
<span class=linenos data-linenos="295 "></span>
<span class=linenos data-linenos="296 "></span>    <span class=k>elif</span> <span class=n>type_</span> <span class=o>==</span> <span class=n>MessageType</span><span class=o>.</span><span class=n>SCALAR</span><span class=p>:</span>
<span class=linenos data-linenos="297 "></span>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_monitor_message_callback</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="298 "></span>            <span class=c1># Pass message to Monitor&#39;s on message handler</span>
<span class=linenos data-linenos="299 "></span>            <span class=bp>self</span><span class=o>.</span><span class=n>_monitor_message_callback</span><span class=p>(</span><span class=n>msg</span><span class=o>.</span><span class=n>get_dict</span><span class=p>())</span>
<span class=linenos data-linenos="300 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="301 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Undefined message type received  </span><span class=si>{</span><span class=n>type_</span><span class=si>}</span><span class=s2> - IGNORING&quot;</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.ping_nodes class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">ping_nodes</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>ping_nodes</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Pings online nodes</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._requests.Requests.list" href="#fedbiomed.researcher.requests.Requests.list">list</a></code> </td> <td> <div class=doc-md-description> <p>List of ID of up and running nodes</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="329 "></span><span class=k>def</span><span class=w> </span><span class=nf>ping_nodes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>:</span>
<span class=linenos data-linenos="330 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Pings online nodes</span>
<span class=linenos data-linenos="331 "></span>
<span class=linenos data-linenos="332 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="333 "></span><span class=sd>        List of ID of up and running nodes</span>
<span class=linenos data-linenos="334 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="335 "></span>    <span class=n>ping</span> <span class=o>=</span> <span class=n>PingRequest</span><span class=p>(</span><span class=n>researcher_id</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;ID&quot;</span><span class=p>])</span>
<span class=linenos data-linenos="336 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>ping</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=p>[</span><span class=n>DiscardOnTimeout</span><span class=p>(</span><span class=mi>5</span><span class=p>)])</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos="337 "></span>        <span class=n>nodes_online</span> <span class=o>=</span> <span class=p>[</span><span class=n>node_id</span> <span class=k>for</span> <span class=n>node_id</span><span class=p>,</span> <span class=n>reply</span> <span class=ow>in</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span><span class=o>.</span><span class=n>items</span><span class=p>()]</span>
<span class=linenos data-linenos="338 "></span>
<span class=linenos data-linenos="339 "></span>    <span class=k>return</span> <span class=n>nodes_online</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.print_node_log_message class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">print_node_log_message</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>print_node_log_message</span><span class=p>(</span><span class=n>log</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Prints logger messages coming from the node</p> <p>It is run on the communication process and must be as quick as possible: - all logs (coming from the nodes) are forwarded to the researcher logger (immediate display on console/file/whatever)</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>log</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code> </td> <td> <div class=doc-md-description> <p>log message and its metadata</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="303 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="304 "></span><span class=k>def</span><span class=w> </span><span class=nf>print_node_log_message</span><span class=p>(</span><span class=n>log</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="305 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Prints logger messages coming from the node</span>
<span class=linenos data-linenos="306 "></span>
<span class=linenos data-linenos="307 "></span><span class=sd>    It is run on the communication process and must be as quick as possible:</span>
<span class=linenos data-linenos="308 "></span><span class=sd>    - all logs (coming from the nodes) are forwarded to the researcher logger</span>
<span class=linenos data-linenos="309 "></span><span class=sd>    (immediate display on console/file/whatever)</span>
<span class=linenos data-linenos="310 "></span>
<span class=linenos data-linenos="311 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="312 "></span><span class=sd>        log: log message and its metadata</span>
<span class=linenos data-linenos="313 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="314 "></span>
<span class=linenos data-linenos="315 "></span>    <span class=c1># log contains the original message sent by the node</span>
<span class=linenos data-linenos="316 "></span>    <span class=c1># FIXME: we should use `fedbiomed.common.json.deserialize` method</span>
<span class=linenos data-linenos="317 "></span>    <span class=c1># instead of the json method when extracting json message</span>
<span class=linenos data-linenos="318 "></span>    <span class=n>original_msg</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>log</span><span class=p>[</span><span class=s2>&quot;msg&quot;</span><span class=p>])</span>
<span class=linenos data-linenos="319 "></span>
<span class=linenos data-linenos="320 "></span>    <span class=c1># Loging fancy feedback for training</span>
<span class=linenos data-linenos="321 "></span>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\033</span><span class=s2>[1m</span><span class=si>{}</span><span class=se>\033</span><span class=s2>[0m</span><span class=se>\n</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="322 "></span>                <span class=s2>&quot;</span><span class=se>\t\t\t\t\t\033</span><span class=s2>[1m NODE</span><span class=se>\033</span><span class=s2>[0m </span><span class=si>{}</span><span class=se>\n</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="323 "></span>                <span class=s2>&quot;</span><span class=se>\t\t\t\t\t\033</span><span class=s2>[1m MESSAGE:</span><span class=se>\033</span><span class=s2>[0m </span><span class=si>{}</span><span class=se>\033</span><span class=s2>[0m</span><span class=se>\n</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="324 "></span>                <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>log</span><span class=p>[</span><span class=s2>&quot;level&quot;</span><span class=p>],</span>
<span class=linenos data-linenos="325 "></span>                            <span class=n>log</span><span class=p>[</span><span class=s2>&quot;node_id&quot;</span><span class=p>],</span>
<span class=linenos data-linenos="326 "></span>                            <span class=n>original_msg</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>],</span>
<span class=linenos data-linenos="327 "></span>                            <span class=mi>5</span> <span class=o>*</span> <span class=s2>&quot;-------------&quot;</span><span class=p>))</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.remove_monitor_callback class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">remove_monitor_callback</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>remove_monitor_callback</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Removes callback function for Monitor class.</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="512 "></span><span class=k>def</span><span class=w> </span><span class=nf>remove_monitor_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="513 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Removes callback function for Monitor class. &quot;&quot;&quot;</span>
<span class=linenos data-linenos="514 "></span>
<span class=linenos data-linenos="515 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_monitor_message_callback</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.search class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">search</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>search</span><span class=p>(</span><span class=n>tags</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Searches available data by tags</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>tags</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>List containing tags associated to the data researcher is looking for.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._requests.Requests.list" href="#fedbiomed.researcher.requests.Requests.list">list</a>]</code> </td> <td> <div class=doc-md-description> <p>optionally filter nodes with this list. Default is None, no filtering, consider all nodes</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>A dict with node_id as keys, and list of dicts describing available data as values</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="366 "></span><span class=k>def</span><span class=w> </span><span class=nf>search</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tags</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>list</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="367 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Searches available data by tags</span>
<span class=linenos data-linenos="368 "></span>
<span class=linenos data-linenos="369 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="370 "></span><span class=sd>        tags: List containing tags associated to the data researcher is looking for.</span>
<span class=linenos data-linenos="371 "></span><span class=sd>        nodes: optionally filter nodes with this list. Default is None, no filtering, consider all nodes</span>
<span class=linenos data-linenos="372 "></span>
<span class=linenos data-linenos="373 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="374 "></span><span class=sd>        A dict with node_id as keys, and list of dicts describing available data as values</span>
<span class=linenos data-linenos="375 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="376 "></span>    <span class=n>message</span> <span class=o>=</span> <span class=n>SearchRequest</span><span class=p>(</span>
<span class=linenos data-linenos="377 "></span>        <span class=n>researcher_id</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;RESEARCHER_ID&#39;</span><span class=p>],</span>
<span class=linenos data-linenos="378 "></span>        <span class=n>tags</span><span class=o>=</span><span class=n>tags</span><span class=p>,</span>
<span class=linenos data-linenos="379 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="380 "></span>
<span class=linenos data-linenos="381 "></span>    <span class=n>data_found</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="382 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>nodes</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=p>[</span><span class=n>DiscardOnTimeout</span><span class=p>(</span><span class=mi>5</span><span class=p>)])</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos="383 "></span>
<span class=linenos data-linenos="384 "></span>        <span class=k>for</span> <span class=n>node_id</span><span class=p>,</span> <span class=n>reply</span> <span class=ow>in</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="385 "></span>            <span class=k>if</span> <span class=n>reply</span><span class=o>.</span><span class=n>databases</span><span class=p>:</span>
<span class=linenos data-linenos="386 "></span>                <span class=n>data_found</span><span class=p>[</span><span class=n>node_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>reply</span><span class=o>.</span><span class=n>databases</span>
<span class=linenos data-linenos="387 "></span>                <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>&#39;Node selected for training -&gt; </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>reply</span><span class=o>.</span><span class=n>node_id</span><span class=p>))</span>
<span class=linenos data-linenos="388 "></span>
<span class=linenos data-linenos="389 "></span>        <span class=k>for</span> <span class=n>node_id</span><span class=p>,</span> <span class=n>error</span> <span class=ow>in</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>errors</span><span class=p>()</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="390 "></span>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Node </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2> has returned error from search request </span><span class=si>{</span><span class=n>error</span><span class=o>.</span><span class=n>extra_msg</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="391 "></span>
<span class=linenos data-linenos="392 "></span>
<span class=linenos data-linenos="393 "></span>        <span class=k>if</span> <span class=ow>not</span> <span class=n>data_found</span><span class=p>:</span>
<span class=linenos data-linenos="394 "></span>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;No available dataset has found in nodes with tags: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>tags</span><span class=p>))</span>
<span class=linenos data-linenos="395 "></span>
<span class=linenos data-linenos="396 "></span>    <span class=k>return</span> <span class=n>data_found</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.send class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">send</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>send</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sends federated request to given nodes with given message</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>message</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-internal" title="fedbiomed.common.message.Message" href="../../common/message/#fedbiomed.common.message.Message">Message</a>, <a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._requests.MessagesByNode" href="#fedbiomed.researcher.requests.MessagesByNode">MessagesByNode</a>]</code> </td> <td> <div class=doc-md-description> <p>either a common <code>Message</code> to send to nodes or a dict of distinct message per node indexed by the node ID</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code> </td> <td> <div class=doc-md-description> <p>list of nodes that are sent the message. If None, send the message to all known active nodes.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>policy</code></td> <td> </td> <td> <div class=doc-md-description> <p>list of policies for controlling the handling of the request, or None</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._requests.FederatedRequest" href="#fedbiomed.researcher.requests.FederatedRequest">FederatedRequest</a></code> </td> <td> <div class=doc-md-description> <p>The object for handling the communications for this request</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="341 "></span><span class=k>def</span><span class=w> </span><span class=nf>send</span><span class=p>(</span>
<span class=linenos data-linenos="342 "></span>        <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="343 "></span>        <span class=n>message</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Message</span><span class=p>,</span> <span class=n>MessagesByNode</span><span class=p>],</span>
<span class=linenos data-linenos="344 "></span>        <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="345 "></span>        <span class=n>policies</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>RequestPolicy</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="346 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>FederatedRequest</span><span class=p>:</span>
<span class=linenos data-linenos="347 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Sends federated request to given nodes with given message</span>
<span class=linenos data-linenos="348 "></span>
<span class=linenos data-linenos="349 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="350 "></span><span class=sd>        message: either a common `Message` to send to nodes or a dict of distinct message per node</span>
<span class=linenos data-linenos="351 "></span><span class=sd>            indexed by the node ID</span>
<span class=linenos data-linenos="352 "></span><span class=sd>        nodes: list of nodes that are sent the message. If None, send the message to all known active nodes.</span>
<span class=linenos data-linenos="353 "></span><span class=sd>        policy: list of policies for controlling the handling of the request, or None</span>
<span class=linenos data-linenos="354 "></span>
<span class=linenos data-linenos="355 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="356 "></span><span class=sd>        The object for handling the communications for this request</span>
<span class=linenos data-linenos="357 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="358 "></span>
<span class=linenos data-linenos="359 "></span>    <span class=k>if</span> <span class=n>nodes</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="360 "></span>        <span class=n>nodes</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>_grpc_server</span><span class=o>.</span><span class=n>get_node</span><span class=p>(</span><span class=n>node</span><span class=p>)</span> <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>
<span class=linenos data-linenos="361 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="362 "></span>        <span class=n>nodes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_grpc_server</span><span class=o>.</span><span class=n>get_all_nodes</span><span class=p>()</span>
<span class=linenos data-linenos="363 "></span>
<span class=linenos data-linenos="364 "></span>    <span class=k>return</span> <span class=n>FederatedRequest</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>nodes</span><span class=p>,</span> <span class=n>policies</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.start_messaging class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">start_messaging</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>start_messaging</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Start communications endpoint</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="276 "></span><span class=k>def</span><span class=w> </span><span class=nf>start_messaging</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="277 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Start communications endpoint</span>
<span class=linenos data-linenos="278 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="279 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_grpc_server</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.Requests.training_plan_approve class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">training_plan_approve</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>training_plan_approve</span><span class=p>(</span><span class=n>training_plan</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s1>&#39;no description provided&#39;</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Send a training plan and a ApprovalRequest message to node(s).</p> <p>If a list of node id(s) is provided, the message will be individually sent to all nodes of the list. If the node id(s) list is None (default), the message is broadcast to all nodes.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>training_plan</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.training_plans.BaseTrainingPlan" href="../../common/training_plans/#fedbiomed.common.training_plans.BaseTrainingPlan">BaseTrainingPlan</a></code> </td> <td> <div class=doc-md-description> <p>the training plan class to send to the nodes for approval.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>description</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>Description of training plan approval request</p> </div> </td> <td> <code>&#39;no description provided&#39;</code> </td> </tr> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code> </td> <td> <div class=doc-md-description> <p>list of nodes (specified by their UUID)</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of pairs (node_id: status), where status indicates to the researcher</p> </div> </td> </tr> <tr class=doc-section-item> <td></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>that the training plan has been correctly downloaded on the node side.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>Warning</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>status does not mean that the training plan is approved, only that it has been added</p> </div> </td> </tr> <tr class=doc-section-item> <td></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>to the "approval queue" on the node side.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_requests.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="430 "></span><span class=k>def</span><span class=w> </span><span class=nf>training_plan_approve</span><span class=p>(</span>
<span class=linenos data-linenos="431 "></span>        <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="432 "></span>        <span class=n>training_plan</span><span class=p>:</span> <span class=n>BaseTrainingPlan</span><span class=p>,</span>
<span class=linenos data-linenos="433 "></span>        <span class=n>description</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;no description provided&quot;</span><span class=p>,</span>
<span class=linenos data-linenos="434 "></span>        <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="435 "></span>        <span class=n>policies</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="436 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="437 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Send a training plan and a ApprovalRequest message to node(s).</span>
<span class=linenos data-linenos="438 "></span>
<span class=linenos data-linenos="439 "></span><span class=sd>    If a list of node id(s) is provided, the message will be individually sent</span>
<span class=linenos data-linenos="440 "></span><span class=sd>    to all nodes of the list.</span>
<span class=linenos data-linenos="441 "></span><span class=sd>    If the node id(s) list is None (default), the message is broadcast to all nodes.</span>
<span class=linenos data-linenos="442 "></span>
<span class=linenos data-linenos="443 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="444 "></span><span class=sd>        training_plan: the training plan class to send to the nodes for approval.</span>
<span class=linenos data-linenos="445 "></span><span class=sd>        description: Description of training plan approval request</span>
<span class=linenos data-linenos="446 "></span><span class=sd>        nodes: list of nodes (specified by their UUID)</span>
<span class=linenos data-linenos="447 "></span>
<span class=linenos data-linenos="448 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="449 "></span><span class=sd>        a dictionary of pairs (node_id: status), where status indicates to the researcher</span>
<span class=linenos data-linenos="450 "></span><span class=sd>        that the training plan has been correctly downloaded on the node side.</span>
<span class=linenos data-linenos="451 "></span><span class=sd>        Warning: status does not mean that the training plan is approved, only that it has been added</span>
<span class=linenos data-linenos="452 "></span><span class=sd>        to the &quot;approval queue&quot; on the node side.</span>
<span class=linenos data-linenos="453 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="454 "></span>
<span class=linenos data-linenos="455 "></span>    <span class=n>training_plan_instance</span> <span class=o>=</span> <span class=n>training_plan</span>
<span class=linenos data-linenos="456 "></span>    <span class=n>training_plan_module</span> <span class=o>=</span> <span class=s1>&#39;model_&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="457 "></span>    <span class=k>with</span> <span class=n>tempfile</span><span class=o>.</span><span class=n>TemporaryDirectory</span><span class=p>(</span><span class=nb>dir</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;TMP_DIR&#39;</span><span class=p>])</span> <span class=k>as</span> <span class=n>tmp_dir</span><span class=p>:</span>
<span class=linenos data-linenos="458 "></span>        <span class=n>training_plan_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>tmp_dir</span><span class=p>,</span> <span class=n>training_plan_module</span> <span class=o>+</span> <span class=s1>&#39;.py&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="459 "></span>        <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="460 "></span>            <span class=n>training_plan_instance</span><span class=o>.</span><span class=n>save_code</span><span class=p>(</span><span class=n>training_plan_file</span><span class=p>)</span>
<span class=linenos data-linenos="461 "></span>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="462 "></span>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Cannot save the training plan to a local tmp dir : </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="463 "></span>            <span class=k>return</span> <span class=p>{}</span>
<span class=linenos data-linenos="464 "></span>
<span class=linenos data-linenos="465 "></span>        <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="466 "></span>            <span class=n>_</span><span class=p>,</span> <span class=n>training_plan_instance</span> <span class=o>=</span> <span class=n>import_class_object_from_file</span><span class=p>(</span>
<span class=linenos data-linenos="467 "></span>                <span class=n>training_plan_file</span><span class=p>,</span> <span class=n>training_plan</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
<span class=linenos data-linenos="468 "></span>            <span class=n>tp_source</span> <span class=o>=</span> <span class=n>training_plan_instance</span><span class=o>.</span><span class=n>source</span><span class=p>()</span>
<span class=linenos data-linenos="469 "></span>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="470 "></span>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Cannot instantiate the training plan: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="471 "></span>            <span class=k>return</span> <span class=p>{}</span>
<span class=linenos data-linenos="472 "></span>
<span class=linenos data-linenos="473 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="474 "></span>        <span class=n>minify</span><span class=p>(</span><span class=n>tp_source</span><span class=p>,</span>
<span class=linenos data-linenos="475 "></span>               <span class=n>remove_annotations</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=linenos data-linenos="476 "></span>               <span class=n>combine_imports</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=linenos data-linenos="477 "></span>               <span class=n>remove_pass</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=linenos data-linenos="478 "></span>               <span class=n>hoist_literals</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<span class=linenos data-linenos="479 "></span>               <span class=n>remove_object_base</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="480 "></span>               <span class=n>rename_locals</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=linenos data-linenos="481 "></span>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="482 "></span>        <span class=c1># minify does not provide any specific exception</span>
<span class=linenos data-linenos="483 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;This file is not a python file (</span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>)&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="484 "></span>        <span class=k>return</span> <span class=p>{}</span>
<span class=linenos data-linenos="485 "></span>    <span class=nb>print</span><span class=p>(</span><span class=n>tp_source</span><span class=p>)</span>
<span class=linenos data-linenos="486 "></span>    <span class=c1># send message to node(s)</span>
<span class=linenos data-linenos="487 "></span>    <span class=n>message</span> <span class=o>=</span> <span class=n>ApprovalRequest</span><span class=p>(</span>
<span class=linenos data-linenos="488 "></span>        <span class=n>researcher_id</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;RESEARCHER_ID&#39;</span><span class=p>],</span>
<span class=linenos data-linenos="489 "></span>        <span class=n>description</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>description</span><span class=p>),</span>
<span class=linenos data-linenos="490 "></span>        <span class=n>training_plan</span><span class=o>=</span><span class=n>tp_source</span><span class=p>)</span>
<span class=linenos data-linenos="491 "></span>
<span class=linenos data-linenos="492 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>nodes</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=n>policies</span><span class=p>)</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos="493 "></span>        <span class=n>errors</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>errors</span><span class=p>()</span>
<span class=linenos data-linenos="494 "></span>        <span class=n>replies</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span>
<span class=linenos data-linenos="495 "></span>        <span class=n>results</span> <span class=o>=</span> <span class=p>{</span><span class=n>req</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=kc>False</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>requests</span><span class=p>}</span>
<span class=linenos data-linenos="496 "></span>
<span class=linenos data-linenos="497 "></span>        <span class=c1># TODO: Loop over errors and replies</span>
<span class=linenos data-linenos="498 "></span>        <span class=k>for</span> <span class=n>node_id</span><span class=p>,</span> <span class=n>error</span> <span class=ow>in</span> <span class=n>errors</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="499 "></span>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Node (</span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2>) has returned error </span><span class=si>{</span><span class=n>error</span><span class=o>.</span><span class=n>errnum</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=n>error</span><span class=o>.</span><span class=n>extra_msg</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="500 "></span>
<span class=linenos data-linenos="501 "></span>    <span class=k>return</span> <span class=p>{</span><span class=nb>id</span><span class=p>:</span> <span class=n>rep</span><span class=o>.</span><span class=n>get_dict</span><span class=p>()</span> <span class=k>for</span> <span class=nb>id</span><span class=p>,</span> <span class=n>rep</span> <span class=ow>in</span> <span class=n>replies</span><span class=o>.</span><span class=n>items</span><span class=p>()}</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.StopOnDisconnect class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">StopOnDisconnect</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>StopOnDisconnect</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title="fedbiomed.researcher.requests._policies._ReplyTimeoutPolicy">_ReplyTimeoutPolicy</span></code></p> <p>Stops collecting results if a node disconnects</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>timeout</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code> </td> <td> <div class=doc-md-description> <p>maximum time for policy</p> </div> </td> <td> <code>5</code> </td> </tr> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code> </td> <td> <div class=doc-md-description> <p>optional list of nodes to apply the policy. By default applies to all known nodes of request.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="54 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="55 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Implements timeout attributes</span>
<span class=linenos data-linenos="56 "></span>
<span class=linenos data-linenos="57 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="58 "></span><span class=sd>        timeout: maximum time for policy</span>
<span class=linenos data-linenos="59 "></span><span class=sd>        nodes: optional list of nodes to apply the policy. By default applies to all known nodes of request.</span>
<span class=linenos data-linenos="60 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="61 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span>
<span class=linenos data-linenos="62 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
<span class=linenos data-linenos="63 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_time</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.StopOnDisconnect-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.StopOnDisconnect.continue_ class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">continue_</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>continue_</span><span class=p>(</span><span class=n>requests</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Continues federated request if nodes are not disconnect</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._status.PolicyStatus" href="#fedbiomed.researcher.requests.PolicyStatus">PolicyStatus</a></code> </td> <td> <div class=doc-md-description> <p>CONTINUE if no node disconnect found, STOPPED if some node disconnect found and timeout is reached</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="126 "></span><span class=k>def</span><span class=w> </span><span class=nf>continue_</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requests</span><span class=p>:</span> <span class=n>TRequest</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="127 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Continues federated request if nodes are not disconnect</span>
<span class=linenos data-linenos="128 "></span>
<span class=linenos data-linenos="129 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="130 "></span><span class=sd>        CONTINUE if no node disconnect found, STOPPED if some node disconnect found</span>
<span class=linenos data-linenos="131 "></span><span class=sd>            and timeout is reached</span>
<span class=linenos data-linenos="132 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="133 "></span>
<span class=linenos data-linenos="134 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="135 "></span>        <span class=n>requests</span> <span class=o>=</span> <span class=p>[</span><span class=n>req</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=n>requests</span> <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>]</span>
<span class=linenos data-linenos="136 "></span>
<span class=linenos data-linenos="137 "></span>    <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=n>requests</span><span class=p>:</span>
<span class=linenos data-linenos="138 "></span>        <span class=n>is_timeout</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_timeout</span><span class=p>()</span>
<span class=linenos data-linenos="139 "></span>        <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>RequestStatus</span><span class=o>.</span><span class=n>DISCONNECT</span> <span class=ow>and</span> <span class=n>is_timeout</span><span class=p>:</span>
<span class=linenos data-linenos="140 "></span>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>stop</span><span class=p>(</span><span class=n>req</span><span class=p>)</span>
<span class=linenos data-linenos="141 "></span>
<span class=linenos data-linenos="142 "></span>    <span class=k>return</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>CONTINUE</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.StopOnError class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">StopOnError</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>StopOnError</span><span class=p>(</span><span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._policies.RequestPolicy" href="#fedbiomed.researcher.requests.RequestPolicy">RequestPolicy</a></code></p> <p>Stops collecting results if a node returns an error</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="16 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos="17 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="18 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span> <span class=o>=</span> <span class=n>nodes</span>
<span class=linenos data-linenos="19 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>stop_caused_by</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.StopOnError-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.StopOnError.continue_ class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">continue_</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>continue_</span><span class=p>(</span><span class=n>requests</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Continues federated request if nodes does not return error</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._status.PolicyStatus" href="#fedbiomed.researcher.requests.PolicyStatus">PolicyStatus</a></code> </td> <td> <div class=doc-md-description> <p>CONTINUE if no error found, STOPPED if some error found</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="149 "></span><span class=k>def</span><span class=w> </span><span class=nf>continue_</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requests</span><span class=p>:</span> <span class=n>TRequest</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="150 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Continues federated request if nodes does not return error</span>
<span class=linenos data-linenos="151 "></span>
<span class=linenos data-linenos="152 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="153 "></span><span class=sd>        CONTINUE if no error found, STOPPED if some error found</span>
<span class=linenos data-linenos="154 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="155 "></span>
<span class=linenos data-linenos="156 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="157 "></span>        <span class=n>requests</span> <span class=o>=</span> <span class=p>[</span><span class=n>req</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=n>requests</span> <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>]</span>
<span class=linenos data-linenos="158 "></span>
<span class=linenos data-linenos="159 "></span>    <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=n>requests</span><span class=p>:</span>
<span class=linenos data-linenos="160 "></span>        <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>error</span><span class=p>:</span>
<span class=linenos data-linenos="161 "></span>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>stop</span><span class=p>(</span><span class=n>req</span><span class=p>)</span>
<span class=linenos data-linenos="162 "></span>
<span class=linenos data-linenos="163 "></span>    <span class=k>return</span> <span class=n>PolicyStatus</span><span class=o>.</span><span class=n>CONTINUE</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.requests.StopOnTimeout class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">StopOnTimeout</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>StopOnTimeout</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title="fedbiomed.researcher.requests._policies._ReplyTimeoutPolicy">_ReplyTimeoutPolicy</span></code></p> <p>Stops the request if nodes do not answer in given timeout</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>timeout</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code> </td> <td> <div class=doc-md-description> <p>maximum time for policy</p> </div> </td> <td> <code>5</code> </td> </tr> <tr class=doc-section-item> <td><code>nodes</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</code> </td> <td> <div class=doc-md-description> <p>optional list of nodes to apply the policy. By default applies to all known nodes of request.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="54 "></span><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="55 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Implements timeout attributes</span>
<span class=linenos data-linenos="56 "></span>
<span class=linenos data-linenos="57 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="58 "></span><span class=sd>        timeout: maximum time for policy</span>
<span class=linenos data-linenos="59 "></span><span class=sd>        nodes: optional list of nodes to apply the policy. By default applies to all known nodes of request.</span>
<span class=linenos data-linenos="60 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="61 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span>
<span class=linenos data-linenos="62 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
<span class=linenos data-linenos="63 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_time</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.requests.StopOnTimeout-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.requests.StopOnTimeout.continue_ class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">continue_</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>continue_</span><span class=p>(</span><span class=n>requests</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Continues federated request if nodes dont reach timeout</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests._status.PolicyStatus" href="#fedbiomed.researcher.requests.PolicyStatus">PolicyStatus</a></code> </td> <td> <div class=doc-md-description> <p>CONTINUE if no node reached timeout, STOPPED if some node reached timeout and timeout is reached</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/requests/_policies.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="112 "></span><span class=k>def</span><span class=w> </span><span class=nf>continue_</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requests</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PolicyStatus</span><span class=p>:</span>
<span class=linenos data-linenos="113 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Continues federated request if nodes dont reach timeout</span>
<span class=linenos data-linenos="114 "></span>
<span class=linenos data-linenos="115 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="116 "></span><span class=sd>        CONTINUE if no node reached timeout, STOPPED if some node reached timeout</span>
<span class=linenos data-linenos="117 "></span><span class=sd>            and timeout is reached</span>
<span class=linenos data-linenos="118 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="119 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>requests</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests-classes class=md-nav__link> Classes </a> <nav class=toc-nav aria-label=Classes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.DiscardOnTimeout class=md-nav__link> DiscardOnTimeout </a> <nav class=toc-nav aria-label=DiscardOnTimeout> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.DiscardOnTimeout-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.DiscardOnTimeout.continue_ class=md-nav__link> continue_ </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest class=md-nav__link> FederatedRequest </a> <nav class=toc-nav aria-label=FederatedRequest> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest.policy class=md-nav__link> policy </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest.requests class=md-nav__link> requests </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest.disconnected_requests class=md-nav__link> disconnected_requests </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest.errors class=md-nav__link> errors </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest.replies class=md-nav__link> replies </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest.send class=md-nav__link> send </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.FederatedRequest.wait class=md-nav__link> wait </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.MessagesByNode class=md-nav__link> MessagesByNode </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyController class=md-nav__link> PolicyController </a> <nav class=toc-nav aria-label=PolicyController> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyController-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyController.continue_all class=md-nav__link> continue_all </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyController.has_stopped_any class=md-nav__link> has_stopped_any </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyController.report class=md-nav__link> report </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyStatus class=md-nav__link> PolicyStatus </a> <nav class=toc-nav aria-label=PolicyStatus> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyStatus-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyStatus.COMPLETED class=md-nav__link> COMPLETED </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyStatus.CONTINUE class=md-nav__link> CONTINUE </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.PolicyStatus.STOPPED class=md-nav__link> STOPPED </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request class=md-nav__link> Request </a> <nav class=toc-nav aria-label=Request> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.error class=md-nav__link> error </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.node class=md-nav__link> node </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.reply class=md-nav__link> reply </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.status class=md-nav__link> status </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.flush class=md-nav__link> flush </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.has_finished class=md-nav__link> has_finished </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.on_reply class=md-nav__link> on_reply </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Request.send class=md-nav__link> send </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy class=md-nav__link> RequestPolicy </a> <nav class=toc-nav aria-label=RequestPolicy> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy.status class=md-nav__link> status </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy.stop_caused_by class=md-nav__link> stop_caused_by </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy.completed class=md-nav__link> completed </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy.continue_ class=md-nav__link> continue_ </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy.keep class=md-nav__link> keep </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestPolicy.stop class=md-nav__link> stop </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestStatus class=md-nav__link> RequestStatus </a> <nav class=toc-nav aria-label=RequestStatus> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestStatus-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestStatus.DISCONNECT class=md-nav__link> DISCONNECT </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestStatus.ERROR class=md-nav__link> ERROR </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestStatus.NO_REPLY_YET class=md-nav__link> NO_REPLY_YET </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestStatus.SUCCESS class=md-nav__link> SUCCESS </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.RequestStatus.TIMEOUT class=md-nav__link> TIMEOUT </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests class=md-nav__link> Requests </a> <nav class=toc-nav aria-label=Requests> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.add_monitor_callback class=md-nav__link> add_monitor_callback </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.list class=md-nav__link> list </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.on_message class=md-nav__link> on_message </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.ping_nodes class=md-nav__link> ping_nodes </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.print_node_log_message class=md-nav__link> print_node_log_message </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.remove_monitor_callback class=md-nav__link> remove_monitor_callback </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.search class=md-nav__link> search </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.send class=md-nav__link> send </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.start_messaging class=md-nav__link> start_messaging </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.Requests.training_plan_approve class=md-nav__link> training_plan_approve </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnDisconnect class=md-nav__link> StopOnDisconnect </a> <nav class=toc-nav aria-label=StopOnDisconnect> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnDisconnect-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnDisconnect.continue_ class=md-nav__link> continue_ </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnError class=md-nav__link> StopOnError </a> <nav class=toc-nav aria-label=StopOnError> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnError-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnError.continue_ class=md-nav__link> continue_ </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnTimeout class=md-nav__link> StopOnTimeout </a> <nav class=toc-nav aria-label=StopOnTimeout> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnTimeout-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.requests.StopOnTimeout.continue_ class=md-nav__link> continue_ </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed  2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../../assets/javascript/lunr.js></script> <script src=../../../../assets/javascript/theme.js></script> </body> </html>