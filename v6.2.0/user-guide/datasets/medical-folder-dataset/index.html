<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../../versions.json";
      const search_worker_js = "../../../assets/javascript/search-worker.js";
      const search_index_json = "../../../search/search_index.json";
      const base_url = '../../..';
    </script><!-- Site title --><title>Medical Datasets - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../../..>Home</a> </li> <li class> <a href=../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../#funding>Funding</a> </li> <li class> <a href=../../../news/ >News</a> </li> <li class> <a href=../../../#contributors>Contributors</a> </li> <li class> <a href=../../../#users>Users</a> </li> <li class> <a href=../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../#citation>How to Cite Us</a> </li> <li class> <a href=../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../../ > <img src=../../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../../assets/img/menu.svg> <img class=close style=display:none src=../../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../../..>Home</a> </li> <li class> <a href=../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../#funding>Funding</a> </li> <li class> <a href=../../../news/ >News</a> </li> <li class> <a href=../../../#contributors>Contributors</a> </li> <li class> <a href=../../../#users>Users</a> </li> <li class> <a href=../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../#citation>How to Cite Us</a> </li> <li class> <a href=../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> <li class> <a href=../../../getting-started/installation/ class>Installation</a> </li> <li class> <a href=../../../getting-started/basic-example/ class>Basic Example</a> </li> <li class> <a href=../../../getting-started/configuration/ class>Configuration</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../../tutorials/pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../../tutorials/pytorch/05_Transfer-learning_tutorial_usingDenseNet-121/ class>Transfer-learning in Fed-BioMed tutorial</a> </li> <li class> <a href=../../../tutorials/pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/flamby/ class>Introduction</a> </li> <li class> <a href=../../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../../../tutorials/concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../../glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Datasets <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../ class>Introduction</a> </li> <li class> <a href=../default-datasets/ class>Default Datasets</a> </li> <li class> <a href=../image-dataset/ class>Image Datasets</a> </li> <li class> <a href=../tabular-dataset/ class>Tabular Datasets</a> </li> <li class=current> <a href=./ class="link current">Medical Datasets</a> </li> <li class> <a href=../custom-dataset/ class>Adding your Custom Dataset</a> </li> <li class> <a href=../native-dataset/ class>Adding a Native Dataset</a> </li> <li class> <a href=../applying-transformations/ class>Applying Transformations</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../developer/api/common/certificate_manager/ class>Certificate Manager</a> </li> <li class> <a href=../../../developer/api/common/cli/ class>CLI</a> </li> <li class> <a href=../../../developer/api/common/config/ class>Config</a> </li> <li class> <a href=../../../developer/api/common/constants/ class>Constants</a> </li> <li class> <a class href=../../../developer/api/common/data.md>Data</a> </li> <li class> <a href=../../../developer/api/common/db/ class>DB</a> </li> <li class> <a href=../../../developer/api/common/exceptions/ class>Exceptions</a> </li> <li class> <a href=../../../developer/api/common/ipython/ class>IPython</a> </li> <li class> <a href=../../../developer/api/common/json/ class>Json</a> </li> <li class> <a href=../../../developer/api/common/logger/ class>Logger</a> </li> <li class> <a href=../../../developer/api/common/message/ class>Message</a> </li> <li class> <a href=../../../developer/api/common/metrics/ class>Metrics</a> </li> <li class> <a href=../../../developer/api/common/models/ class>Model</a> </li> <li class> <a class href=../../../developer/api/common/mpc_controller.md>MPC controller</a> </li> <li class> <a href=../../../developer/api/common/optimizers/ class>Optimizers</a> </li> <li class> <a href=../../../developer/api/common/privacy/ class>Privacy</a> </li> <li class> <a href=../../../developer/api/common/secagg/ class>Secagg</a> </li> <li class> <a href=../../../developer/api/common/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../../developer/api/common/serializer/ class>Serializer</a> </li> <li class> <a href=../../../developer/api/common/singleton/ class>Singleton</a> </li> <li class> <a href=../../../developer/api/common/synchro/ class>Synchro</a> </li> <li class> <a href=../../../developer/api/common/tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../../../developer/api/common/training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../../../developer/api/common/training_args/ class>TrainingArgs</a> </li> <li class> <a href=../../../developer/api/common/utils/ class>Utils</a> </li> <li class> <a href=../../../developer/api/common/validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../developer/api/node/cli/ class>CLI</a> </li> <li class> <a href=../../../developer/api/node/cli_utils/ class>CLI Utils</a> </li> <li class> <a href=../../../developer/api/node/config/ class>Config</a> </li> <li class> <a href=../../../developer/api/node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../../developer/api/node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../../developer/api/node/node/ class>Node</a> </li> <li class> <a href=../../../developer/api/node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../../developer/api/node/requests/ class>Requests</a> </li> <li class> <a href=../../../developer/api/node/round/ class>Round</a> </li> <li class> <a href=../../../developer/api/node/secagg/ class>Secagg</a> </li> <li class> <a href=../../../developer/api/node/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../../developer/api/node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../developer/api/researcher/aggregators/ class>Aggregators</a> </li> <li class> <a href=../../../developer/api/researcher/cli/ class>CLI</a> </li> <li class> <a href=../../../developer/api/researcher/config/ class>Config</a> </li> <li class> <a href=../../../developer/api/researcher/datasets/ class>Datasets</a> </li> <li class> <a href=../../../developer/api/researcher/federated_workflows/ class>Federated Workflows</a> </li> <li class> <a href=../../../developer/api/researcher/filetools/ class>Filetools</a> </li> <li class> <a href=../../../developer/api/researcher/jobs/ class>Jobs</a> </li> <li class> <a href=../../../developer/api/researcher/monitor/ class>Monitor</a> </li> <li class> <a href=../../../developer/api/researcher/node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../../../developer/api/researcher/requests/ class>Requests</a> </li> <li class> <a href=../../../developer/api/researcher/secagg/ class>Secagg</a> </li> <li class> <a href=../../../developer/api/researcher/strategies/ class>Strategies</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Transport <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../developer/api/transport/client/ class>Client</a> </li> <li class> <a href=../../../developer/api/transport/controller/ class>Controller</a> </li> <li class> <a href=../../../developer/api/transport/node_agent/ class>NodeAgent</a> </li> <li class> <a href=../../../developer/api/transport/server/ class>Server</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../../developer/usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../../developer/ci/ class>Continuous Integration</a> </li> <li class> <a href=../../../developer/definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../../developer/development-environment/ class>Development Environment</a> </li> <li class> <a href=../../../developer/testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../../developer/messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> <li class> <a href=../../../support/troubleshooting/ class>FAQ & Troubleshooting</a> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <article> <h1 id=medical-folder-dataset>Medical Folder Dataset</h1> <h2 id=introduction>Introduction</h2> <p><code>MedicalFolderDataset</code> handles medical imaging data in structured folder hierarchies. It supports multi-modal medical data in NIfTI format (.nii, .nii.gz) with optional demographic/clinical information from CSV files, ideal for medical imaging research in federated environments.</p> <h2 id=key-features>Key Features</h2> <ul> <li>Structured medical data: <code>root/subject/modality/file.nii.gz</code></li> <li>Multi-modal support (T1, T2, FLAIR, DWI, etc.)</li> <li>NIfTI format (.nii, .nii.gz)</li> <li>Demographics integration from CSV that matches patient folders by 'subject ID column'.</li> <li>Data Loading Plans (DLP) for cross-site compatibility</li> <li>Framework compatibility (PyTorch and scikit-learn)</li> <li>Per-modality and global transformations</li> </ul> <h2 id=required-folder-structure>Required Folder Structure</h2> <p>Data must follow this exact structure: <code>root/subject/modality/file</code></p> <div class=highlight><pre><span></span><code>root/
├── subject-01/
│   ├── T1/
│   │   └── subject-01_T1.nii.gz
│   ├── T2/
│   │   └── subject-01_T2.nii.gz
│   └── FLAIR/
│       └── subject-01_FLAIR.nii.gz
├── subject-02/
│   └── ...
└── demographics.csv (optional)
</code></pre></div> <p><strong>Structural Requirements:</strong></p> <ul> <li><strong>Root directory</strong>: Contains subject subdirectories and optional demographics file</li> <li><strong>Subject level</strong>: Each folder in root correspond to a potential subject (e.g., <code>subject-01</code>, <code>patient_123</code>, <code>P001</code>)</li> <li><strong>Modality level</strong>: Each modality has its own folder within the subject directory (e.g., <code>T1</code>, <code>T2</code>). Modality folder names should be identical across all subjects.</li> <li><strong>File level</strong>: Each modality folder contains exactly <strong>one</strong> NIfTI file (<code>.nii</code> or <code>.nii.gz</code>)</li> </ul> <div class="admonition warning"> <p class=admonition-title>Important</p> <p>Must be exactly 3 levels deep. Files at wrong levels are ignored.</p> </div> <div class="admonition note"> <p class=admonition-title>Flexibility</p> <p>Use Data Loading Plans (DLP) to map different folder names (like <code>T1_MPRAGE</code>, <code>T1w</code>) to the same modality. See <a href=#data-loading-plans-dlp>Data Loading Plans section</a> for more details.</p> </div> <h3 id=data-preparation-guidelines>Data Preparation Guidelines</h3> <p>Follow these steps to prepare your medical imaging dataset for Fed-BioMed:</p> <p><strong>Organize folder hierarchy</strong></p> <ul> <li>Create a root directory that will contain all subject data</li> <li>Each subject must have its own subdirectory</li> <li>Within each subject directory, create modality-specific subdirectories</li> </ul> <p><strong>Place NIfTI files correctly</strong></p> <ul> <li>Each modality folder should contain exactly one NIfTI file per subject</li> <li>Files must have either <code>.nii</code> or <code>.nii.gz</code> extension</li> <li>Avoid placing files directly in subject folders or the root directory</li> </ul> <p><strong>Ensure modality consistency</strong></p> <ul> <li>Modality names must be identical across subjects (case-sensitive) unless using Data Loading Plans (DLP). </li> <li>If using DLP to map multiple folder names to a single modality, ensure no subject has multiple folders that map to the same final modality.</li> <li>Check that each required modality is present for all subjects. Subjects with missing modalities will be ignored.</li> </ul> <p><strong>Prepare demographics file (optional)</strong></p> <ul> <li>Create a CSV file with subject-level information</li> <li>There must exist a column that matches your subject folder names</li> <li>Include relevant clinical variables and keep sensitive information de-identified and compliant with privacy regulations</li> </ul> <h2 id=deployment>Deployment</h2> <h3 id=node-side>Node-Side</h3> <p>Medical imaging datasets can be registered on nodes using either the command-line interface (CLI) or the graphical user interface (GUI).</p> <p><strong>Command-Line Interface</strong></p> <p>Register using the Fed-BioMed node CLI:</p> <div class=highlight><pre><span></span><code>fedbiomed<span class=w> </span>node<span class=w> </span>dataset<span class=w> </span>add
<span class=c1># 1. Select &quot;medical-folder&quot;</span>
<span class=c1># 2. Path: /path/to/medical_data/</span>
<span class=c1># 3. a. Demographics file (optional): /path/to/demographics.csv</span>
<span class=c1>#    b. Index column (optional): &#39;colum_subject_id&#39;</span>
<span class=c1># 4. Unique tags and description</span>
</code></pre></div> <p><strong>Graphical User Interface</strong></p> <p>Alternatively, datasets can be added through the Fed-BioMed Node GUI, which provides a user-friendly web interface:</p> <p><strong>1. Start the Node GUI</strong></p> <p><div class=highlight><pre><span></span><code>fedbiomed<span class=w> </span>node<span class=w> </span>gui<span class=w> </span>start
</code></pre></div> Access the GUI at <code>http://localhost:8484</code> (default login: <code>admin@fedbiomed.gui</code> / <code>admin</code>)</p> <p><strong>2. Add Dataset</strong></p> <ul> <li>Navigate to the dataset management section</li> <li>Select "medical-folder" as the dataset type</li> <li>Provide the path to your medical imaging data</li> <li>Optionally specify demographics file and index column</li> <li>Add descriptive tags and description</li> <li>Add DLP (mapping of folders to modalities)</li> <li>Save the dataset configuration</li> </ul> <p><strong>Note</strong>: The Node GUI requires additional dependencies. Install them with: <div class=highlight><pre><span></span><code>pip<span class=w> </span>install<span class=w> </span>fedbiomed<span class=o>[</span>gui<span class=o>]</span>
</code></pre></div> - See <a href=../../nodes/node-gui/ >Node GUI documentation</a> for complete setup and usage details. - See <a href=../../nodes/deploying-datasets/ >Deploying Datasets</a> for comprehensive deployment instructions.</p> <h3 id=researcher-side>Researcher-Side</h3> <p>Access medical imaging datasets through <a href=../../researcher/experiment/ >experiment configuration</a>:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>fedbiomed.researcher.experiment</span> <span class=kn>import</span> <span class=n>Experiment</span>

<span class=c1># Select nodes with multi-modal brain imaging datasets</span>
<span class=n>experiment</span> <span class=o>=</span> <span class=n>Experiment</span><span class=p>(</span>
    <span class=n>tags</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;#medical&#39;</span><span class=p>,</span> <span class=s1>&#39;#neuroimaging&#39;</span><span class=p>,</span> <span class=s1>&#39;#brain&#39;</span><span class=p>,</span> <span class=s1>&#39;#multimodal&#39;</span><span class=p>],</span>
    <span class=n>model</span><span class=o>=</span><span class=n>my_medical_model</span><span class=p>,</span>
    <span class=n>training_plan_class</span><span class=o>=</span><span class=n>MedicalImagingPlan</span><span class=p>,</span>
    <span class=n>training_args</span><span class=o>=</span><span class=n>training_args</span>
<span class=p>)</span>
</code></pre></div> <h2 id=data-loading-plans-dlp>Data Loading Plans (DLP)</h2> <p>Data Loading Plans solve the common challenge of varying modality folder naming conventions. They provide a standardized way to map different folder names to unified modality names. DLP operates at the <strong>node level</strong> - each node configures its own mapping based on its local folder structure. When researchers query datasets, they see the standardized modality names (the mapping target names) rather than the original folder names. This abstraction allows researchers to write consistent training plans while nodes handle their specific naming variations automatically.</p> <h3 id=motivation>Motivation</h3> <p>In medical imaging, different clinical centers, time periods, or protocols often use different naming conventions for the same imaging modalities. For example:</p> <ul> <li>Site A uses <code>T1_MPRAGE</code>, Site B uses <code>T1w</code>, Site C uses <code>T1_weighted</code></li> <li>Within a single site: older scans use <code>T1_MPRAGE</code>, newer scans use <code>T1w</code></li> <li>All represent the same T1-weighted MRI modality but have different folder names</li> </ul> <h3 id=how-dlp-works>How DLP Works</h3> <p>DLP creates a mapping that translates various folder names to standardized modality names. When you define that <code>T1_MPRAGE</code>, <code>T1w</code>, and <code>T1_weighted</code> all map to <code>T1</code>, the system treats them as the same modality type.</p> <p>This mapping works both <strong>across different nodes</strong> (different clinical sites) and <strong>within a single node</strong> (different acquisitions or time periods at the same site).</p> <p><strong>Directory Structure Examples:</strong></p> <ul> <li> <p>Scenario 1: Cross-Site Variation (Different Nodes): <div class=highlight><pre><span></span><code>Site A:                    Site B:
root/                      root/
├── subject-01/            ├── patient-01/
│   ├── T1_MPRAGE/         │   ├── T1w/
│   └── T2_FLAIR/          │   └── T2w/
└── subject-02/...         └── patient-02/...
</code></pre></div></p> </li> <li> <p>Scenario 2: Within-Site Variation (Single Node): <div class=highlight><pre><span></span><code>Single Site with Mixed Naming Conventions:
root/
├── subject-01/        # Scanned with old protocol
│   ├── T1_MPRAGE/
│   └── T2_FLAIR/
├── subject-02/        # Scanned with updated protocol  
│   ├── T1w/
│   └── T2w/
├── subject-03/        # Scanned with new naming convention
│   ├── T1_weighted/
│   └── T2_weighted/
└── subject-04/        # Back to standardized naming
    ├── T1_MPRAGE/
    └── T2_FLAIR/
</code></pre></div></p> </li> </ul> <p><strong>After DLP Mapping (Unified View):</strong></p> <p>Both scenarios result in standardized modality names. Same unified modality name regardless of original folder name: <div class=highlight><pre><span></span><code>root/
├── subject-01/
│   ├── T1/     # Maps from any T1 variant
│   └── T2/     # Maps from any T2 variant
└── ...
</code></pre></div></p> <h3 id=constraints-and-error-conditions>Constraints and Error Conditions</h3> <p><strong>✅ Valid Scenarios:</strong></p> <ul> <li>Subject has <code>T1_MPRAGE/</code> folder (maps to <code>T1</code>) ✓</li> <li>Different subjects use different folder names that map to the same final modality ✓</li> <li>Subject has some modalities missing → subject will be <strong>ignored</strong> (not an error) ✓</li> <li>Subject has <code>T1_MPRAGE/</code> folder but it's empty → folder will be <strong>ignored</strong> (not an error) ✓</li> <li>Subject has <code>T1_MPRAGE/</code> folder with non-NIfTI files → folder will be <strong>ignored</strong> (not an error) ✓</li> </ul> <p><strong>❌ Error Scenario:</strong></p> <ul> <li>Subject has both <code>T1_MPRAGE/</code> and <code>T1w/</code> folders (both map to <code>T1</code>)</li> <li>Each subject must have <strong>exactly one folder</strong> that maps to each final modality name</li> <li>One file per subject per final modality</li> </ul> <p><strong>Subject Inclusion Logic</strong></p> <p>When using DLP, the system applies the following logic to determine which subjects to include:</p> <ul> <li><strong>Complete subjects</strong>: Have all required modalities after mapping → <strong>Included</strong></li> <li><strong>Incomplete subjects</strong>: Missing one or more required modalities → <strong>Automatically ignored</strong></li> <li><strong>Ambiguous subjects</strong>: Have multiple folders mapping to the same final modality → <strong>Error (dataset fails to load)</strong></li> </ul> <p>Example with T1 and T2 requirements:</p> <ul> <li>Subject-01: has <code>T1_MPRAGE/</code> and <code>T2_FLAIR/</code> → <strong>Included</strong> (both T1 and T2 available)</li> <li>Subject-02: has only <code>T1w/</code> → <strong>Ignored</strong> (missing T2)</li> <li>Subject-03: has <code>T1_MPRAGE/</code> and empty <code>T2w/</code> folder → <strong>Ignored</strong> (T2 folder invalid)</li> <li>Subject-04: has both <code>T1_MPRAGE/</code> and <code>T1w/</code> → <strong>Error</strong> (ambiguous T1 mapping)</li> </ul> <h2 id=samples-structure>Samples Structure</h2> <p>Once your medical imaging dataset is registered, you need to understand how to configure and access the data in your training plans. This section explains how to query available modalities and specify which modalities to use for training and targets.</p> <h3 id=available-modalities>Available Modalities</h3> <p>After adding a dataset, you can check what modalities are available, querying the datasets available.</p> <ul> <li> <p>From the node side: <div class=highlight><pre><span></span><code>fedbiomed<span class=w> </span>node<span class=w> </span>dataset<span class=w> </span>list
</code></pre></div></p> </li> <li> <p>From the researcher side: <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>fedbiomed.researcher.requests</span> <span class=kn>import</span> <span class=n>Requests</span>
<span class=kn>from</span> <span class=nn>fedbiomed.researcher.config</span> <span class=kn>import</span> <span class=n>config</span>

<span class=n>req</span> <span class=o>=</span> <span class=n>Requests</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
<span class=n>datasets</span> <span class=o>=</span> <span class=n>req</span><span class=o>.</span><span class=n>list</span><span class=p>(</span><span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div></p> </li> </ul> <p>Both commands show all registered datasets with their available modalities. The modalities listed are the names you should use when specifying <code>data_modalities</code> and <code>target_modalities</code> in your dataset configuration.</p> <p><strong>What You Get</strong></p> <p>Accessing <code>dataset[index]</code> returns <code>(data, target)</code>:</p> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s1>&#39;T1&#39;</span><span class=p>:</span> <span class=n>torch</span><span class=o>.</span><span class=n>Tensor</span><span class=p>([</span><span class=mi>256</span><span class=p>,</span> <span class=mi>256</span><span class=p>,</span> <span class=mi>180</span><span class=p>]),</span>      <span class=c1># Brain scan data</span>
    <span class=s1>&#39;T2&#39;</span><span class=p>:</span> <span class=n>torch</span><span class=o>.</span><span class=n>Tensor</span><span class=p>([</span><span class=mi>256</span><span class=p>,</span> <span class=mi>256</span><span class=p>,</span> <span class=mi>180</span><span class=p>]),</span>      <span class=c1># Brain scan data</span>
    <span class=s1>&#39;demographics&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;age&#39;</span><span class=p>:</span> <span class=mi>45</span><span class=p>,</span> <span class=s1>&#39;gender&#39;</span><span class=p>:</span> <span class=s1>&#39;M&#39;</span><span class=p>}</span> <span class=c1># Optional patient info</span>
<span class=p>}</span>
<span class=n>target</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;label&#39;</span><span class=p>:</span> <span class=n>torch</span><span class=o>.</span><span class=n>Tensor</span><span class=p>([</span><span class=mi>256</span><span class=p>,</span> <span class=mi>256</span><span class=p>,</span> <span class=mi>180</span><span class=p>])}</span>  <span class=c1># Optional target data</span>
</code></pre></div> <p><strong>How to Configure Modalities</strong></p> <p><code>MedicalFolderDataset</code> allows you to specify which modalities to use for data and which for targets:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>fedbiomed.common.dataset</span> <span class=kn>import</span> <span class=n>MedicalFolderDataset</span>

<span class=n>dataset</span> <span class=o>=</span> <span class=n>MedicalFolderDataset</span><span class=p>(</span>
    <span class=n>data_modalities</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;T1&#39;</span><span class=p>,</span> <span class=s1>&#39;T2&#39;</span><span class=p>],</span>
    <span class=n>target_modalities</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;label&#39;</span><span class=p>],</span>
<span class=p>)</span>

<span class=c1># Use multiple modalities for data, no specific target</span>
<span class=n>dataset</span> <span class=o>=</span> <span class=n>MedicalFolderDataset</span><span class=p>(</span>
    <span class=n>data_modalities</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;T1&#39;</span><span class=p>,</span> <span class=s1>&#39;T2&#39;</span><span class=p>,</span> <span class=s1>&#39;FLAIR&#39;</span><span class=p>,</span> <span class=s1>&#39;DWI&#39;</span><span class=p>],</span>
    <span class=n>target_modalities</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>)</span>
</code></pre></div> <h3 id=basic-usage-examples>Basic Usage Examples</h3> <ul> <li> <p>Single Modality Dataset: <div class=highlight><pre><span></span><code><span class=c1># Simple T1-weighted MRI dataset</span>
<span class=n>dataset</span> <span class=o>=</span> <span class=n>MedicalFolderDataset</span><span class=p>(</span>
    <span class=n>data_modalities</span><span class=o>=</span><span class=s1>&#39;T1&#39;</span><span class=p>,</span>
    <span class=n>target_modalities</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>)</span>
</code></pre></div></p> </li> <li> <p>Multi-Modal Analysis: <div class=highlight><pre><span></span><code><span class=c1># Multi-modal brain tumor segmentation</span>
<span class=n>dataset</span> <span class=o>=</span> <span class=n>MedicalFolderDataset</span><span class=p>(</span>
    <span class=n>data_modalities</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;T1&#39;</span><span class=p>,</span> <span class=s1>&#39;T2&#39;</span><span class=p>],</span>
    <span class=n>target_modalities</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;label&#39;</span><span class=p>],</span>  <span class=c1># Segmentation mask as target</span>
    <span class=o>...</span>
<span class=p>)</span>
</code></pre></div></p> </li> </ul> <h3 id=transforms-example>Transforms Example</h3> <p>Medical datasets support sophisticated transformation systems tailored for medical imaging workflows:</p> <p><strong>Per-Modality Medical Transform</strong> <div class=highlight><pre><span></span><code>    <span class=c1># Example inside a TorchTrainingPlan:</span>
    <span class=o>...</span>
    <span class=k>def</span> <span class=nf>training_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=o>...</span>
        <span class=k>def</span> <span class=nf>demographics_transform</span><span class=p>(</span><span class=n>demographics</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
        <span class=c1># concatenates values by keys ordered alphabetically</span>
        <span class=k>return</span> <span class=n>torch</span><span class=o>.</span><span class=n>cat</span><span class=p>([</span><span class=n>torch</span><span class=o>.</span><span class=n>as_tensor</span><span class=p>(</span><span class=n>d</span><span class=p>[</span><span class=n>k</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>torch</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span><span class=o>.</span><span class=n>flatten</span><span class=p>()</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>d</span><span class=p>)])</span>

        <span class=n>training_transform</span> <span class=o>=</span> <span class=n>Compose</span><span class=p>([</span>
            <span class=n>EnsureChannelFirst</span><span class=p>(</span><span class=n>channel_dim</span><span class=o>=</span><span class=s2>&quot;no_channel&quot;</span><span class=p>),</span>
            <span class=n>Resize</span><span class=p>(</span><span class=n>common_shape</span><span class=p>),</span> <span class=n>NormalizeIntensity</span><span class=p>(),</span>
        <span class=p>])</span>

        <span class=n>target_transform</span> <span class=o>=</span> <span class=n>Compose</span><span class=p>([</span>
            <span class=n>EnsureChannelFirst</span><span class=p>(</span><span class=n>channel_dim</span><span class=o>=</span><span class=s2>&quot;no_channel&quot;</span><span class=p>),</span>
            <span class=n>Resize</span><span class=p>(</span><span class=n>common_shape</span><span class=p>),</span>
            <span class=n>AsDiscrete</span><span class=p>(</span><span class=n>to_onehot</span><span class=o>=</span><span class=mi>2</span><span class=p>),</span>
        <span class=p>])</span>

        <span class=n>dataset</span> <span class=o>=</span> <span class=n>MedicalFolderDataset</span><span class=p>(</span>
            <span class=n>data_modalities</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;T1&#39;</span><span class=p>,</span> <span class=s1>&#39;demographics&#39;</span><span class=p>],</span>
            <span class=n>target_modalities</span><span class=o>=</span><span class=s1>&#39;label&#39;</span><span class=p>,</span>
            <span class=n>transform</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;T1&#39;</span><span class=p>:</span> <span class=n>training_transform</span><span class=p>,</span> <span class=s1>&#39;demographics&#39;</span><span class=p>:</span> <span class=n>demographics_transform</span><span class=p>},</span>
            <span class=n>target_transform</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;label&#39;</span><span class=p>:</span> <span class=n>target_transform</span> <span class=p>},</span>
        <span class=p>)</span>

        <span class=k>return</span> <span class=n>DataManager</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=o>**</span><span class=n>loader_args</span><span class=p>)</span>
    <span class=o>...</span>
</code></pre></div></p> <p>For comprehensive transformation documentation, see <a href=../applying-transformations/ >Applying Transformations</a>.</p> <h2 id=error-handling-and-validation>Error Handling and Validation</h2> <p>The dataset provides comprehensive error handling:</p> <ul> <li><strong>Folder structure validation</strong>: Ensures the required <code>subject/modality/file</code> structure</li> <li><strong>File format validation</strong>: Checks for valid NIfTI files (.nii, .nii.gz)</li> <li><strong>Modality consistency</strong>: Validates that all subjects have the required modalities</li> <li><strong>Demographics matching</strong>: Ensures demographic data matches available subjects</li> <li><strong>Transform validation</strong>: Validates transform compatibility with specified modalities</li> </ul> <h2 id=best-practices>Best Practices</h2> <p>Cross-Site Federated Deployment</p> <ul> <li><strong>Use Data Loading Plans</strong>: Handle modality naming variations across different clinical sites</li> <li><strong>Standardize preprocessing</strong>: Ensure consistent image preprocessing across all nodes</li> <li><strong>Consider scanner differences</strong>: Account for variations in MRI scanners and acquisition protocols</li> </ul> <p>Performance and Memory Management</p> <ul> <li><strong>Optimize batch sizes</strong>: Medical images are large; use appropriate batch sizes (typically 1-4)</li> <li><strong>Efficient transforms</strong>: Implement preprocessing efficiently to avoid memory bottlenecks</li> <li><strong>Consider resolution</strong>: Balance image resolution with computational constraints</li> </ul> <p>Clinical Considerations</p> <ul> <li><strong>Privacy compliance</strong>: Ensure all medical data handling complies with regulations</li> <li><strong>De-identification</strong>: Verify that all patient identifiers are properly removed</li> </ul> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#key-features class=md-nav__link> Key Features </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#required-folder-structure class=md-nav__link> Required Folder Structure </a> <nav class=toc-nav aria-label="Required Folder Structure"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#data-preparation-guidelines class=md-nav__link> Data Preparation Guidelines </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#deployment class=md-nav__link> Deployment </a> <nav class=toc-nav aria-label=Deployment> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#node-side class=md-nav__link> Node-Side </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#researcher-side class=md-nav__link> Researcher-Side </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#data-loading-plans-dlp class=md-nav__link> Data Loading Plans (DLP) </a> <nav class=toc-nav aria-label="Data Loading Plans (DLP)"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#motivation class=md-nav__link> Motivation </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#how-dlp-works class=md-nav__link> How DLP Works </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#constraints-and-error-conditions class=md-nav__link> Constraints and Error Conditions </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#samples-structure class=md-nav__link> Samples Structure </a> <nav class=toc-nav aria-label="Samples Structure"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#available-modalities class=md-nav__link> Available Modalities </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#basic-usage-examples class=md-nav__link> Basic Usage Examples </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#transforms-example class=md-nav__link> Transforms Example </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#error-handling-and-validation class=md-nav__link> Error Handling and Validation </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#best-practices class=md-nav__link> Best Practices </a> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed © 2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../assets/javascript/lunr.js></script> <script src=../../../assets/javascript/theme.js></script> <!-- GitHub buttons --> <script async defer src=https://buttons.github.io/buttons.js></script> </body> </html>