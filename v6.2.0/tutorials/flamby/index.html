<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../versions.json";
      const search_worker_js = "../../assets/javascript/search-worker.js";
      const search_index_json = "../../search/search_index.json";
      const base_url = '../..';
    </script><!-- Site title --><title>Introduction - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../assets/_mkdocstrings.css rel=stylesheet><link href=../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../..>Home</a> </li> <li class> <a href=../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../#funding>Funding</a> </li> <li class> <a href=../../news/ >News</a> </li> <li class> <a href=../../#contributors>Contributors</a> </li> <li class> <a href=../../#users>Users</a> </li> <li class> <a href=../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../#citation>How to Cite Us</a> </li> <li class> <a href=../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../ > <img src=../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../assets/img/menu.svg> <img class=close style=display:none src=../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../..>Home</a> </li> <li class> <a href=../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../#funding>Funding</a> </li> <li class> <a href=../../news/ >News</a> </li> <li class> <a href=../../#contributors>Contributors</a> </li> <li class> <a href=../../#users>Users</a> </li> <li class> <a href=../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../#citation>How to Cite Us</a> </li> <li class> <a href=../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> <li class> <a href=../../getting-started/installation/ class>Installation</a> </li> <li class> <a href=../../getting-started/basic-example/ class>Basic Example</a> </li> <li class> <a href=../../getting-started/configuration/ class>Configuration</a> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../pytorch/05_Transfer-learning_tutorial_usingDenseNet-121/ class>Transfer-learning in Fed-BioMed tutorial</a> </li> <li class> <a href=../pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class=current> <a href=./ class="link current">Introduction</a> </li> <li class> <a href=flamby-integration-into-fedbiomed/ class>FLamby in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Datasets <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/datasets/ class>Introduction</a> </li> <li class> <a href=../../user-guide/datasets/default-datasets/ class>Default Datasets</a> </li> <li class> <a href=../../user-guide/datasets/image-dataset/ class>Image Datasets</a> </li> <li class> <a href=../../user-guide/datasets/tabular-dataset/ class>Tabular Datasets</a> </li> <li class> <a href=../../user-guide/datasets/medical-folder-dataset/ class>Medical Datasets</a> </li> <li class> <a href=../../user-guide/datasets/custom-dataset/ class>Adding your Custom Dataset</a> </li> <li class> <a href=../../user-guide/datasets/native-dataset/ class>Adding a Native Dataset</a> </li> <li class> <a href=../../user-guide/datasets/applying-transformations/ class>Applying Transformations</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../user-guide/deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../user-guide/deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../user-guide/deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../user-guide/nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../user-guide/nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../user-guide/nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../user-guide/nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../user-guide/researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../user-guide/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../user-guide/researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../user-guide/researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../user-guide/researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../user-guide/researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../user-guide/advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../user-guide/secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../user-guide/secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../developer/api/common/certificate_manager/ class>Certificate Manager</a> </li> <li class> <a href=../../developer/api/common/cli/ class>CLI</a> </li> <li class> <a href=../../developer/api/common/config/ class>Config</a> </li> <li class> <a href=../../developer/api/common/constants/ class>Constants</a> </li> <li class> <a class href=../../developer/api/common/data.md>Data</a> </li> <li class> <a href=../../developer/api/common/db/ class>DB</a> </li> <li class> <a href=../../developer/api/common/exceptions/ class>Exceptions</a> </li> <li class> <a href=../../developer/api/common/ipython/ class>IPython</a> </li> <li class> <a href=../../developer/api/common/json/ class>Json</a> </li> <li class> <a href=../../developer/api/common/logger/ class>Logger</a> </li> <li class> <a href=../../developer/api/common/message/ class>Message</a> </li> <li class> <a href=../../developer/api/common/metrics/ class>Metrics</a> </li> <li class> <a href=../../developer/api/common/models/ class>Model</a> </li> <li class> <a class href=../../developer/api/common/mpc_controller.md>MPC controller</a> </li> <li class> <a href=../../developer/api/common/optimizers/ class>Optimizers</a> </li> <li class> <a href=../../developer/api/common/privacy/ class>Privacy</a> </li> <li class> <a href=../../developer/api/common/secagg/ class>Secagg</a> </li> <li class> <a href=../../developer/api/common/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../developer/api/common/serializer/ class>Serializer</a> </li> <li class> <a href=../../developer/api/common/singleton/ class>Singleton</a> </li> <li class> <a href=../../developer/api/common/synchro/ class>Synchro</a> </li> <li class> <a href=../../developer/api/common/tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../../developer/api/common/training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../../developer/api/common/training_args/ class>TrainingArgs</a> </li> <li class> <a href=../../developer/api/common/utils/ class>Utils</a> </li> <li class> <a href=../../developer/api/common/validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../developer/api/node/cli/ class>CLI</a> </li> <li class> <a href=../../developer/api/node/cli_utils/ class>CLI Utils</a> </li> <li class> <a href=../../developer/api/node/config/ class>Config</a> </li> <li class> <a href=../../developer/api/node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../developer/api/node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../developer/api/node/node/ class>Node</a> </li> <li class> <a href=../../developer/api/node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../developer/api/node/requests/ class>Requests</a> </li> <li class> <a href=../../developer/api/node/round/ class>Round</a> </li> <li class> <a href=../../developer/api/node/secagg/ class>Secagg</a> </li> <li class> <a href=../../developer/api/node/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../developer/api/node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../developer/api/researcher/aggregators/ class>Aggregators</a> </li> <li class> <a href=../../developer/api/researcher/cli/ class>CLI</a> </li> <li class> <a href=../../developer/api/researcher/config/ class>Config</a> </li> <li class> <a href=../../developer/api/researcher/datasets/ class>Datasets</a> </li> <li class> <a href=../../developer/api/researcher/federated_workflows/ class>Federated Workflows</a> </li> <li class> <a href=../../developer/api/researcher/filetools/ class>Filetools</a> </li> <li class> <a href=../../developer/api/researcher/jobs/ class>Jobs</a> </li> <li class> <a href=../../developer/api/researcher/monitor/ class>Monitor</a> </li> <li class> <a href=../../developer/api/researcher/node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../../developer/api/researcher/requests/ class>Requests</a> </li> <li class> <a href=../../developer/api/researcher/secagg/ class>Secagg</a> </li> <li class> <a href=../../developer/api/researcher/strategies/ class>Strategies</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Transport <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../developer/api/transport/client/ class>Client</a> </li> <li class> <a href=../../developer/api/transport/controller/ class>Controller</a> </li> <li class> <a href=../../developer/api/transport/node_agent/ class>NodeAgent</a> </li> <li class> <a href=../../developer/api/transport/server/ class>Server</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../developer/usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../developer/ci/ class>Continuous Integration</a> </li> <li class> <a href=../../developer/definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../developer/development-environment/ class>Development Environment</a> </li> <li class> <a href=../../developer/testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../developer/messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> <li class> <a href=../../support/troubleshooting/ class>FAQ & Troubleshooting</a> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <article> <h1 id=flamby-integration-in-fed-biomed-general-concepts>FLamby Integration in Fed-BioMed: General Concepts</h1> <p>Fed-BioMed supports easy integration with <a href=https://github.com/owkin/FLamby>Owkin's FLamby</a>. FLamby is a benchmark and dataset suite for cross-silo federated learning with natural partitioning, focused on healthcare applications. FLamby can be used either as a dataset suite or as a fully-fledged benchmark to compare the performance of ML algorithms against a set of standardized approaches and data.</p> <p>Fed-BioMed's integration with FLamby is only supported with the PyTorch framework. Therefore, to use FLamby you must declare a <code>TorchTrainingPlan</code> for your experiment. Fed-BioMed provides a <code>FlambyDataset</code> class that, together with a correctly configured <code>DataLoadingPlan</code>, handles all the boilerplate necessary for loading a FLamby dataset in a federated experiment.</p> <div class="admonition abstract"> <p class=admonition-title>Summary</p> <p>To use FLamby in your Fed-BioMed experiment, follow these simple rules:</p> <ul> <li>Use a <code>TorchTrainingPlan</code></li> <li>Create a <code>FlambyDataset</code> custom dataset in your <code>training_data</code> function</li> <li>Make sure to properly configure a <code>DataLoadingPlan</code> when loading the data to the node</li> </ul> </div> <h2 id=installing-flamby-and-downloading-the-datasets>Installing FLamby and Downloading the Datasets</h2> <p>If you wish to use FLamby, you need to install the package with:</p> <div class=highlight><pre><span></span><code>pip<span class=w> </span>install<span class=w> </span>git+https://github.com/owkin/FLamby@main
</code></pre></div> <p>Additionally, you will need to manually:</p> <ul> <li>Install any dependencies required by the FLamby datasets that you wish to use</li> <li>Download those datasets</li> </ul> <p>To install the dependencies:</p> <ul> <li>Check FLamby's <a href=https://github.com/owkin/FLamby/blob/main/setup.py>setup.py</a> for the dependencies <code>&lt;PACKAGES&gt;</code> for the dataset you wish to use. For example, the <code>tcga</code> dataset requires <code>lifelines</code>.</li> </ul> <p>Here are the packages that you may need to install to follow the tutorials under Fed-BioMed documentation that use FLamby: </p> <div class=highlight><pre><span></span><code><span class=c1># Use the python environment for development (see docs/developer/development-environment.md)</span>
pip<span class=w> </span>install<span class=w> </span>wget
</code></pre></div> <h2 id=understanding-flamby-dataset-structure>Understanding FLamby Dataset Structure</h2> <p>Each FLamby dataset follows a consistent structure:</p> <div class=highlight><pre><span></span><code>flamby/datasets/[dataset_name]/
├── dataset_creation_scripts/
│   ├── download.py          # Main download script
│   └── update_config.py     # Configuration update script
├── README.md               # Dataset documentation
└── other dataset files...
</code></pre></div> <p>The <code>download.py</code> script in each dataset's <code>dataset_creation_scripts</code> folder is responsible for downloading the actual data.</p> <h3 id=download-scripts>Download Scripts</h3> <p>FLamby datasets come with scripts located within the library to download datasets. However, these scripts are not exposed through a CLI utility. Therefore, users should locate the dataset directory and find the download script to download the datasets.</p> <p>Here is a script that you can use to locate these files: </p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>flamby.datasets.fed_heaart_desease</span>

<span class=c1># Select the dataset </span>
<span class=n>dataset</span> <span class=o>=</span> <span class=n>flamby</span><span class=o>.</span><span class=n>datasets</span><span class=o>.</span><span class=n>fed_heart_disease</span>

<span class=c1># Find the dataset root file </span>
<span class=n>dataset_root</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>dataset</span><span class=o>.</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>parent</span>
</code></pre></div> <p>The download scripts are located under the root directory of dataset modules: </p> <div class=highlight><pre><span></span><code><span class=n>download_script</span> <span class=o>=</span> <span class=n>dataset_root</span> <span class=o>/</span> <span class=s2>&quot;dataset_creation_scripts&quot;</span> <span class=o>/</span> <span class=s2>&quot;download.py&quot;</span>
<span class=n>update_script</span> <span class=o>=</span> <span class=n>dataset_root</span> <span class=o>/</span> <span class=s2>&quot;dataset_creation_scripts&quot;</span> <span class=o>/</span> <span class=s2>&quot;update_config.py&quot;</span>
</code></pre></div> <p>Executing the script from Jupyter Notebook and Python shell or script may differ. The <code>!python</code> command can be used for executing the script in Jupyter notebook, and <code>os.system</code> for python shell or script: </p> <div class=highlight><pre><span></span><code><span class=c1># Jupyter notebook</span>
<span class=err>!</span><span class=n>python</span> <span class=p>{</span><span class=n>download_script</span><span class=p>}</span> <span class=o>--</span><span class=n>output</span><span class=o>-</span><span class=n>folder</span> <span class=o>&lt;</span><span class=n>path</span><span class=o>-</span><span class=n>to</span><span class=o>-</span><span class=n>download</span><span class=o>-</span><span class=n>folder</span><span class=o>&gt;</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Python</span>
<span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;python </span><span class=si>{</span><span class=n>download_script</span><span class=si>}</span><span class=s2> --output-folder &lt;path-to-download-folder&gt;&quot;</span><span class=p>)</span>
</code></pre></div> <p>After downloading the dataset, FLamby creates a YAML file called <code>dataset_location.yaml</code> which is located under the dataset module's root directory. This file keeps the information about where the data is downloaded: </p> <div class=highlight><pre><span></span><code><span class=n>dataset_yaml</span> <span class=o>=</span> <span class=n>dataset_root</span> <span class=o>/</span> <span class=s2>&quot;dataset_creation_scripts&quot;</span> <span class=o>/</span> <span class=s2>&quot;dataset_location.yaml&quot;</span>
<span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;cat </span><span class=si>{</span><span class=n>dataset_yaml</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Re-downloading dataset</p> <p>To be able to re-download the dataset, this YAML file has to be removed. </p> </div> <h3 id=update-script>Update Script</h3> <p>FLamby datasets also come with update scripts to update the location where the dataset is downloaded:</p> <div class=highlight><pre><span></span><code><span class=n>update_script</span> <span class=o>=</span> <span class=n>dataset_root</span> <span class=o>/</span> <span class=s2>&quot;dataset_creation_scripts&quot;</span> <span class=o>/</span> <span class=s2>&quot;update_config.py&quot;</span>
<span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;python </span><span class=si>{</span><span class=n>update_script</span><span class=si>}</span><span class=s2> --new-path &lt;/new/path/towards/dataset&gt;&quot;</span><span class=p>)</span>
</code></pre></div> <h3 id=adding-dataset-nodes-using-cli>Adding Dataset Nodes Using CLI</h3> <p>FLamby datasets have to be deployed on the nodes to be used in Fed-BioMed federated training. Fed-BioMed provides an abstraction that allows adding custom datasets such as this FLamby example.</p> <p>Please follow the node configuration documentation to learn about how to instantiate a node component. After your node is ready, go to <code>&lt;node-path&gt;/data</code> and create a JSON file that describes your dataset. This JSON file should contain the path to the dataset (where it is downloaded using the FLamby dataset download script), and the center number that will be used to extract samples reserved for the specific FL node/center: </p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;data-path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&lt;absolute-path-to-data&gt;&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;center&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
<span class=p>}</span>
</code></pre></div> <p>After the JSON file is ready, go to the Fed-BioMed CLI and add the custom dataset: </p> <div class=highlight><pre><span></span><code>fedbiomed<span class=w> </span>node<span class=w> </span>-p<span class=w> </span>&lt;path-to-node-component&gt;<span class=w> </span>dataset<span class=w> </span>add<span class=w> </span>
</code></pre></div> <p>Please select the option <code>custom</code> and follow the interactive CLI to complete dataset addition. This part is exactly the same dataset deployment steps described in the dataset deployment user guide. <strong>In the section where the data path is asked, please enter the JSON file path.</strong></p> <h2 id=defining-the-training-plan>Defining the Training Plan</h2> <p>In Fed-BioMed, researchers create a <a href=../../user-guide/researcher/training-plan/ >training plan</a> to define various aspects of their federated ML experiment, such as the model, the data, the optimizer, and others. To leverage FLamby functionalities within your Fed-BioMed experiment, you will be required to create a custom training plan inheriting from <code>fedbiomed.common.training_plans.TorchTrainingPlan</code>. </p> <p>For details on the meaning of the different functions in a training plan, and how to implement them correctly, please follow the <a href=../../user-guide/researcher/training-plan/ >TrainingPlan</a> user guide. Since FLamby is highly compatible with PyTorch, you may use the models and optimizers provided by FLamby in your Fed-BioMed experiment seamlessly. See the code below for an example:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>fedbiomed.common.training_plans</span> <span class=kn>import</span> <span class=n>TorchTrainingPlan</span>
<span class=kn>from</span> <span class=nn>flamby.datasets.fed_ixi</span> <span class=kn>import</span> <span class=n>Baseline</span><span class=p>,</span> <span class=n>BaselineLoss</span><span class=p>,</span> <span class=n>Optimizer</span>

<span class=k>class</span> <span class=nc>MyTrainingPlan</span><span class=p>(</span><span class=n>TorchTrainingPlan</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>init_model</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>model_args</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>Baseline</span><span class=p>()</span>

    <span class=k>def</span> <span class=nf>init_optimizer</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>optimizer_args</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>Optimizer</span><span class=p>()</span>

    <span class=k>def</span> <span class=nf>init_dependencies</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[</span><span class=s2>&quot;from flamby.datasets.fed_ixi import Baseline, BaselineLoss, Optimizer&quot;</span><span class=p>]</span>

    <span class=k>def</span> <span class=nf>training_step</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>target</span><span class=p>):</span>
        <span class=n>output</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>model</span><span class=p>()</span><span class=o>.</span><span class=n>forward</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>BaselineLoss</span><span class=p>(</span><span class=n>output</span><span class=p>,</span> <span class=n>target</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>training_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># See explanation below</span>
        <span class=k>pass</span>
</code></pre></div> <p>Obviously, you may also plug different definitions for the model, optimizer, and loss function, provided that you respect the conditions and guidelines for <code>TorchTrainingPlan</code>.</p> <h2 id=implementing-the-training_data-function>Implementing the <code>training_data</code> function</h2> <p>Fed-BioMed provides a (<code>CustomDataset</code>)[../../user-guide/datasets/custom-dataset.md] class that can be used for integrating and using FLamby datasets in Fed-BioMed. This class requires to be extended by providing special methods such as <code>read</code>: to read the dataset, and <code>get_item</code> to get a single item from the datast. You need to create a custom FLamby dataset class in your training plan and use it int the <code>training_data</code> function as it is shown in the example below:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>fedbiomed.common.training_plans</span> <span class=kn>import</span> <span class=n>TorchTrainingPlan</span>
<span class=kn>from</span> <span class=nn>fedbiomed.common.datasets</span> <span class=kn>import</span> <span class=n>CustomDataset</span>
<span class=kn>from</span> <span class=nn>fedbiomed.common.datamanager</span> <span class=kn>import</span> <span class=n>DataManager</span>
<span class=kn>from</span> <span class=nn>flamby.datasets.fed_heart_disease</span> <span class=kn>import</span> <span class=n>FedHeartDisease</span>

<span class=k>class</span> <span class=nc>MyTrainingPlan</span><span class=p>(</span><span class=n>TorchTrainingPlan</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>init_dependencies</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[</span>
            <span class=s2>&quot;from flamby.datasets.fed_heart_disease import FedHeartDisease&quot;</span><span class=p>,</span>
            <span class=s2>&quot;from fedbiomed.common.datamanager import DataManager&quot;</span><span class=p>,</span>
            <span class=s2>&quot;from fedbiomed.common.datasets import CustomDataset&quot;</span><span class=p>,</span>
        <span class=p>]</span>

    <span class=k>class</span> <span class=nc>MyFlambyDataset</span><span class=p>(</span><span class=n>CustomDataset</span><span class=p>):</span>

        <span class=k>def</span> <span class=nf>read</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>            </span><span class=sd>&quot;&quot;&quot;Read FLamby data&quot;&quot;&quot;</span>            
            <span class=kn>import</span> <span class=nn>json</span>
            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>path</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
                <span class=n>file</span> <span class=o>-</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
                <span class=n>flamby_data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=n>FedHeartDisease</span><span class=p>(</span>
                <span class=n>center</span><span class=o>=</span><span class=n>flamby_data</span><span class=p>[</span><span class=s2>&quot;center&quot;</span><span class=p>],</span> 
                <span class=n>data_path</span><span class=o>=</span><span class=n>flamby_data</span><span class=p>[</span><span class=s2>&quot;data-path&quot;</span><span class=p>]</span>
            <span class=p>)</span>

        <span class=k>def</span> <span class=nf>get_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
<span class=w>            </span><span class=sd>&quot;&quot;&quot;Get item&quot;&quot;&quot;</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=n>item</span><span class=p>]</span> 

    <span class=k>def</span> <span class=nf>training_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>dataset</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>MyFlambyDataset</span><span class=p>()</span>
        <span class=n>loader_arguments</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;shuffle&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
        <span class=k>return</span> <span class=n>DataManager</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=o>**</span><span class=n>loader_arguments</span><span class=p>)</span>

    <span class=c1># ... Implement the other functions as needed ...</span>
</code></pre></div> <h2 id=data-transformations>Data Transformations</h2> <p>Functional data transformations can be specified in the <code>training_data</code> function, similarly to the common <code>TorchTrainingPlan</code> pattern. However, for FLamby you are required to use the special function <code>init_transform</code> of the FLamby dataset, as per the example below.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>fedbiomed.common.training_plans</span> <span class=kn>import</span> <span class=n>TorchTrainingPlan</span>
<span class=kn>from</span> <span class=nn>fedbiomed.common.datasets</span> <span class=kn>import</span> <span class=n>CustomDataset</span>
<span class=kn>from</span> <span class=nn>fedbiomed.common.datamanager</span> <span class=kn>import</span> <span class=n>DataManager</span>
<span class=kn>from</span> <span class=nn>monai.transforms</span> <span class=kn>import</span> <span class=n>Compose</span><span class=p>,</span> <span class=n>Resize</span><span class=p>,</span> <span class=n>NormalizeIntensity</span>

<span class=k>class</span> <span class=nc>MyTrainingPlan</span><span class=p>(</span><span class=n>TorchTrainingPlan</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>init_dependencies</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[</span>
            <span class=s2>&quot;from fedbiomed.common.datasets import CustomDataset&quot;</span><span class=p>,</span> 
            <span class=s2>&quot;from fedbiomed.common.datamanager import DataManager&quot;</span><span class=p>,</span>
            <span class=s2>&quot;from monai.transforms import Compose, Resize, NormalizeIntensity&quot;</span><span class=p>,</span>
        <span class=p>]</span>

    <span class=k>class</span> <span class=nc>MyFlambyDataset</span><span class=p>(</span><span class=n>CustomDataset</span><span class=p>):</span>
        <span class=k>def</span> <span class=nf>read</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>            </span><span class=sd>&quot;&quot;&quot;Read FLamby data&quot;&quot;&quot;</span>            
            <span class=kn>from</span> <span class=nn>jsonlib</span> <span class=kn>import</span> <span class=n>json</span>
            <span class=n>flamby_data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>path</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=n>FedHeartDisease</span><span class=p>(</span>
                <span class=n>center</span><span class=o>=</span><span class=n>flamby_data</span><span class=p>[</span><span class=s2>&quot;center&quot;</span><span class=p>],</span> 
                <span class=n>data_path</span><span class=o>=</span><span class=n>flamby_data</span><span class=p>[</span><span class=s2>&quot;data-path&quot;</span><span class=p>])</span>

        <span class=k>def</span> <span class=nf>get_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
<span class=w>            </span><span class=sd>&quot;&quot;&quot;Get item&quot;&quot;&quot;</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=n>item</span><span class=p>]</span> 

    <span class=k>def</span> <span class=nf>training_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>dataset</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>MyFlambyDataset</span><span class=p>()</span>
        <span class=n>myComposedTransform</span> <span class=o>=</span> <span class=n>Compose</span><span class=p>([</span><span class=n>Resize</span><span class=p>((</span><span class=mi>48</span><span class=p>,</span><span class=mi>60</span><span class=p>,</span><span class=mi>48</span><span class=p>)),</span> <span class=n>NormalizeIntensity</span><span class=p>()])</span>
        <span class=n>dataset</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>init_transform</span><span class=p>(</span><span class=n>myComposedTransform</span><span class=p>)</span>

        <span class=n>train_kwargs</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;shuffle&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
        <span class=k>return</span> <span class=n>DataManager</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=o>**</span><span class=n>train_kwargs</span><span class=p>)</span>

    <span class=c1># ... Implement the other functions as needed ...</span>
</code></pre></div> <div class="admonition info"> <p class=admonition-title>Transforms must always be of <code>Compose</code> type</p> <p>Transforms added to a FLamby dataset must always be either of type <code>torch.transforms.Compose</code> or <code>monai.transforms.Compose</code></p> </div> <p>Do not forget to always add your transforms as dependencies in the <code>init_dependencies</code> function!</p> <h2 id=next-steps>Next Steps</h2> <p>Please check the FLamby tutorials to see training examples with FLamby datasets and modules. </p> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#installing-flamby-and-downloading-the-datasets class=md-nav__link> Installing FLamby and Downloading the Datasets </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#understanding-flamby-dataset-structure class=md-nav__link> Understanding FLamby Dataset Structure </a> <nav class=toc-nav aria-label="Understanding FLamby Dataset Structure"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#download-scripts class=md-nav__link> Download Scripts </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#update-script class=md-nav__link> Update Script </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#adding-dataset-nodes-using-cli class=md-nav__link> Adding Dataset Nodes Using CLI </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#defining-the-training-plan class=md-nav__link> Defining the Training Plan </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#implementing-the-training_data-function class=md-nav__link> Implementing the training_data function </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#data-transformations class=md-nav__link> Data Transformations </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#next-steps class=md-nav__link> Next Steps </a> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed © 2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../assets/javascript/lunr.js></script> <script src=../../assets/javascript/theme.js></script> <!-- GitHub buttons --> <script async defer src=https://buttons.github.io/buttons.js></script> </body> </html>