<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../../../versions.json";
      const search_worker_js = "../../../../assets/javascript/search-worker.js";
      const search_index_json = "../../../../search/search_index.json";
      const base_url = '../../../..';
    </script><!-- Site title --><title>Dataloadingplan - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#citation>How to Cite Us</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../../../ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../../../assets/img/menu.svg> <img class=close style=display:none src=../../../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#citation>How to Cite Us</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> <li class> <a href=../../../../getting-started/installation/ class>Installation</a> </li> <li class> <a href=../../../../getting-started/basic-example/ class>Basic Example</a> </li> <li class> <a href=../../../../getting-started/configuration/ class>Configuration</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../../../tutorials/pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/05_Transfer-learning_tutorial_usingDenseNet-121/ class>Transfer-learning in Fed-BioMed tutorial</a> </li> <li class> <a href=../../../../tutorials/pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/flamby/ class>Introduction</a> </li> <li class> <a href=../../../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../../../../tutorials/concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Datasets <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/datasets/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/datasets/default-datasets/ class>Default Datasets</a> </li> <li class> <a href=../../../../user-guide/datasets/image-dataset/ class>Image Datasets</a> </li> <li class> <a href=../../../../user-guide/datasets/tabular-dataset/ class>Tabular Datasets</a> </li> <li class> <a href=../../../../user-guide/datasets/medical-folder-dataset/ class>Medical Datasets</a> </li> <li class> <a href=../../../../user-guide/datasets/custom-dataset/ class>Adding your Custom Dataset</a> </li> <li class> <a href=../../../../user-guide/datasets/native-dataset/ class>Adding a Native Dataset</a> </li> <li class> <a href=../../../../user-guide/datasets/applying-transformations/ class>Applying Transformations</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../../../user-guide/deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../../../user-guide/deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../../../user-guide/nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../../../user-guide/nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../../../user-guide/nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../../../user-guide/nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../../../user-guide/researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../../../user-guide/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../../../user-guide/researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../../../user-guide/researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../../../user-guide/researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../../../user-guide/researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../../../user-guide/advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../../../user-guide/secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../certificate_manager/ class>Certificate Manager</a> </li> <li class> <a href=../cli/ class>CLI</a> </li> <li class> <a href=../config/ class>Config</a> </li> <li class> <a href=../constants/ class>Constants</a> </li> <li class> <a class href=../data.md>Data</a> </li> <li class> <a href=../db/ class>DB</a> </li> <li class> <a href=../exceptions/ class>Exceptions</a> </li> <li class> <a href=../ipython/ class>IPython</a> </li> <li class> <a href=../json/ class>Json</a> </li> <li class> <a href=../logger/ class>Logger</a> </li> <li class> <a href=../message/ class>Message</a> </li> <li class> <a href=../metrics/ class>Metrics</a> </li> <li class> <a href=../models/ class>Model</a> </li> <li class> <a class href=../mpc_controller.md>MPC controller</a> </li> <li class> <a href=../optimizers/ class>Optimizers</a> </li> <li class> <a href=../privacy/ class>Privacy</a> </li> <li class> <a href=../secagg/ class>Secagg</a> </li> <li class> <a href=../secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../serializer/ class>Serializer</a> </li> <li class> <a href=../singleton/ class>Singleton</a> </li> <li class> <a href=../synchro/ class>Synchro</a> </li> <li class> <a href=../tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../training_args/ class>TrainingArgs</a> </li> <li class> <a href=../utils/ class>Utils</a> </li> <li class> <a href=../validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../node/cli/ class>CLI</a> </li> <li class> <a href=../../node/cli_utils/ class>CLI Utils</a> </li> <li class> <a href=../../node/config/ class>Config</a> </li> <li class> <a href=../../node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../node/node/ class>Node</a> </li> <li class> <a href=../../node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../node/requests/ class>Requests</a> </li> <li class> <a href=../../node/round/ class>Round</a> </li> <li class> <a href=../../node/secagg/ class>Secagg</a> </li> <li class> <a href=../../node/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../researcher/aggregators/ class>Aggregators</a> </li> <li class> <a href=../../researcher/cli/ class>CLI</a> </li> <li class> <a href=../../researcher/config/ class>Config</a> </li> <li class> <a href=../../researcher/datasets/ class>Datasets</a> </li> <li class> <a href=../../researcher/federated_workflows/ class>Federated Workflows</a> </li> <li class> <a href=../../researcher/filetools/ class>Filetools</a> </li> <li class> <a href=../../researcher/jobs/ class>Jobs</a> </li> <li class> <a href=../../researcher/monitor/ class>Monitor</a> </li> <li class> <a href=../../researcher/node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../../researcher/requests/ class>Requests</a> </li> <li class> <a href=../../researcher/secagg/ class>Secagg</a> </li> <li class> <a href=../../researcher/strategies/ class>Strategies</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Transport <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../transport/client/ class>Client</a> </li> <li class> <a href=../../transport/controller/ class>Controller</a> </li> <li class> <a href=../../transport/node_agent/ class>NodeAgent</a> </li> <li class> <a href=../../transport/server/ class>Server</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../../usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../../ci/ class>Continuous Integration</a> </li> <li class> <a href=../../../definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../../development-environment/ class>Development Environment</a> </li> <li class> <a href=../../../testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../../messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> <li class> <a href=../../../../support/troubleshooting/ class>FAQ & Troubleshooting</a> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <h1>Dataloadingplan</h1> <article> <div class="doc doc-object doc-module"> <div class="doc doc-contents first"> <p>Classes that simplify imports from fedbiomed.common.dataloadingplan</p> <div class="doc doc-children"> <h2 id=fedbiomed.common.dataloadingplan-classes>Classes</h2> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.dataloadingplan.DataLoadingBlock class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DataLoadingBlock</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DataLoadingBlock</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=abc.ABC href=https://docs.python.org/3/library/abc.html#abc.ABC>ABC</a></code></p> <p>The building blocks of a DataLoadingPlan.</p> <p>A <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> describes an intermediary layer between the researcher and the node's filesystem. It allows the node to specify a customization in the way data is "perceived" by the data loaders during training.</p> <p>A <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> is identified by its type_id attribute. Thus, this attribute should be unique among all <a class="autorefs autorefs-internal" href=../constants/#fedbiomed.common.constants.DataLoadingBlockTypes>DataLoadingBlockTypes</a> in the same <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingPlan>DataLoadingPlan</a>. Moreover, we may test equality between a <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> and a string by checking its type_id, as a means of easily testing whether a <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> is contained in a collection.</p> <p>Correct usage of this class requires creating ad-hoc subclasses. The <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> class is not intended to be instantiated directly.</p> <p>Subclasses of <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> must respect the following conditions:</p> <ol> <li>implement a default constructor</li> <li>the implemented constructor must call <code>super().__init__()</code></li> <li>extend the serialize(self) and the deserialize(self, load_from: dict) functions</li> <li>both serialize and deserialize must call super's serialize and deserialize respectively</li> <li>the deserialize function must always return self</li> <li>the serialize function must update the dict returned by super's serialize</li> <li>implement an apply function that takes arbitrary arguments and applies the logic of the loading_block</li> <li>update the _validation_scheme to define rules for all new fields returned by the serialize function</li> </ol> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title=fedbiomed.common.dataloadingplan.DataLoadingBlock.__serialization_id>__serialization_id</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(str) identifies <em>one serialized instance</em> of the DataLoadingBlock</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="311 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="312 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span> <span class=o>=</span> <span class=s2>&quot;serialized_dlb_&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="313 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span> <span class=o>=</span> <span class=n>SerializationValidation</span><span class=p>()</span>
<span class=linenos data-linenos="314 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>(</span>
<span class=linenos data-linenos="315 "></span>        <span class=n>SerializationValidation</span><span class=o>.</span><span class=n>dlb_default_scheme</span><span class=p>()</span>
<span class=linenos data-linenos="316 "></span>    <span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.dataloadingplan.DataLoadingBlock-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingBlock.apply class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">apply</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>apply</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Abstract method representing an application of the DataLoadingBlock</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="349 "></span><span class=nd>@abstractmethod</span>
<span class=linenos data-linenos="350 "></span><span class=k>def</span> <span class=nf>apply</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=linenos data-linenos="351 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Abstract method representing an application of the DataLoadingBlock&quot;&quot;&quot;</span>
<span class=linenos data-linenos="352 "></span>    <span class=k>pass</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingBlock.deserialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">deserialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>deserialize</span><span class=p>(</span><span class=n>load_from</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reconstruct the DataLoadingBlock from a serialized version.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>load_from</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary as obtained by the serialize function.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: the self instance</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="335 "></span><span class=k>def</span> <span class=nf>deserialize</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>load_from</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TDataLoadingBlock</span><span class=p>:</span>
<span class=linenos data-linenos="336 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reconstruct the DataLoadingBlock from a serialized version.</span>
<span class=linenos data-linenos="337 "></span>
<span class=linenos data-linenos="338 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="339 "></span><span class=sd>        load_from (dict): a dictionary as obtained by the serialize function.</span>
<span class=linenos data-linenos="340 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="341 "></span><span class=sd>        the self instance</span>
<span class=linenos data-linenos="342 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="343 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>validate</span><span class=p>(</span>
<span class=linenos data-linenos="344 "></span>        <span class=n>load_from</span><span class=p>,</span> <span class=n>FedbiomedLoadingBlockValueError</span>
<span class=linenos data-linenos="345 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="346 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span> <span class=o>=</span> <span class=n>load_from</span><span class=p>[</span><span class=s2>&quot;dlb_id&quot;</span><span class=p>]</span>
<span class=linenos data-linenos="347 "></span>    <span class=k>return</span> <span class=bp>self</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingBlock.get_serialization_id class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">get_serialization_id</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>get_serialization_id</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Expose serialization id as read-only</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="318 "></span><span class=k>def</span> <span class=nf>get_serialization_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="319 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Expose serialization id as read-only&quot;&quot;&quot;</span>
<span class=linenos data-linenos="320 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingBlock.instantiate_class class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">instantiate_class</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>instantiate_class</span><span class=p>(</span><span class=n>loading_block</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Instantiate one <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> object of the type defined in the arguments.</p> <p>Uses the <code>loading_block_module</code> and <code>loading_block_class</code> fields of the loading_block argument to identify the type of <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> to be instantiated, then calls its default constructor. Note that this function <strong>does not call deserialize</strong>.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>loading_block</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p><a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> metadata in the format returned by the serialize function.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: A default-constructed instance of a <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> of the type defined in the metadata. Raises: FedbiomedLoadingBlockError: if the instantiation process raised any exception.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="354 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="355 "></span><span class=k>def</span> <span class=nf>instantiate_class</span><span class=p>(</span><span class=n>loading_block</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TDataLoadingBlock</span><span class=p>:</span>
<span class=linenos data-linenos="356 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Instantiate one [DataLoadingBlock][fedbiomed.common.dataloadingplan.DataLoadingBlock]</span>
<span class=linenos data-linenos="357 "></span><span class=sd>    object of the type defined in the arguments.</span>
<span class=linenos data-linenos="358 "></span>
<span class=linenos data-linenos="359 "></span><span class=sd>    Uses the `loading_block_module` and `loading_block_class` fields of the loading_block argument to</span>
<span class=linenos data-linenos="360 "></span><span class=sd>    identify the type of [DataLoadingBlock][fedbiomed.common.dataloadingplan.DataLoadingBlock]</span>
<span class=linenos data-linenos="361 "></span><span class=sd>    to be instantiated, then calls its default constructor.</span>
<span class=linenos data-linenos="362 "></span><span class=sd>    Note that this function **does not call deserialize**.</span>
<span class=linenos data-linenos="363 "></span>
<span class=linenos data-linenos="364 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="365 "></span><span class=sd>        loading_block (dict): [DataLoadingBlock][fedbiomed.common.dataloadingplan.DataLoadingBlock]</span>
<span class=linenos data-linenos="366 "></span><span class=sd>            metadata in the format returned by the serialize function.</span>
<span class=linenos data-linenos="367 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="368 "></span><span class=sd>        A default-constructed instance of a</span>
<span class=linenos data-linenos="369 "></span><span class=sd>            [DataLoadingBlock][fedbiomed.common.dataloadingplan.DataLoadingBlock]</span>
<span class=linenos data-linenos="370 "></span><span class=sd>            of the type defined in the metadata.</span>
<span class=linenos data-linenos="371 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="372 "></span><span class=sd>       FedbiomedLoadingBlockError: if the instantiation process raised any exception.</span>
<span class=linenos data-linenos="373 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="374 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="375 "></span>        <span class=n>dlb_module</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>loading_block</span><span class=p>[</span><span class=s2>&quot;loading_block_module&quot;</span><span class=p>])</span>  <span class=c1># noqa: F841</span>
<span class=linenos data-linenos="376 "></span>        <span class=n>dlb</span> <span class=o>=</span> <span class=nb>eval</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;dlb_module.</span><span class=si>{</span><span class=n>loading_block</span><span class=p>[</span><span class=s1>&#39;loading_block_class&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>()&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="377 "></span>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="378 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=p>(</span>
<span class=linenos data-linenos="379 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: could not instantiate DataLoadingBlock from the following metadata: &quot;</span>
<span class=linenos data-linenos="380 "></span>            <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>loading_block</span><span class=si>}</span><span class=s2> because of </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="381 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="382 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="383 "></span>        <span class=k>raise</span> <span class=n>FedbiomedLoadingBlockError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span> <span class=kn>from</span> <span class=nn>e</span>
<span class=linenos data-linenos="384 "></span>    <span class=k>return</span> <span class=n>dlb</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingBlock.instantiate_key class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">instantiate_key</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>instantiate_key</span><span class=p>(</span><span class=n>key_module</span><span class=p>,</span> <span class=n>key_classname</span><span class=p>,</span> <span class=n>loading_block_key_str</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Imports and loads <a class="autorefs autorefs-internal" href=../constants/#fedbiomed.common.constants.DataLoadingBlockTypes>DataLoadingBlockTypes</a> regarding the passed arguments</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>key_module</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>key_classname</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>loading_block_key_str</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#str>str</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title=fedbiomed.common.exceptions.FedbiomedDataLoadingPlanError href=../exceptions/#fedbiomed.common.exceptions.FedbiomedDataLoadingPlanError>FedbiomedDataLoadingPlanError</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>DataLoadingBlockTypes</code></td> <td> <code><a class="autorefs autorefs-internal" title=fedbiomed.common.constants.DataLoadingBlockTypes href=../constants/#fedbiomed.common.constants.DataLoadingBlockTypes>DataLoadingBlockTypes</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="386 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="387 "></span><span class=k>def</span> <span class=nf>instantiate_key</span><span class=p>(</span>
<span class=linenos data-linenos="388 "></span>    <span class=n>key_module</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>key_classname</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>loading_block_key_str</span><span class=p>:</span> <span class=nb>str</span>
<span class=linenos data-linenos="389 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DataLoadingBlockTypes</span><span class=p>:</span>
<span class=linenos data-linenos="390 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Imports and loads [DataLoadingBlockTypes][fedbiomed.common.constants.DataLoadingBlockTypes]</span>
<span class=linenos data-linenos="391 "></span><span class=sd>    regarding the passed arguments</span>
<span class=linenos data-linenos="392 "></span>
<span class=linenos data-linenos="393 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="394 "></span><span class=sd>        key_module (str): _description_</span>
<span class=linenos data-linenos="395 "></span><span class=sd>        key_classname (str): _description_</span>
<span class=linenos data-linenos="396 "></span><span class=sd>        loading_block_key_str (str): _description_</span>
<span class=linenos data-linenos="397 "></span>
<span class=linenos data-linenos="398 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="399 "></span><span class=sd>        FedbiomedDataLoadingPlanError: _description_</span>
<span class=linenos data-linenos="400 "></span>
<span class=linenos data-linenos="401 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="402 "></span><span class=sd>        DataLoadingBlockTypes: _description_</span>
<span class=linenos data-linenos="403 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="404 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="405 "></span>        <span class=n>keys</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>key_module</span><span class=p>)</span>  <span class=c1># noqa: F841</span>
<span class=linenos data-linenos="406 "></span>        <span class=n>loading_block_key</span> <span class=o>=</span> <span class=nb>eval</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;keys.</span><span class=si>{</span><span class=n>key_classname</span><span class=si>}</span><span class=s2>(&#39;</span><span class=si>{</span><span class=n>loading_block_key_str</span><span class=si>}</span><span class=s2>&#39;)&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="407 "></span>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="408 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=p>(</span>
<span class=linenos data-linenos="409 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB615</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Error deserializing loading block key &quot;</span>
<span class=linenos data-linenos="410 "></span>            <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>loading_block_key_str</span><span class=si>}</span><span class=s2> with path </span><span class=si>{</span><span class=n>key_module</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>key_classname</span><span class=si>}</span><span class=s2> &quot;</span>
<span class=linenos data-linenos="411 "></span>            <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;because of </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="412 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="413 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="414 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span> <span class=kn>from</span> <span class=nn>e</span>
<span class=linenos data-linenos="415 "></span>    <span class=k>return</span> <span class=n>loading_block_key</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingBlock.serialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">serialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>serialize</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Serializes the class in a format similar to json.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of key-value pairs sufficient for reconstructing</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>the DataLoadingBlock.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="322 "></span><span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="323 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Serializes the class in a format similar to json.</span>
<span class=linenos data-linenos="324 "></span>
<span class=linenos data-linenos="325 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="326 "></span><span class=sd>        a dictionary of key-value pairs sufficient for reconstructing</span>
<span class=linenos data-linenos="327 "></span><span class=sd>        the DataLoadingBlock.</span>
<span class=linenos data-linenos="328 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="329 "></span>    <span class=k>return</span> <span class=nb>dict</span><span class=p>(</span>
<span class=linenos data-linenos="330 "></span>        <span class=n>loading_block_class</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__qualname__</span><span class=p>,</span>
<span class=linenos data-linenos="331 "></span>        <span class=n>loading_block_module</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=vm>__module__</span><span class=p>,</span>
<span class=linenos data-linenos="332 "></span>        <span class=n>dlb_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span><span class=p>,</span>
<span class=linenos data-linenos="333 "></span>    <span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.dataloadingplan.DataLoadingPlan class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DataLoadingPlan</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DataLoadingPlan</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title=typing.Dict href=https://docs.python.org/3/library/typing.html#typing.Dict>Dict</a>[<a class="autorefs autorefs-internal" title=fedbiomed.common.constants.DataLoadingBlockTypes href=../constants/#fedbiomed.common.constants.DataLoadingBlockTypes>DataLoadingBlockTypes</a>, <a class="autorefs autorefs-internal" title=fedbiomed.common.dataloadingplan._data_loading_plan.DataLoadingBlock href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a>]</code></p> <p>Customizations to the way the data is loaded and presented for training.</p> <p>A DataLoadingPlan is a dictionary of {name: DataLoadingBlock} pairs. Each <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> represents a customization to the way data is loaded and presented to the researcher. These customizations are defined by the node, but they operate on a Dataset class, which is defined by the library and instantiated by the researcher.</p> <p>To exploit this functionality, a Dataset must be modified to accept the customizations provided by the DataLoadingPlan. To simplify this process, we provide the <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingPlanMixin>DataLoadingPlanMixin</a> class below.</p> <p>The DataLoadingPlan class should be instantiated directly, no subclassing is needed. The DataLoadingPlan <em>is</em> a dict, and exposes the same interface as a dict.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title=fedbiomed.common.dataloadingplan.DataLoadingPlan.dlp_id href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.dlp_id>dlp_id</a></code></td> <td> </td> <td> <div class=doc-md-description> <p>str representing a unique plan id (auto-generated)</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title=fedbiomed.common.dataloadingplan.DataLoadingPlan.desc href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.desc>desc</a></code></td> <td> </td> <td> <div class=doc-md-description> <p>str representing an optional user-friendly short description</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title=fedbiomed.common.dataloadingplan.DataLoadingPlan.target_dataset_type href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.target_dataset_type>target_dataset_type</a></code></td> <td> </td> <td> <div class=doc-md-description> <p>a DatasetTypes enum representing the type of dataset targeted by this DataLoadingPlan</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="507 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=linenos data-linenos="508 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>DataLoadingPlan</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=linenos data-linenos="509 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>dlp_id</span> <span class=o>=</span> <span class=s2>&quot;dlp_&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="510 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>desc</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
<span class=linenos data-linenos="511 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>NONE</span>
<span class=linenos data-linenos="512 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validation</span> <span class=o>=</span> <span class=n>SerializationValidation</span><span class=p>()</span>
<span class=linenos data-linenos="513 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validation</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>(</span>
<span class=linenos data-linenos="514 "></span>        <span class=n>SerializationValidation</span><span class=o>.</span><span class=n>dlp_default_scheme</span><span class=p>()</span>
<span class=linenos data-linenos="515 "></span>    <span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.dataloadingplan.DataLoadingPlan-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlan.desc class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">desc</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>desc</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlan.dlp_id class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">dlp_id</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>dlp_id</span> <span class=o>=</span> <span class=s1>&#39;dlp_&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlan.target_dataset_type class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">target_dataset_type</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>NONE</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.common.dataloadingplan.DataLoadingPlan-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlan.deserialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">deserialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>deserialize</span><span class=p>(</span><span class=n>serialized_dlp</span><span class=p>,</span> <span class=n>serialized_loading_blocks</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reconstruct the DataLoadingPlan][fedbiomed.common.dataloadingplan.DataLoadingPlan] from a serialized version.</p> <div class="admonition warning"> <p class=admonition-title>Calling this function will <em>clear</em> the contained [DataLoadingBlockTypes].</p> <p>This function may not be used to "update" nor to "append to" a <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingPlan>DataLoadingPlan</a>.</p> </div> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>serialized_dlp</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of data loading plan metadata, as obtained from the first output of the serialize function</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>serialized_loading_blocks</code></td> <td> <code><a class="autorefs autorefs-external" title=typing.List href=https://docs.python.org/3/library/typing.html#typing.List>List</a>[<a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a>]</code> </td> <td> <div class=doc-md-description> <p>a list of dictionaries of loading_block metadata, as obtained from the second output of the serialize function</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: the self instance</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="558 "></span><span class=k>def</span> <span class=nf>deserialize</span><span class=p>(</span>
<span class=linenos data-linenos="559 "></span>    <span class=bp>self</span><span class=p>,</span> <span class=n>serialized_dlp</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span> <span class=n>serialized_loading_blocks</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>]</span>
<span class=linenos data-linenos="560 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TDataLoadingPlan</span><span class=p>:</span>
<span class=linenos data-linenos="561 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reconstruct the DataLoadingPlan][fedbiomed.common.dataloadingplan.DataLoadingPlan] from a serialized version.</span>
<span class=linenos data-linenos="562 "></span>
<span class=linenos data-linenos="563 "></span><span class=sd>    !!! warning &quot;Calling this function will *clear* the contained [DataLoadingBlockTypes].&quot;</span>
<span class=linenos data-linenos="564 "></span><span class=sd>        This function may not be used to &quot;update&quot; nor to &quot;append to&quot;</span>
<span class=linenos data-linenos="565 "></span><span class=sd>        a [DataLoadingPlan][fedbiomed.common.dataloadingplan.DataLoadingPlan].</span>
<span class=linenos data-linenos="566 "></span>
<span class=linenos data-linenos="567 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="568 "></span><span class=sd>        serialized_dlp: a dictionary of data loading plan metadata, as obtained from the first output of the</span>
<span class=linenos data-linenos="569 "></span><span class=sd>            serialize function</span>
<span class=linenos data-linenos="570 "></span><span class=sd>        serialized_loading_blocks: a list of dictionaries of loading_block metadata, as obtained from the</span>
<span class=linenos data-linenos="571 "></span><span class=sd>            second output of the serialize function</span>
<span class=linenos data-linenos="572 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="573 "></span><span class=sd>        the self instance</span>
<span class=linenos data-linenos="574 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="575 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validation</span><span class=o>.</span><span class=n>validate</span><span class=p>(</span>
<span class=linenos data-linenos="576 "></span>        <span class=n>serialized_dlp</span><span class=p>,</span> <span class=n>FedbiomedDataLoadingPlanValueError</span>
<span class=linenos data-linenos="577 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="578 "></span>
<span class=linenos data-linenos="579 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
<span class=linenos data-linenos="580 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>dlp_id</span> <span class=o>=</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s2>&quot;dlp_id&quot;</span><span class=p>]</span>
<span class=linenos data-linenos="581 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>desc</span> <span class=o>=</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s2>&quot;dlp_name&quot;</span><span class=p>]</span>
<span class=linenos data-linenos="582 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>DatasetTypes</span><span class=p>(</span><span class=n>serialized_dlp</span><span class=p>[</span><span class=s2>&quot;target_dataset_type&quot;</span><span class=p>])</span>
<span class=linenos data-linenos="583 "></span>    <span class=k>for</span> <span class=n>loading_block_key_str</span><span class=p>,</span> <span class=n>dlb_id</span> <span class=ow>in</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s2>&quot;loading_blocks&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="584 "></span>        <span class=n>key_module</span><span class=p>,</span> <span class=n>key_classname</span> <span class=o>=</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s2>&quot;key_paths&quot;</span><span class=p>][</span>
<span class=linenos data-linenos="585 "></span>            <span class=n>loading_block_key_str</span>
<span class=linenos data-linenos="586 "></span>        <span class=p>]</span>
<span class=linenos data-linenos="587 "></span>        <span class=n>loading_block_key</span> <span class=o>=</span> <span class=n>DataLoadingBlock</span><span class=o>.</span><span class=n>instantiate_key</span><span class=p>(</span>
<span class=linenos data-linenos="588 "></span>            <span class=n>key_module</span><span class=p>,</span> <span class=n>key_classname</span><span class=p>,</span> <span class=n>loading_block_key_str</span>
<span class=linenos data-linenos="589 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="590 "></span>        <span class=n>loading_block</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span>
<span class=linenos data-linenos="591 "></span>            <span class=nb>filter</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=s2>&quot;dlb_id&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>dlb_id</span><span class=p>,</span> <span class=n>serialized_loading_blocks</span><span class=p>)</span>
<span class=linenos data-linenos="592 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="593 "></span>        <span class=n>dlb</span> <span class=o>=</span> <span class=n>DataLoadingBlock</span><span class=o>.</span><span class=n>instantiate_class</span><span class=p>(</span><span class=n>loading_block</span><span class=p>)</span>
<span class=linenos data-linenos="594 "></span>        <span class=bp>self</span><span class=p>[</span><span class=n>loading_block_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>dlb</span><span class=o>.</span><span class=n>deserialize</span><span class=p>(</span><span class=n>loading_block</span><span class=p>)</span>
<span class=linenos data-linenos="595 "></span>    <span class=k>return</span> <span class=bp>self</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlan.infer_dataset_type class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">infer_dataset_type</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>infer_dataset_type</span><span class=p>(</span><span class=n>dataset</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Infer the type of a given dataset.</p> <p>This function provides the mapping between a dataset's class and the DatasetTypes enum. If the dataset exposes the correct interface (i.e. the get_dataset_type method) then it directly calls that, otherwise it tries to apply some heuristics to guess the type of dataset.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dataset</code></td> <td> <code><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3/library/typing.html#typing.Any>Any</a></code> </td> <td> <div class=doc-md-description> <p>the dataset whose type we want to infer.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: a DatasetTypes enum element which identifies the type of the dataset. Raises: FedbiomedDataLoadingPlanValueError: if the dataset does not have a <code>get_dataset_type</code> method and moreover the type could not be guessed.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="604 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="605 "></span><span class=k>def</span> <span class=nf>infer_dataset_type</span><span class=p>(</span><span class=n>dataset</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DatasetTypes</span><span class=p>:</span>
<span class=linenos data-linenos="606 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Infer the type of a given dataset.</span>
<span class=linenos data-linenos="607 "></span>
<span class=linenos data-linenos="608 "></span><span class=sd>    This function provides the mapping between a dataset&#39;s class and the DatasetTypes enum. If the dataset exposes</span>
<span class=linenos data-linenos="609 "></span><span class=sd>    the correct interface (i.e. the get_dataset_type method) then it directly calls that, otherwise it tries to</span>
<span class=linenos data-linenos="610 "></span><span class=sd>    apply some heuristics to guess the type of dataset.</span>
<span class=linenos data-linenos="611 "></span>
<span class=linenos data-linenos="612 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="613 "></span><span class=sd>        dataset: the dataset whose type we want to infer.</span>
<span class=linenos data-linenos="614 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="615 "></span><span class=sd>        a DatasetTypes enum element which identifies the type of the dataset.</span>
<span class=linenos data-linenos="616 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="617 "></span><span class=sd>        FedbiomedDataLoadingPlanValueError: if the dataset does not have a `get_dataset_type` method and moreover</span>
<span class=linenos data-linenos="618 "></span><span class=sd>            the type could not be guessed.</span>
<span class=linenos data-linenos="619 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="620 "></span>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=s2>&quot;get_dataset_type&quot;</span><span class=p>):</span>
<span class=linenos data-linenos="621 "></span>        <span class=k>return</span> <span class=n>dataset</span><span class=o>.</span><span class=n>get_dataset_type</span><span class=p>()</span>
<span class=linenos data-linenos="622 "></span>    <span class=k>elif</span> <span class=n>dataset</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;ImageFolder&quot;</span><span class=p>:</span>
<span class=linenos data-linenos="623 "></span>        <span class=c1># ImageFolder could be both an images type or mednist. Try to identify mednist with some heuristic.</span>
<span class=linenos data-linenos="624 "></span>        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=s2>&quot;classes&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>all</span><span class=p>(</span>
<span class=linenos data-linenos="625 "></span>            <span class=p>[</span>
<span class=linenos data-linenos="626 "></span>                <span class=n>x</span> <span class=ow>in</span> <span class=n>dataset</span><span class=o>.</span><span class=n>classes</span>
<span class=linenos data-linenos="627 "></span>                <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=p>[</span>
<span class=linenos data-linenos="628 "></span>                    <span class=s2>&quot;AbdomenCT&quot;</span><span class=p>,</span>
<span class=linenos data-linenos="629 "></span>                    <span class=s2>&quot;BreastMRI&quot;</span><span class=p>,</span>
<span class=linenos data-linenos="630 "></span>                    <span class=s2>&quot;CXR&quot;</span><span class=p>,</span>
<span class=linenos data-linenos="631 "></span>                    <span class=s2>&quot;ChestCT&quot;</span><span class=p>,</span>
<span class=linenos data-linenos="632 "></span>                    <span class=s2>&quot;Hand&quot;</span><span class=p>,</span>
<span class=linenos data-linenos="633 "></span>                    <span class=s2>&quot;HeadCT&quot;</span><span class=p>,</span>
<span class=linenos data-linenos="634 "></span>                <span class=p>]</span>
<span class=linenos data-linenos="635 "></span>            <span class=p>]</span>
<span class=linenos data-linenos="636 "></span>        <span class=p>):</span>
<span class=linenos data-linenos="637 "></span>            <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>MEDNIST</span>
<span class=linenos data-linenos="638 "></span>        <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="639 "></span>            <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>IMAGES</span>
<span class=linenos data-linenos="640 "></span>    <span class=k>elif</span> <span class=n>dataset</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;MNIST&quot;</span><span class=p>:</span>
<span class=linenos data-linenos="641 "></span>        <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>DEFAULT</span>
<span class=linenos data-linenos="642 "></span>    <span class=n>msg</span> <span class=o>=</span> <span class=p>(</span>
<span class=linenos data-linenos="643 "></span>        <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB615</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Trying to infer dataset type of </span><span class=si>{</span><span class=n>dataset</span><span class=si>}</span><span class=s2> is not supported &quot;</span>
<span class=linenos data-linenos="644 "></span>        <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;for datasets of type </span><span class=si>{</span><span class=n>dataset</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__qualname__</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="645 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="646 "></span>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="647 "></span>    <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlan.serialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">serialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>serialize</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Serializes the class in a format similar to json.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title=typing.Tuple href=https://docs.python.org/3/library/typing.html#typing.Tuple>Tuple</a>[<a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a>, <a class="autorefs autorefs-external" title=typing.List href=https://docs.python.org/3/library/typing.html#typing.List>List</a>]</code> </td> <td> <div class=doc-md-description> <p>a tuple sufficient for reconstructing the DataLoading plan. It includes: - a dictionary of key-value pairs with the <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingPlan>DataLoadingPlan</a> parameters. - a list of dict containing the data for reconstruction all the DataLoadingBlock of the <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingPlan>DataLoadingPlan</a></p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="535 "></span><span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=n>List</span><span class=p>]:</span>
<span class=linenos data-linenos="536 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Serializes the class in a format similar to json.</span>
<span class=linenos data-linenos="537 "></span>
<span class=linenos data-linenos="538 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="539 "></span><span class=sd>        a tuple sufficient for reconstructing the DataLoading plan. It includes:</span>
<span class=linenos data-linenos="540 "></span><span class=sd>            - a dictionary of key-value pairs with the</span>
<span class=linenos data-linenos="541 "></span><span class=sd>            [DataLoadingPlan][fedbiomed.common.dataloadingplan.DataLoadingPlan] parameters.</span>
<span class=linenos data-linenos="542 "></span><span class=sd>            - a list of dict containing the data for reconstruction all the DataLoadingBlock</span>
<span class=linenos data-linenos="543 "></span><span class=sd>                of the [DataLoadingPlan][fedbiomed.common.dataloadingplan.DataLoadingPlan]</span>
<span class=linenos data-linenos="544 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="545 "></span>    <span class=k>return</span> <span class=nb>dict</span><span class=p>(</span>
<span class=linenos data-linenos="546 "></span>        <span class=n>dlp_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>dlp_id</span><span class=p>,</span>
<span class=linenos data-linenos="547 "></span>        <span class=n>dlp_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>desc</span><span class=p>,</span>
<span class=linenos data-linenos="548 "></span>        <span class=n>target_dataset_type</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>target_dataset_type</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
<span class=linenos data-linenos="549 "></span>        <span class=n>loading_blocks</span><span class=o>=</span><span class=p>{</span>
<span class=linenos data-linenos="550 "></span>            <span class=n>key</span><span class=o>.</span><span class=n>value</span><span class=p>:</span> <span class=n>dlb</span><span class=o>.</span><span class=n>get_serialization_id</span><span class=p>()</span> <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>dlb</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
<span class=linenos data-linenos="551 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="552 "></span>        <span class=n>key_paths</span><span class=o>=</span><span class=p>{</span>
<span class=linenos data-linenos="553 "></span>            <span class=n>key</span><span class=o>.</span><span class=n>value</span><span class=p>:</span> <span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>key</span><span class=o>.</span><span class=vm>__module__</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>key</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__qualname__</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="554 "></span>            <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
<span class=linenos data-linenos="555 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="556 "></span>    <span class=p>),</span> <span class=p>[</span><span class=n>dlb</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span> <span class=k>for</span> <span class=n>dlb</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>values</span><span class=p>()]</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.dataloadingplan.DataLoadingPlanMixin class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DataLoadingPlanMixin</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DataLoadingPlanMixin</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Utility class to enable DLP functionality in a dataset.</p> <p>Any Dataset class that inherits from [DataLoadingPlanMixin] will have the basic tools necessary to support a <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingPlan>DataLoadingPlan</a>. Typically, the logic of each specific DataLoadingBlock in the <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingPlan>DataLoadingPlan</a> will be implemented in the form of hooks that are called within the Dataset's implementation using the helper function apply_dlb defined below.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="660 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="661 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.dataloadingplan.DataLoadingPlanMixin-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlanMixin.apply_dlb class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">apply_dlb</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>apply_dlb</span><span class=p>(</span><span class=n>default_ret_value</span><span class=p>,</span> <span class=n>dlb_key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Apply one DataLoadingBlock identified by its key.</p> <p>Note that we want to easily support the case where the DataLoadingPlan is not activated, or the requested loading block is not contained in the DataLoadingPlan. This is achieved by providing a default return value to be returned when the above conditions are met. Hence, most of the calls to apply_dlb will look like this: <div class=highlight><pre><span></span><code>value = self.apply_dlb(value, &#39;my-loading-block&#39;, my_apply_args)
</code></pre></div> This will ensure that value is not changed if the DataLoadingPlan is not active.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>default_ret_value</code></td> <td> <code><a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3/library/typing.html#typing.Any>Any</a></code> </td> <td> <div class=doc-md-description> <p>the value to be returned in case that the dlp functionality is not required</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>dlb_key</code></td> <td> <code><a class="autorefs autorefs-internal" title=fedbiomed.common.constants.DataLoadingBlockTypes href=../constants/#fedbiomed.common.constants.DataLoadingBlockTypes>DataLoadingBlockTypes</a></code> </td> <td> <div class=doc-md-description> <p>the key of the DataLoadingBlock to be applied</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>*args</code></td> <td> <code><a class="autorefs autorefs-external" title=typing.Optional href=https://docs.python.org/3/library/typing.html#typing.Optional>Optional</a>[<a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3/library/typing.html#typing.Any>Any</a>]</code> </td> <td> <div class=doc-md-description> <p>forwarded to the DataLoadingBlock's apply function</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> <code><a class="autorefs autorefs-external" title=typing.Optional href=https://docs.python.org/3/library/typing.html#typing.Optional>Optional</a>[<a class="autorefs autorefs-external" title=typing.Any href=https://docs.python.org/3/library/typing.html#typing.Any>Any</a>]</code> </td> <td> <div class=doc-md-description> <p>forwarded to the DataLoadingBlock's apply function</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p>Returns: the output of the DataLoadingBlock's apply function, or the default_ret_value when dlp is None or it does not contain the requested loading block</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="691 "></span><span class=k>def</span> <span class=nf>apply_dlb</span><span class=p>(</span>
<span class=linenos data-linenos="692 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="693 "></span>    <span class=n>default_ret_value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
<span class=linenos data-linenos="694 "></span>    <span class=n>dlb_key</span><span class=p>:</span> <span class=n>DataLoadingBlockTypes</span><span class=p>,</span>
<span class=linenos data-linenos="695 "></span>    <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>],</span>
<span class=linenos data-linenos="696 "></span>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>],</span>
<span class=linenos data-linenos="697 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
<span class=linenos data-linenos="698 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Apply one DataLoadingBlock identified by its key.</span>
<span class=linenos data-linenos="699 "></span>
<span class=linenos data-linenos="700 "></span><span class=sd>    Note that we want to easily support the case where the DataLoadingPlan</span>
<span class=linenos data-linenos="701 "></span><span class=sd>    is not activated, or the requested loading block is not contained in the</span>
<span class=linenos data-linenos="702 "></span><span class=sd>    DataLoadingPlan. This is achieved by providing a default return value</span>
<span class=linenos data-linenos="703 "></span><span class=sd>    to be returned when the above conditions are met. Hence, most of the</span>
<span class=linenos data-linenos="704 "></span><span class=sd>    calls to apply_dlb will look like this:</span>
<span class=linenos data-linenos="705 "></span><span class=sd>    ```</span>
<span class=linenos data-linenos="706 "></span><span class=sd>    value = self.apply_dlb(value, &#39;my-loading-block&#39;, my_apply_args)</span>
<span class=linenos data-linenos="707 "></span><span class=sd>    ```</span>
<span class=linenos data-linenos="708 "></span><span class=sd>    This will ensure that value is not changed if the DataLoadingPlan is</span>
<span class=linenos data-linenos="709 "></span><span class=sd>    not active.</span>
<span class=linenos data-linenos="710 "></span>
<span class=linenos data-linenos="711 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="712 "></span><span class=sd>        default_ret_value: the value to be returned in case that the dlp</span>
<span class=linenos data-linenos="713 "></span><span class=sd>            functionality is not required</span>
<span class=linenos data-linenos="714 "></span><span class=sd>        dlb_key: the key of the DataLoadingBlock to be applied</span>
<span class=linenos data-linenos="715 "></span><span class=sd>        *args: forwarded to the DataLoadingBlock&#39;s apply function</span>
<span class=linenos data-linenos="716 "></span><span class=sd>        **kwargs: forwarded to the DataLoadingBlock&#39;s apply function</span>
<span class=linenos data-linenos="717 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="718 "></span><span class=sd>        the output of the DataLoadingBlock&#39;s apply function, or</span>
<span class=linenos data-linenos="719 "></span><span class=sd>            the default_ret_value when dlp is None or it does not contain</span>
<span class=linenos data-linenos="720 "></span><span class=sd>            the requested loading block</span>
<span class=linenos data-linenos="721 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="722 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>dlb_key</span><span class=p>,</span> <span class=n>DataLoadingBlockTypes</span><span class=p>):</span>
<span class=linenos data-linenos="723 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span>
<span class=linenos data-linenos="724 "></span>            <span class=sa>f</span><span class=s2>&quot;Key </span><span class=si>{</span><span class=n>dlb_key</span><span class=si>}</span><span class=s2> is not of enum type DataLoadingBlockTypes&quot;</span>
<span class=linenos data-linenos="725 "></span>            <span class=sa>f</span><span class=s2>&quot; in DataLoadingPlanMixin.apply_dlb&quot;</span>
<span class=linenos data-linenos="726 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="727 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>dlb_key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span><span class=p>:</span>
<span class=linenos data-linenos="728 "></span>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span><span class=p>[</span><span class=n>dlb_key</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=linenos data-linenos="729 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="730 "></span>        <span class=k>return</span> <span class=n>default_ret_value</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlanMixin.clear_dlp class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">clear_dlp</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>clear_dlp</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="688 "></span><span class=k>def</span> <span class=nf>clear_dlp</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="689 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.DataLoadingPlanMixin.set_dlp class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">set_dlp</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>set_dlp</span><span class=p>(</span><span class=n>dlp</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sets the dlp if the target dataset type is appropriate</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="663 "></span><span class=k>def</span> <span class=nf>set_dlp</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dlp</span><span class=p>:</span> <span class=n>DataLoadingPlan</span><span class=p>):</span>
<span class=linenos data-linenos="664 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Sets the dlp if the target dataset type is appropriate&quot;&quot;&quot;</span>
<span class=linenos data-linenos="665 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>dlp</span><span class=p>,</span> <span class=n>DataLoadingPlan</span><span class=p>):</span>
<span class=linenos data-linenos="666 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=p>(</span>
<span class=linenos data-linenos="667 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB615</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Trying to set a DataLoadingPlan but the argument is of type &quot;</span>
<span class=linenos data-linenos="668 "></span>            <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>dlp</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="669 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="670 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="671 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="672 "></span>
<span class=linenos data-linenos="673 "></span>    <span class=n>dataset_type</span> <span class=o>=</span> <span class=n>DataLoadingPlan</span><span class=o>.</span><span class=n>infer_dataset_type</span><span class=p>(</span>
<span class=linenos data-linenos="674 "></span>        <span class=bp>self</span>
<span class=linenos data-linenos="675 "></span>    <span class=p>)</span>  <span class=c1># `self` here will refer to the Dataset instance</span>
<span class=linenos data-linenos="676 "></span>    <span class=k>if</span> <span class=p>(</span>
<span class=linenos data-linenos="677 "></span>        <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>!=</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>NONE</span>
<span class=linenos data-linenos="678 "></span>        <span class=ow>and</span> <span class=n>dataset_type</span> <span class=o>!=</span> <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span>
<span class=linenos data-linenos="679 "></span>    <span class=p>):</span>
<span class=linenos data-linenos="680 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span>
<span class=linenos data-linenos="681 "></span>            <span class=sa>f</span><span class=s2>&quot;Trying to set </span><span class=si>{</span><span class=n>dlp</span><span class=si>}</span><span class=s2> on dataset of type </span><span class=si>{</span><span class=n>dataset_type</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> but &quot;</span>
<span class=linenos data-linenos="682 "></span>            <span class=sa>f</span><span class=s2>&quot;the target type is </span><span class=si>{</span><span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="683 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="684 "></span>    <span class=k>elif</span> <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>==</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>NONE</span><span class=p>:</span>
<span class=linenos data-linenos="685 "></span>        <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>dataset_type</span>
<span class=linenos data-linenos="686 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=o>=</span> <span class=n>dlp</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.dataloadingplan.MapperBlock class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">MapperBlock</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>MapperBlock</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title=fedbiomed.common.dataloadingplan._data_loading_plan.DataLoadingBlock href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a></code></p> <p>A <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> for mapping values.</p> <p>This <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> can be used whenever an "indirect mapping" is needed. For example, it can be used to implement a correspondence between a set of "logical" abstract names and a set of folder names on the filesystem.</p> <p>The apply function of this <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> takes a "key" as input (a str) and returns the mapped value corresponding to map[key]. Note that while the constructor of this class sets a value for type_id, developers are recommended to set a more meaningful value that better speaks to their application.</p> <p>Multiple instances of this loading_block may be used in the same DataLoadingPlan, provided that they are given different type_id via the constructor.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="436 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="437 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>MapperBlock</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<span class=linenos data-linenos="438 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>map</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="439 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>(</span>
<span class=linenos data-linenos="440 "></span>        <span class=n>MapperBlock</span><span class=o>.</span><span class=n>_extra_validation_scheme</span><span class=p>()</span>
<span class=linenos data-linenos="441 "></span>    <span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.dataloadingplan.MapperBlock-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.dataloadingplan.MapperBlock.map class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">map</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nb>map</span> <span class=o>=</span> <span class=p>{}</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.common.dataloadingplan.MapperBlock-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.MapperBlock.apply class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">apply</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>apply</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the value mapped to the key, if it exists.</p> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title=fedbiomed.common.exceptions.FedbiomedLoadingBlockError href=../exceptions/#fedbiomed.common.exceptions.FedbiomedLoadingBlockError>FedbiomedLoadingBlockError</a></code> </td> <td> <div class=doc-md-description> <p>if map is not a dict or the key does not exist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="467 "></span><span class=k>def</span> <span class=nf>apply</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=linenos data-linenos="468 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the value mapped to the key, if it exists.</span>
<span class=linenos data-linenos="469 "></span>
<span class=linenos data-linenos="470 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="471 "></span><span class=sd>        FedbiomedLoadingBlockError: if map is not a dict or the key does not exist.</span>
<span class=linenos data-linenos="472 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="473 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)</span> <span class=ow>or</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>:</span>
<span class=linenos data-linenos="474 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Mapper block error: no key &#39;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#39; in mapping dictionary&quot;</span>
<span class=linenos data-linenos="475 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="476 "></span>        <span class=k>raise</span> <span class=n>FedbiomedLoadingBlockError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="477 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.MapperBlock.deserialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">deserialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>deserialize</span><span class=p>(</span><span class=n>load_from</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reconstruct the <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a> from a serialized version.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>load_from</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary as obtained by the serialize function.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: the self instance</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="454 "></span><span class=k>def</span> <span class=nf>deserialize</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>load_from</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DataLoadingBlock</span><span class=p>:</span>
<span class=linenos data-linenos="455 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reconstruct the [DataLoadingBlock][fedbiomed.common.dataloadingplan.DataLoadingBlock]</span>
<span class=linenos data-linenos="456 "></span><span class=sd>    from a serialized version.</span>
<span class=linenos data-linenos="457 "></span>
<span class=linenos data-linenos="458 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="459 "></span><span class=sd>        load_from (dict): a dictionary as obtained by the serialize function.</span>
<span class=linenos data-linenos="460 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="461 "></span><span class=sd>        the self instance</span>
<span class=linenos data-linenos="462 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="463 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>MapperBlock</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>deserialize</span><span class=p>(</span><span class=n>load_from</span><span class=p>)</span>
<span class=linenos data-linenos="464 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>map</span> <span class=o>=</span> <span class=n>load_from</span><span class=p>[</span><span class=s2>&quot;map&quot;</span><span class=p>]</span>
<span class=linenos data-linenos="465 "></span>    <span class=k>return</span> <span class=bp>self</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.MapperBlock.serialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">serialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>serialize</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Serializes the class in a format similar to json.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of key-value pairs sufficient for reconstructing</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>the <a class="autorefs autorefs-internal" href=#fedbiomed.common.dataloadingplan.DataLoadingBlock>DataLoadingBlock</a>.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="443 "></span><span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="444 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Serializes the class in a format similar to json.</span>
<span class=linenos data-linenos="445 "></span>
<span class=linenos data-linenos="446 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="447 "></span><span class=sd>        a dictionary of key-value pairs sufficient for reconstructing</span>
<span class=linenos data-linenos="448 "></span><span class=sd>        the [DataLoadingBlock][fedbiomed.common.dataloadingplan.DataLoadingBlock].</span>
<span class=linenos data-linenos="449 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="450 "></span>    <span class=n>ret</span> <span class=o>=</span> <span class=nb>super</span><span class=p>(</span><span class=n>MapperBlock</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span>
<span class=linenos data-linenos="451 "></span>    <span class=n>ret</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s2>&quot;map&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>})</span>
<span class=linenos data-linenos="452 "></span>    <span class=k>return</span> <span class=n>ret</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.dataloadingplan.SerializationValidation class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">SerializationValidation</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>SerializationValidation</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Provide Validation capabilities for serializing/deserializing a [DataLoadingBlock] or [DataLoadingPlan].</p> <p>When a developer inherits from [DataLoadingBlock] to define a custom loading block, they are required to call the <code>_serialization_validator.update_validation_scheme</code> function with a dictionary argument containing the rules to validate all the additional fields that will be used in the serialization of their loading block.</p> <p>These rules must follow the syntax explained in the <a class="autorefs autorefs-internal" href=../validator/#fedbiomed.common.validator.SchemeValidator>SchemeValidator</a> class.</p> <p>For example <div class=highlight><pre><span></span><code>    <span class=k>class</span> <span class=nc>MyLoadingBlock</span><span class=p>(</span><span class=n>DataLoadingBlock</span><span class=p>):</span>
        <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>my_custom_data</span> <span class=o>=</span> <span class=p>{}</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>({</span>
                <span class=s1>&#39;custom_data&#39;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=o>...</span><span class=n>any</span> <span class=n>other</span> <span class=n>rules</span><span class=p>],</span>
                    <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span>
                <span class=p>}</span>
            <span class=p>})</span>
        <span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
            <span class=n>serialized</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span>
            <span class=n>serialized</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s1>&#39;custom_data&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>my_custom_data</span><span class=p>})</span>
            <span class=k>return</span> <span class=n>serialized</span>
</code></pre></div></p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title=fedbiomed.common.dataloadingplan.SerializationValidation._validation_scheme>_validation_scheme</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(dict) an extensible set of rules to validate the DataLoadingBlock metadata.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="61 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="62 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_validation_scheme</span> <span class=o>=</span> <span class=p>{}</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.dataloadingplan.SerializationValidation-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.SerializationValidation.dlb_default_scheme class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">dlb_default_scheme</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>dlb_default_scheme</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>The dictionary of default validation rules for a serialized [DataLoadingBlock].</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="232 "></span><span class=nd>@classmethod</span>
<span class=linenos data-linenos="233 "></span><span class=k>def</span> <span class=nf>dlb_default_scheme</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos="234 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;The dictionary of default validation rules for a serialized [DataLoadingBlock].&quot;&quot;&quot;</span>
<span class=linenos data-linenos="235 "></span>    <span class=k>return</span> <span class=p>{</span>
<span class=linenos data-linenos="236 "></span>        <span class=s2>&quot;loading_block_class&quot;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="237 "></span>            <span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_identifier_validation_hook</span><span class=p>],</span>
<span class=linenos data-linenos="238 "></span>            <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="239 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="240 "></span>        <span class=s2>&quot;loading_block_module&quot;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="241 "></span>            <span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_identifier_validation_hook</span><span class=p>],</span>
<span class=linenos data-linenos="242 "></span>            <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="243 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="244 "></span>        <span class=s2>&quot;dlb_id&quot;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="245 "></span>            <span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_serial_id_validation_hook</span><span class=p>],</span>
<span class=linenos data-linenos="246 "></span>            <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="247 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="248 "></span>    <span class=p>}</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.SerializationValidation.dlp_default_scheme class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">dlp_default_scheme</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>dlp_default_scheme</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>The dictionary of default validation rules for a serialized [DataLoadingPlan].</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="250 "></span><span class=nd>@classmethod</span>
<span class=linenos data-linenos="251 "></span><span class=k>def</span> <span class=nf>dlp_default_scheme</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos="252 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;The dictionary of default validation rules for a serialized [DataLoadingPlan].&quot;&quot;&quot;</span>
<span class=linenos data-linenos="253 "></span>    <span class=k>return</span> <span class=p>{</span>
<span class=linenos data-linenos="254 "></span>        <span class=s2>&quot;dlp_id&quot;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="255 "></span>            <span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>],</span>
<span class=linenos data-linenos="256 "></span>            <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="257 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="258 "></span>        <span class=s2>&quot;dlp_name&quot;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="259 "></span>            <span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>],</span>
<span class=linenos data-linenos="260 "></span>            <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="261 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="262 "></span>        <span class=s2>&quot;target_dataset_type&quot;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="263 "></span>            <span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_target_dataset_type_validator</span><span class=p>],</span>
<span class=linenos data-linenos="264 "></span>            <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="265 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="266 "></span>        <span class=s2>&quot;loading_blocks&quot;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="267 "></span>            <span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_loading_blocks_types_validator</span><span class=p>],</span>
<span class=linenos data-linenos="268 "></span>            <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="269 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="270 "></span>        <span class=s2>&quot;key_paths&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;rules&quot;</span><span class=p>:</span> <span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_key_paths_validator</span><span class=p>],</span> <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>},</span>
<span class=linenos data-linenos="271 "></span>    <span class=p>}</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.SerializationValidation.update_validation_scheme class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">update_validation_scheme</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>update_validation_scheme</span><span class=p>(</span><span class=n>new_scheme</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Updates the validation scheme.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>new_scheme</code></td> <td> <code><a class="autorefs autorefs-external" href=https://docs.python.org/3/library/stdtypes.html#dict>dict</a></code> </td> <td> <div class=doc-md-description> <p>(dict) new dict of rules</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="103 "></span><span class=k>def</span> <span class=nf>update_validation_scheme</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>new_scheme</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="104 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Updates the validation scheme.</span>
<span class=linenos data-linenos="105 "></span>
<span class=linenos data-linenos="106 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="107 "></span><span class=sd>        new_scheme: (dict) new dict of rules</span>
<span class=linenos data-linenos="108 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="109 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_validation_scheme</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>new_scheme</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.dataloadingplan.SerializationValidation.validate class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">validate</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>validate</span><span class=p>(</span><span class=n>dlb_metadata</span><span class=p>,</span> <span class=n>exception_type</span><span class=p>,</span> <span class=n>only_required</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Validate a dict of dlb_metadata according to the _validation_scheme.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dlb_metadata (dict) </code></td> <td> </td> <td> <div class=doc-md-description> <p>the [DataLoadingBlock] metadata, as returned by serialize or as loaded from the node database.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>exception_type</code></td> <td> <code><a class="autorefs autorefs-external" title=typing.Type href=https://docs.python.org/3/library/typing.html#typing.Type>Type</a>[<a class="autorefs autorefs-internal" title=fedbiomed.common.exceptions.FedbiomedError href=../exceptions/#fedbiomed.common.exceptions.FedbiomedError>FedbiomedError</a>]</code> </td> <td> <div class=doc-md-description> <p>the type of the exception to be raised when validation fails.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>only_required (bool) </code></td> <td> </td> <td> <div class=doc-md-description> <p>see SchemeValidator.populate_with_defaults</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Raises: exception_type: if the validation fails.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/dataloadingplan/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 64 "></span><span class=k>def</span> <span class=nf>validate</span><span class=p>(</span>
<span class=linenos data-linenos=" 65 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos=" 66 "></span>    <span class=n>dlb_metadata</span><span class=p>:</span> <span class=n>Dict</span><span class=p>,</span>
<span class=linenos data-linenos=" 67 "></span>    <span class=n>exception_type</span><span class=p>:</span> <span class=n>Type</span><span class=p>[</span><span class=n>FedbiomedError</span><span class=p>],</span>
<span class=linenos data-linenos=" 68 "></span>    <span class=n>only_required</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos=" 69 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos=" 70 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate a dict of dlb_metadata according to the _validation_scheme.</span>
<span class=linenos data-linenos=" 71 "></span>
<span class=linenos data-linenos=" 72 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos=" 73 "></span><span class=sd>        dlb_metadata (dict) : the [DataLoadingBlock] metadata, as returned by serialize or as loaded from the</span>
<span class=linenos data-linenos=" 74 "></span><span class=sd>            node database.</span>
<span class=linenos data-linenos=" 75 "></span><span class=sd>        exception_type (Type[FedbiomedError]): the type of the exception to be raised when validation fails.</span>
<span class=linenos data-linenos=" 76 "></span><span class=sd>        only_required (bool) : see SchemeValidator.populate_with_defaults</span>
<span class=linenos data-linenos=" 77 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos=" 78 "></span><span class=sd>        exception_type: if the validation fails.</span>
<span class=linenos data-linenos=" 79 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 80 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos=" 81 "></span>        <span class=n>sc</span> <span class=o>=</span> <span class=n>SchemeValidator</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_validation_scheme</span><span class=p>)</span>
<span class=linenos data-linenos=" 82 "></span>    <span class=k>except</span> <span class=n>RuleError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos=" 83 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span> <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos=" 84 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos=" 85 "></span>        <span class=k>raise</span> <span class=n>exception_type</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span> <span class=kn>from</span> <span class=nn>e</span>
<span class=linenos data-linenos=" 86 "></span>
<span class=linenos data-linenos=" 87 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos=" 88 "></span>        <span class=n>dlb_metadata</span> <span class=o>=</span> <span class=n>sc</span><span class=o>.</span><span class=n>populate_with_defaults</span><span class=p>(</span>
<span class=linenos data-linenos=" 89 "></span>            <span class=n>dlb_metadata</span><span class=p>,</span> <span class=n>only_required</span><span class=o>=</span><span class=n>only_required</span>
<span class=linenos data-linenos=" 90 "></span>        <span class=p>)</span>
<span class=linenos data-linenos=" 91 "></span>    <span class=k>except</span> <span class=n>ValidatorError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos=" 92 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span> <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos=" 93 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos=" 94 "></span>        <span class=k>raise</span> <span class=n>exception_type</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span> <span class=kn>from</span> <span class=nn>e</span>
<span class=linenos data-linenos=" 95 "></span>
<span class=linenos data-linenos=" 96 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos=" 97 "></span>        <span class=n>sc</span><span class=o>.</span><span class=n>validate</span><span class=p>(</span><span class=n>dlb_metadata</span><span class=p>)</span>
<span class=linenos data-linenos=" 98 "></span>    <span class=k>except</span> <span class=n>ValidateError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos=" 99 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span> <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="100 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="101 "></span>        <span class=k>raise</span> <span class=n>exception_type</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span> <span class=kn>from</span> <span class=nn>e</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan-classes class=md-nav__link> Classes </a> <nav class=toc-nav aria-label=Classes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock class=md-nav__link> DataLoadingBlock </a> <nav class=toc-nav aria-label=DataLoadingBlock> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock.apply class=md-nav__link> apply </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock.deserialize class=md-nav__link> deserialize </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock.get_serialization_id class=md-nav__link> get_serialization_id </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock.instantiate_class class=md-nav__link> instantiate_class </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock.instantiate_key class=md-nav__link> instantiate_key </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingBlock.serialize class=md-nav__link> serialize </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan class=md-nav__link> DataLoadingPlan </a> <nav class=toc-nav aria-label=DataLoadingPlan> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.desc class=md-nav__link> desc </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.dlp_id class=md-nav__link> dlp_id </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.target_dataset_type class=md-nav__link> target_dataset_type </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.deserialize class=md-nav__link> deserialize </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.infer_dataset_type class=md-nav__link> infer_dataset_type </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlan.serialize class=md-nav__link> serialize </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlanMixin class=md-nav__link> DataLoadingPlanMixin </a> <nav class=toc-nav aria-label=DataLoadingPlanMixin> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlanMixin-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlanMixin.apply_dlb class=md-nav__link> apply_dlb </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlanMixin.clear_dlp class=md-nav__link> clear_dlp </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.DataLoadingPlanMixin.set_dlp class=md-nav__link> set_dlp </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.MapperBlock class=md-nav__link> MapperBlock </a> <nav class=toc-nav aria-label=MapperBlock> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.MapperBlock-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.MapperBlock.map class=md-nav__link> map </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.MapperBlock-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.MapperBlock.apply class=md-nav__link> apply </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.MapperBlock.deserialize class=md-nav__link> deserialize </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.MapperBlock.serialize class=md-nav__link> serialize </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.SerializationValidation class=md-nav__link> SerializationValidation </a> <nav class=toc-nav aria-label=SerializationValidation> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.SerializationValidation-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.SerializationValidation.dlb_default_scheme class=md-nav__link> dlb_default_scheme </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.SerializationValidation.dlp_default_scheme class=md-nav__link> dlp_default_scheme </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.SerializationValidation.update_validation_scheme class=md-nav__link> update_validation_scheme </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.dataloadingplan.SerializationValidation.validate class=md-nav__link> validate </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed  2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../../assets/javascript/lunr.js></script> <script src=../../../../assets/javascript/theme.js></script> <!-- GitHub buttons --> <script async defer src=https://buttons.github.io/buttons.js></script> </body> </html>