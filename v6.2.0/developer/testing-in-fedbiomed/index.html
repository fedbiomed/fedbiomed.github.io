<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../versions.json";
      const search_worker_js = "../../assets/javascript/search-worker.js";
      const search_index_json = "../../search/search_index.json";
      const base_url = '../..';
    </script><!-- Site title --><title>Testing in Fed-BioMed - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../assets/_mkdocstrings.css rel=stylesheet><link href=../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../..>Home</a> </li> <li class> <a href=../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../#funding>Funding</a> </li> <li class> <a href=../../news/ >News</a> </li> <li class> <a href=../../#contributors>Contributors</a> </li> <li class> <a href=../../#users>Users</a> </li> <li class> <a href=../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../#citation>How to Cite Us</a> </li> <li class> <a href=../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../ > <img src=../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../assets/img/menu.svg> <img class=close style=display:none src=../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../..>Home</a> </li> <li class> <a href=../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../#funding>Funding</a> </li> <li class> <a href=../../news/ >News</a> </li> <li class> <a href=../../#contributors>Contributors</a> </li> <li class> <a href=../../#users>Users</a> </li> <li class> <a href=../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../#citation>How to Cite Us</a> </li> <li class> <a href=../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> <li class> <a href=../../getting-started/installation/ class>Installation</a> </li> <li class> <a href=../../getting-started/basic-example/ class>Basic Example</a> </li> <li class> <a href=../../getting-started/configuration/ class>Configuration</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../tutorials/pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../tutorials/pytorch/05_Transfer-learning_tutorial_usingDenseNet-121/ class>Transfer-learning in Fed-BioMed tutorial</a> </li> <li class> <a href=../../tutorials/pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/flamby/ class>Introduction</a> </li> <li class> <a href=../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../../tutorials/concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Datasets <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/datasets/ class>Introduction</a> </li> <li class> <a href=../../user-guide/datasets/default-datasets/ class>Default Datasets</a> </li> <li class> <a href=../../user-guide/datasets/image-dataset/ class>Image Datasets</a> </li> <li class> <a href=../../user-guide/datasets/tabular-dataset/ class>Tabular Datasets</a> </li> <li class> <a href=../../user-guide/datasets/medical-folder-dataset/ class>Medical Datasets</a> </li> <li class> <a href=../../user-guide/datasets/custom-dataset/ class>Adding your Custom Dataset</a> </li> <li class> <a href=../../user-guide/datasets/native-dataset/ class>Adding a Native Dataset</a> </li> <li class> <a href=../../user-guide/datasets/applying-transformations/ class>Applying Transformations</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../user-guide/deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../user-guide/deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../user-guide/deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../user-guide/nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../user-guide/nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../user-guide/nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../user-guide/nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../user-guide/researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../user-guide/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../user-guide/researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../user-guide/researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../user-guide/researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../user-guide/researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../user-guide/advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../user-guide/secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../user-guide/secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../user-guide/secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../api/common/certificate_manager/ class>Certificate Manager</a> </li> <li class> <a href=../api/common/cli/ class>CLI</a> </li> <li class> <a href=../api/common/config/ class>Config</a> </li> <li class> <a href=../api/common/constants/ class>Constants</a> </li> <li class> <a class href=../api/common/data.md>Data</a> </li> <li class> <a href=../api/common/db/ class>DB</a> </li> <li class> <a href=../api/common/exceptions/ class>Exceptions</a> </li> <li class> <a href=../api/common/ipython/ class>IPython</a> </li> <li class> <a href=../api/common/json/ class>Json</a> </li> <li class> <a href=../api/common/logger/ class>Logger</a> </li> <li class> <a href=../api/common/message/ class>Message</a> </li> <li class> <a href=../api/common/metrics/ class>Metrics</a> </li> <li class> <a href=../api/common/models/ class>Model</a> </li> <li class> <a class href=../api/common/mpc_controller.md>MPC controller</a> </li> <li class> <a href=../api/common/optimizers/ class>Optimizers</a> </li> <li class> <a href=../api/common/privacy/ class>Privacy</a> </li> <li class> <a href=../api/common/secagg/ class>Secagg</a> </li> <li class> <a href=../api/common/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../api/common/serializer/ class>Serializer</a> </li> <li class> <a href=../api/common/singleton/ class>Singleton</a> </li> <li class> <a href=../api/common/synchro/ class>Synchro</a> </li> <li class> <a href=../api/common/tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../api/common/training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../api/common/training_args/ class>TrainingArgs</a> </li> <li class> <a href=../api/common/utils/ class>Utils</a> </li> <li class> <a href=../api/common/validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../api/node/cli/ class>CLI</a> </li> <li class> <a href=../api/node/cli_utils/ class>CLI Utils</a> </li> <li class> <a href=../api/node/config/ class>Config</a> </li> <li class> <a href=../api/node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../api/node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../api/node/node/ class>Node</a> </li> <li class> <a href=../api/node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../api/node/requests/ class>Requests</a> </li> <li class> <a href=../api/node/round/ class>Round</a> </li> <li class> <a href=../api/node/secagg/ class>Secagg</a> </li> <li class> <a href=../api/node/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../api/node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../api/researcher/aggregators/ class>Aggregators</a> </li> <li class> <a href=../api/researcher/cli/ class>CLI</a> </li> <li class> <a href=../api/researcher/config/ class>Config</a> </li> <li class> <a href=../api/researcher/datasets/ class>Datasets</a> </li> <li class> <a href=../api/researcher/federated_workflows/ class>Federated Workflows</a> </li> <li class> <a href=../api/researcher/filetools/ class>Filetools</a> </li> <li class> <a href=../api/researcher/jobs/ class>Jobs</a> </li> <li class> <a href=../api/researcher/monitor/ class>Monitor</a> </li> <li class> <a href=../api/researcher/node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../api/researcher/requests/ class>Requests</a> </li> <li class> <a href=../api/researcher/secagg/ class>Secagg</a> </li> <li class> <a href=../api/researcher/strategies/ class>Strategies</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Transport <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../api/transport/client/ class>Client</a> </li> <li class> <a href=../api/transport/controller/ class>Controller</a> </li> <li class> <a href=../api/transport/node_agent/ class>NodeAgent</a> </li> <li class> <a href=../api/transport/server/ class>Server</a> </li> </ul> </li> </ul> </li> <li class> <a href=../usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../ci/ class>Continuous Integration</a> </li> <li class> <a href=../definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../development-environment/ class>Development Environment</a> </li> <li class=current> <a href=./ class="link current">Testing in Fed-BioMed</a> </li> <li class> <a href=../messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> <li class> <a href=../../support/troubleshooting/ class>FAQ & Troubleshooting</a> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <article> <h1 id=testing-in-fed-biomed>Testing in Fed-BioMed</h1> <h2 id=unit-tests>Unit Tests</h2> <p>Unit tests are designed to test smaller code units that make up larger solutions. These tests focus on isolated parts of the system and should not depend on external components such as third-party libraries or database connections. Meaning that third party library shouldn't cause failure in tests or shouldn't be tested. </p> <p>When writing unit tests, it is important to consider the following aspects:</p> <ul> <li>Reliance on file system operations.</li> <li>Mocking remote API calls or database connections.</li> <li>Minimizing dependence on third-party libraries.</li> <li>Keeping the tests isolated from the overall system.</li> <li>Focusing on testing smaller unit functions within the code.</li> </ul> <p>In unit-testing the focus is to find the bug that can be found at small software pieces in isolation. There is no definitive answer as to whether the code should be completely isolated from the system in unit tests. In some cases, it may be beneficial to mock objects such as databases, depending on the complexity and ease of mocking.</p> <p>Isolation from system means: Isolate from </p> <ul> <li>the database </li> <li>third party dependencies</li> <li>In complex cases: modules/classes within the library </li> <li>file system</li> <li>API calls</li> </ul> <p>It is important that test cases should be simple and focus on testing a single method/function. Unit tests should not test the integration of different modules.</p> <p>Please find the following guidelines to pay attention to while writing unit tests:</p> <ol> <li>Mock file system operations.</li> <li>Tests should not depend on the system.</li> <li>Tests should focus on smaller units and only validate the result of the function being tested.</li> <li>Test the result of the method/function without getting lost in implementation details.</li> <li>Make sure abstract classes are tested separately by mocking abstract methods.</li> <li>Test the methods that inherit from base/abstract classes, but not the ones that are already tested in the base/abstract class.</li> <li>Pay attention to testing the functionality of the wrapper class instead of testing the integration of wrapped classes.</li> <li>Try to use Fake classes as little as possible. Follow the guide in section 8 to decide if a Fake class is required.</li> <li>Mock complex classes to reduce complexity.</li> <li>Do not mock the methods of the class being tested unless you have to.</li> <li>Instead of mocking lower layer API mock the higher-level instance that is used by the class being tested.</li> <li>Write separate test cases for private methods if the method is complex and complicated to test through public methods</li> <li>Focus on what the function does while testing methods that receive generic data types as input.</li> <li>For methods that can take different data types as arguments, do not write additional tests with different data types if the function doesn't explicitly perform specific actions for those types.</li> <li>If your tests are difficult to write or complex, rethink the design of the class you're testing, and ensure that your implementation respects the SOLID principles.</li> <li>Please add a new unit tests if a new bug is discovered. </li> </ol> <h3 id=1-file-system-operations>1. File system operations</h3> <ul> <li>Tests should not fail due to file system errors. Therefore, use mocking for write/read operations.</li> <li>Tests should trust that the module used for write/read operations has been tested and works correctly, as long as correct input values are provided. Therefore, tests should only verify that <code>write</code> or <code>read</code> methods are called with the correct arguments.</li> </ul> <h3 id=2-system-dependent-tests>2. System-dependent tests</h3> <ul> <li>Avoid testing data that depends on the system, such as process time, file size, or permissions.</li> <li>System-dependent tests also include testing GPU or CPU functionality.<ul> <li>Avoid writing tests that compare the number of processes or CPU count.</li> <li>If there are functions that require testing GPU functionality, implement those tests as integration tests.</li> </ul> </li> </ul> <h3 id=3-focus-on-smaller-units>3. Focus on smaller units</h3> <ul> <li>Each test function should test a single method of a class, function, or module.</li> <li>Test functions can execute other methods of the class being tested or other functions. However, the purpose should be to prepare the test state rather than testing those executions.</li> <li>If the method being tested executes private members of the class, please follow the section <a href=#12-private-methods-of-a-class>Private methods of a class</a>.</li> </ul> <h3 id=4-focus-on-intention-more-than-implementation>4. Focus on intention more than implementation</h3> <ul> <li>Focus on the expected execution outcome of the method being tested.</li> <li>Validate the result of the function/method rather than the underlying implementation details.</li> <li>The purpose of the test should be to verify if the outcome is as expected given the inputs.</li> </ul> <h3 id=5-testing-mix-in-baseabstract-class>5. Testing Mix-in Base/Abstract Class</h3> <ul> <li>Test abstract/base classes by mocking abstract methods: <div class=highlight><pre><span></span><code><span class=bp>self</span><span class=o>.</span><span class=n>abstract_methods_patcher</span> <span class=o>=</span> <span class=n>patch</span><span class=o>.</span><span class=n>multiple</span><span class=p>(</span><span class=n>AbstractClass</span><span class=p>,</span> <span class=n>__abstractmethods__</span><span class=o>=</span><span class=nb>set</span><span class=p>())</span>
</code></pre></div></li> <li>Test the remaining methods.</li> <li>If there are remaining private methods, please test them explicitly rather than testing through the class that implements the abstract/base class. This avoids duplicating tests among the classes that inherit from the abstract/base class being tested.</li> </ul> <h3 id=6-testing-classes-that-implement-baseabstract-classes>6. Testing classes that implement Base/Abstract classes</h3> <ul> <li>Following item 5, avoid testing the methods that are already tested in the TestCase of the abstract/base class.</li> <li>Test the methods that are overwritten by the class being tested.</li> <li>When testing extended methods, please follow the principles in <a href=#3-focus-on-smaller-units>Item 3 - Focus on smaller units</a>.</li> </ul> <h3 id=7-testing-wrappers>7. Testing Wrappers</h3> <h4 id=71-wrappers-that-wrap-objects-with-a-common-interface>7.1 Wrappers that wrap objects with a COMMON interface</h4> <ul> <li>Focus on wrapper methods rather than the wrapped objects. As objects that can be wrapped by the wrapper have a common interface, use a single object instead of applying the same test for each of them.</li> <li>If the wrapped object is complex and requires different states, consider creating a fake object, and follow the section <a href=#8-using-fake-objects-classes>Using Fake objects/classes</a> to determine if a fake object is necessary.</li> </ul> <h4 id=72-wrappers-that-wrap-objects-with-different-interfaces>7.2 Wrappers that wrap objects with DIFFERENT interfaces</h4> <ul> <li>If the wrapper wraps different objects with different interfaces (methods), you can write tests for each wrapped object.</li> <li>Follow the same logic as in "7.1" for mocking or using fake objects.</li> </ul> <h3 id=8-using-fake-or-stub-objectsclasses>8. Using Fake or Stub objects/classes</h3> <ul> <li>Fake or Stub objects require coherency between the real implementation and the fake one. Therefore, avoid using fake objects as much as possible because they can be difficult to maintain.</li> <li>Please answer the following questions before deciding to create a fake class:<ul> <li> <ol> <li>Is the object passed to a function or class as an argument?</li> </ol> </li> <li> <ol> <li>Is the object dependent on the system or external actions (e.g., database)?</li> </ol> </li> <li> <ol> <li>Does the object have too many dependencies on other modules of the library?</li> </ol> </li> </ul> </li> <li>If 1. and 2. or 3. are "yes," feel free to create a fake object.</li> <li>If 1. is "no" and the others are "yes," consider using mocking instead of fake or stub objects.</li> </ul> <h3 id=9-using-mocked-objects>9. Using Mocked objects</h3> <ul> <li>Mocking helps isolate the test from the environment and easily test different scenarios of a single function.</li> <li>Pay attention to using the <code>spec</code>, <code>spec_set</code>, or <code>auto_spec</code> functionalities of <code>unittest.mock.Mock</code>. These functionalities help mock objects that respect the specifications of the real class, so the mock will be updated if an API of the real class changes.</li> <li> <p>Using too many mock objects may not be a good idea because:</p> <ul> <li>It may increase the complexity of the test function.</li> <li>It may isolate the test too much from the remaining parts of the software, resulting in invalid tests.</li> </ul> </li> <li> <p>Before deciding to mock an object, please answer the following questions:</p> <ul> <li> <ol> <li>Is the object instantiated or used directly within the module or class being tested?</li> </ol> </li> <li> <ol> <li>Is the object dependent on the system or external actions (e.g., database, network etc)?</li> </ol> </li> <li> <ol> <li>Does the object have too many dependencies on other modules of the library?</li> </ol> </li> <li> <ol> <li>Does the method being tested require many results or states of the object that needs to be mocked?</li> </ol> </li> <li> <ol> <li>Is mocking saving you a lot of time and reducing complexity?</li> </ol> </li> </ul> </li> <li> <p>If 1. is no and any other condition is yes, consider using a fake class.</p> </li> <li>If 1. is yes and any other condition is yes, consider using mocking. </li> <li>If mocking changes the intention of the test, try to find another solution besides mocking or using fake class.</li> </ul> <h3 id=10-avoid-mocking-the-methods-of-the-class-being-tested>10. Avoid mocking the methods of the class being tested</h3> <ul> <li>Please avoid mocking public/private methods of the class being tested.</li> <li>You can mock in some cases if you think that you have to mock it to reduce complexity. However, the need for mocking can be due to some design issues. Therefore, please make sure that the class being tested, or the test case is designed well. </li> </ul> <h3 id=11-leveling-mocks>11. Leveling Mocks</h3> <ul> <li>The classes being tested may require instantiating other instances that contain methods that need to be mocked, such as a database connection or file read/write operation. In such scenarios, instead of mocking the built-in read/write methods, mock the higher-level instance that is used by the class being tested.</li> </ul> <h3 id=12-private-methods-of-a-class>12. Private methods of a class</h3> <ul> <li>Write separate tests for private methods if it has complicated state preparation.</li> <li>For some cases, if a private method is not complex and easy to cover every line of code, you can test them through public method. However, there is no need to test for the second time through another public method if it is already tested once. </li> </ul> <h3 id=13-generic-classes-that-accept-different-data-types-eg-dict>13. Generic Classes that Accept Different Data Types (e.g., Dict)</h3> <ul> <li>When testing generic classes that can accept different data types, such as dictionaries containing different types of data, consider the following:<ul> <li>Test different data types if the behavior of the class depends on the specific data types.</li> <li>If the class uses another class to manage different data types, and that class has been tested, there is no need to test all possible combinations of data types.</li> </ul> </li> </ul> <h3 id=14-testing-different-methods-that-accept-different-data-types-for-a-single-argument>14. Testing Different Methods that Accept Different Data Types for a Single Argument</h3> <ul> <li>Test each data type separately (e.g., float, int) to cover all possible scenarios.</li> <li>IMPORTANT: If the behavior of the method is consistent across different data types, there is no need to test all combinations.</li> </ul> <h3 id=15-having-complex-unit-test-cases-in-the-end>15. Having complex unit test cases in the end</h3> <ul> <li>If unit tests require too much mocking and complexity, it is better to reconsider the design chosen for the class being tested. Following SOLID principles while designing a class or a module can help.<ul> <li>Single Responsibility Principle<ul> <li>A class should have only one reason to change.</li> </ul> </li> <li>Open-Closed Principle<ul> <li>Classes should be open for extension and closed to modification. Adding new functionality should not require modifying the existing code for the class, as it introduces potential bugs.</li> </ul> </li> <li>Liskov Substitution Principle<ul> <li>Subclasses should be substitutable for their base classes.</li> </ul> </li> <li>Interface Segregation Principle<ul> <li>Specific interfaces are better than one general-purpose interface.</li> </ul> </li> <li>Dependency Inversion Principle<ul> <li>Classes should depend on interfaces or abstract classes instead of concrete classes and functions.</li> </ul> </li> </ul> </li> </ul> <h3 id=16-learn-from-bugs>16. Learn from bugs</h3> <ul> <li>When a bug is discovered please consider adding a unit tests for it. However, if the bug can not be tested using unit tests please consider adding integration or end-to-end test. </li> </ul> <h2 id=integration-testing>Integration Testing</h2> <p>Integration testing involves testing the interaction between software modules. In the context of Fed-BioMed, integration testing can be performed on various integrated modules such as nodes, rounds, data loaders, training plans, models, optimizers, command-line interfaces (CLIs), dataset managers, model registration/approval components, and certificate registration components. The selection of integrated modules for testing depends on the logical integration of the system. </p> <ul> <li>Use database</li> <li>Write and read files from file system</li> <li>Rely on 3rd party libraries </li> </ul> <p>The environment and the API for integration tests are still in working process.</p> <h2 id=end-to-end-testing>End-to-End Testing</h2> <p>End-to-end testing focuses on testing the entire system or application as a whole, ensuring that all components work together correctly. In the context of Fed-BioMed, end-to-end testing would involve testing the complete workflow and functionalities of the collaborative learning framework, including data collection, model training, aggregation, and evaluation.</p> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#unit-tests class=md-nav__link> Unit Tests </a> <nav class=toc-nav aria-label="Unit Tests"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#1-file-system-operations class=md-nav__link> 1. File system operations </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#2-system-dependent-tests class=md-nav__link> 2. System-dependent tests </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#3-focus-on-smaller-units class=md-nav__link> 3. Focus on smaller units </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#4-focus-on-intention-more-than-implementation class=md-nav__link> 4. Focus on intention more than implementation </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#5-testing-mix-in-baseabstract-class class=md-nav__link> 5. Testing Mix-in Base/Abstract Class </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#6-testing-classes-that-implement-baseabstract-classes class=md-nav__link> 6. Testing classes that implement Base/Abstract classes </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#7-testing-wrappers class=md-nav__link> 7. Testing Wrappers </a> <nav class=toc-nav aria-label="7. Testing Wrappers"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#71-wrappers-that-wrap-objects-with-a-common-interface class=md-nav__link> 7.1 Wrappers that wrap objects with a COMMON interface </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#72-wrappers-that-wrap-objects-with-different-interfaces class=md-nav__link> 7.2 Wrappers that wrap objects with DIFFERENT interfaces </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#8-using-fake-or-stub-objectsclasses class=md-nav__link> 8. Using Fake or Stub objects/classes </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#9-using-mocked-objects class=md-nav__link> 9. Using Mocked objects </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#10-avoid-mocking-the-methods-of-the-class-being-tested class=md-nav__link> 10. Avoid mocking the methods of the class being tested </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#11-leveling-mocks class=md-nav__link> 11. Leveling Mocks </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#12-private-methods-of-a-class class=md-nav__link> 12. Private methods of a class </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#13-generic-classes-that-accept-different-data-types-eg-dict class=md-nav__link> 13. Generic Classes that Accept Different Data Types (e.g., Dict) </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#14-testing-different-methods-that-accept-different-data-types-for-a-single-argument class=md-nav__link> 14. Testing Different Methods that Accept Different Data Types for a Single Argument </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#15-having-complex-unit-test-cases-in-the-end class=md-nav__link> 15. Having complex unit test cases in the end </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#16-learn-from-bugs class=md-nav__link> 16. Learn from bugs </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#integration-testing class=md-nav__link> Integration Testing </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#end-to-end-testing class=md-nav__link> End-to-End Testing </a> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed Â© 2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../assets/javascript/lunr.js></script> <script src=../../assets/javascript/theme.js></script> <!-- GitHub buttons --> <script async defer src=https://buttons.github.io/buttons.js></script> </body> </html>