<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../../../versions.json";
      const search_worker_js = "../../../../assets/javascript/search-worker.js";
      const search_index_json = "../../../../search/search_index.json";
      const base_url = '../../../..';
    </script><!-- Site title --><title>Job - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../../../ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../../../assets/img/menu.svg> <img class=close style=display:none src=../../../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../../../getting-started/getting-started/ class>Basic Example</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Installation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/installation/0-basic-software-installation/ class>Software Installation</a> </li> <li class> <a href=../../../../tutorials/installation/1-setting-up-environment/ class>Setting Up Environment</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../../../tutorials/pytorch/03_PyTorch_MNIST_local_vs_Federated/ class>MNIST classification with PyTorch, comparing federated model vs model trained locally</a> </li> <li class> <a href=../../../../tutorials/pytorch/04_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/05-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/flamby/flamby/ class>General Concepts</a> </li> <li class> <a href=../../../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby integration in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../../../user-guide/deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../../../user-guide/deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../../../user-guide/nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../../../user-guide/nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../../../user-guide/nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../../../user-guide/nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../../../user-guide/researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../../../user-guide/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../../../user-guide/researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../../../user-guide/researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../../../user-guide/researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../../../user-guide/researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../../../user-guide/advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../../../user-guide/secagg/certificate-registration/ class>Certificate Registration</a> </li> <li class> <a href=../../../../user-guide/secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../common/constants/ class>Constants</a> </li> <li class> <a href=../../common/data/ class>Data</a> </li> <li class> <a href=../../common/environ/ class>Environ</a> </li> <li class> <a href=../../common/exceptions/ class>Exceptions</a> </li> <li class> <a class href=../../common/json.md>Json</a> </li> <li class> <a href=../../common/logger/ class>Logger</a> </li> <li class> <a href=../../common/message/ class>Message</a> </li> <li class> <a class href=../../common/messaging.md>Messaging</a> </li> <li class> <a href=../../common/models/ class>Model</a> </li> <li class> <a href=../../common/optimizers/ class>Optimizers</a> </li> <li class> <a class href=../../common/repository.md>Repository</a> </li> <li class> <a href=../../common/tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../../common/training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../../common/training_args/ class>TrainingArgs</a> </li> <li class> <a href=../../common/utils/ class>Utils</a> </li> <li class> <a href=../../common/validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../node/cli/ class>CLI</a> </li> <li class> <a href=../../node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../node/node/ class>Node</a> </li> <li class> <a href=../../node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> <li class> <a href=../../node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../node/round/ class>Round</a> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../aggregators/ class>Aggregators</a> </li> <li class> <a href=../datasets/ class>Datasets</a> </li> <li class> <a href=../experiment/ class>Experiment</a> </li> <li class> <a href=../filetools/ class>Filetools</a> </li> <li class=current> <a href=./ class="link current">Job</a> </li> <li class> <a href=../monitor/ class>Monitor</a> </li> <li class> <a href=../node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../requests/ class>Requests</a> </li> <li class> <a href=../strategies/ class>Strategies</a> </li> <li class> <a href=../secagg/ class>Secagg</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../../usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../../ci/ class>Continuous Integration</a> </li> <li class> <a href=../../../definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../../testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../../messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <h1>Job</h1> <article> <div class="doc doc-object doc-module"> <div class="doc doc-contents first"> <p>Manage the training part of the experiment.</p> <div class="doc doc-children"> <h2 id=fedbiomed.researcher.job-attributes>Attributes</h2> <div class="doc doc-object doc-attribute"> <h3 id=fedbiomed.researcher.job.Typevar_TrainingPlanClass class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">Typevar_TrainingPlanClass</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> </h3> <div class=highlight><pre><span></span><code><span class=n>Typevar_TrainingPlanClass</span> <span class=o>=</span> <span class=n>TypeVar</span><span class=p>(</span><span class=s1>&#39;Typevar_TrainingPlanClass&#39;</span><span class=p>,</span> <span class=n>Type</span><span class=p>[</span><span class=n>TorchTrainingPlan</span><span class=p>],</span> <span class=n>Type</span><span class=p>[</span><span class=n>SKLearnTrainingPlan</span><span class=p>])</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=fedbiomed.researcher.job.training_plans_types class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">training_plans_types</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> </h3> <div class=highlight><pre><span></span><code><span class=n>training_plans_types</span> <span class=o>=</span> <span class=p>(</span><span class=n>TorchTrainingPlan</span><span class=p>,</span> <span class=n>SKLearnTrainingPlan</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h2 id=fedbiomed.researcher.job-classes>Classes</h2> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.job.Job class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">Job</span> </h3> <div class=highlight><pre><span></span><code><span class=n>Job</span><span class=p>(</span><span class=n>reqs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>training_plan_class</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>training_args</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>model_args</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>keep_files_dir</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Represents the entity that manage the training part at the nodes level</p> <p>Starts a message queue, loads python model file created by researcher (through [<code>training_plans</code>][fedbiomed.common.training_plans]) and saves the loaded model in a file/</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>reqs</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="fedbiomed.researcher.requests.Requests" href="../requests/#fedbiomed.researcher.requests.Requests">Requests</a>]</code> </td> <td> <div class=doc-md-description> <p>Researcher's requests assigned to nodes. Defaults to None.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>training_plan_class</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="fedbiomed.researcher.job.Typevar_TrainingPlanClass" href="#fedbiomed.researcher.job.Typevar_TrainingPlanClass">Typevar_TrainingPlanClass</a>]</code> </td> <td> <div class=doc-md-description> <p>Class containing the code of the TrainingPlan.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>training_args</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.training_args.TrainingArgs" href="../../common/training_args/#fedbiomed.common.training_args.TrainingArgs">TrainingArgs</a></code> </td> <td> <div class=doc-md-description> <p>Contains training parameters; lr, epochs, batch_size.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>model_args</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>Contains output and input feature dimension</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>data</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.researcher.datasets.FederatedDataSet" href="../datasets/#fedbiomed.researcher.datasets.FederatedDataSet">FederatedDataSet</a></code> </td> <td> <div class=doc-md-description> <p>Federated datasets</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>keep_files_dir</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>Directory for storing files created by the job that we want to keep beyond the execution of the job. Defaults to None, files are not kept after the end of the job.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><strong>Raises:</strong></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedJobError" href="../../common/exceptions/#fedbiomed.common.exceptions.FedbiomedJobError">FedbiomedJobError</a></code> </td> <td> <div class=doc-md-description> <p>bad argument type or value</p> </div> </td> </tr> <tr> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedJobError" href="../../common/exceptions/#fedbiomed.common.exceptions.FedbiomedJobError">FedbiomedJobError</a></code> </td> <td> <div class=doc-md-description> <p>cannot save training plan to file</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 47 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos=" 48 "></span>             <span class=n>reqs</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Requests</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 49 "></span>             <span class=n>training_plan_class</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Typevar_TrainingPlanClass</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 50 "></span>             <span class=n>training_args</span><span class=p>:</span> <span class=n>TrainingArgs</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 51 "></span>             <span class=n>model_args</span><span class=p>:</span> <span class=nb>dict</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 52 "></span>             <span class=n>data</span><span class=p>:</span> <span class=n>FederatedDataSet</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 53 "></span>             <span class=n>keep_files_dir</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos=" 54 "></span>
<span class=linenos data-linenos=" 55 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Constructor of the class</span>
<span class=linenos data-linenos=" 56 "></span>
<span class=linenos data-linenos=" 57 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos=" 58 "></span><span class=sd>        reqs: Researcher&#39;s requests assigned to nodes. Defaults to None.</span>
<span class=linenos data-linenos=" 59 "></span><span class=sd>        training_plan_class: Class containing the code of the TrainingPlan.</span>
<span class=linenos data-linenos=" 60 "></span><span class=sd>        training_args: Contains training parameters; lr, epochs, batch_size.</span>
<span class=linenos data-linenos=" 61 "></span><span class=sd>        model_args: Contains output and input feature dimension</span>
<span class=linenos data-linenos=" 62 "></span><span class=sd>        data: Federated datasets</span>
<span class=linenos data-linenos=" 63 "></span><span class=sd>        keep_files_dir: Directory for storing files created by the job that we want to keep beyond the execution</span>
<span class=linenos data-linenos=" 64 "></span><span class=sd>            of the job. Defaults to None, files are not kept after the end of the job.</span>
<span class=linenos data-linenos=" 65 "></span>
<span class=linenos data-linenos=" 66 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos=" 67 "></span><span class=sd>        FedbiomedJobError: bad argument type or value</span>
<span class=linenos data-linenos=" 68 "></span><span class=sd>        FedbiomedJobError: cannot save training plan to file</span>
<span class=linenos data-linenos=" 69 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 70 "></span>    <span class=c1># Check arguments</span>
<span class=linenos data-linenos=" 71 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>training_plan_class</span><span class=p>):</span>
<span class=linenos data-linenos=" 72 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB418</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: bad type for argument `training_plan_class` </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>training_plan_class</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos=" 73 "></span>        <span class=k>raise</span> <span class=n>FedbiomedJobError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos=" 74 "></span>
<span class=linenos data-linenos=" 75 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>issubclass</span><span class=p>(</span><span class=n>training_plan_class</span><span class=p>,</span> <span class=n>training_plans_types</span><span class=p>):</span>
<span class=linenos data-linenos=" 76 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB418</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: bad type for argument `training_plan_class`. It is not subclass of &quot;</span> <span class=o>+</span> \
<span class=linenos data-linenos=" 77 "></span>              <span class=sa>f</span><span class=s2>&quot; supported training plans </span><span class=si>{</span><span class=n>training_plans_types</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos=" 78 "></span>        <span class=k>raise</span> <span class=n>FedbiomedJobError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos=" 79 "></span>
<span class=linenos data-linenos=" 80 "></span>    <span class=c1># List of node ID of the nodes used in the current round</span>
<span class=linenos data-linenos=" 81 "></span>    <span class=c1># - initially None (no current round yet)</span>
<span class=linenos data-linenos=" 82 "></span>    <span class=c1># - then updated during the round with the list of nodes to be used in the round, then the nodes</span>
<span class=linenos data-linenos=" 83 "></span>    <span class=c1>#   that actually replied during the round</span>
<span class=linenos data-linenos=" 84 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span> <span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos=" 85 "></span>
<span class=linenos data-linenos=" 86 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>JOB_PREFIX</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>  <span class=c1># creating a unique job id</span>
<span class=linenos data-linenos=" 87 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span> <span class=o>=</span> <span class=n>environ</span><span class=p>[</span><span class=s1>&#39;RESEARCHER_ID&#39;</span><span class=p>]</span>
<span class=linenos data-linenos=" 88 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span> <span class=o>=</span> <span class=n>training_args</span>
<span class=linenos data-linenos=" 89 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span> <span class=o>=</span> <span class=n>model_args</span>
<span class=linenos data-linenos=" 90 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_replies</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># will contain all node replies for every round</span>
<span class=linenos data-linenos=" 91 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_model_file</span> <span class=o>=</span> <span class=kc>None</span>  <span class=c1># path to local file containing model code</span>
<span class=linenos data-linenos=" 92 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_model_params_file</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># path to local file containing current version of aggregated params</span>
<span class=linenos data-linenos=" 93 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan_class</span> <span class=o>=</span> <span class=n>training_plan_class</span>
<span class=linenos data-linenos=" 94 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_aggregator_args</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos=" 95 "></span>
<span class=linenos data-linenos=" 96 "></span>    <span class=k>if</span> <span class=n>keep_files_dir</span><span class=p>:</span>
<span class=linenos data-linenos=" 97 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_keep_files_dir</span> <span class=o>=</span> <span class=n>keep_files_dir</span>
<span class=linenos data-linenos=" 98 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos=" 99 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_keep_files_dir</span> <span class=o>=</span> <span class=n>tempfile</span><span class=o>.</span><span class=n>mkdtemp</span><span class=p>(</span><span class=n>prefix</span><span class=o>=</span><span class=n>environ</span><span class=p>[</span><span class=s1>&#39;TMP_DIR&#39;</span><span class=p>])</span>
<span class=linenos data-linenos="100 "></span>        <span class=n>atexit</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=k>lambda</span><span class=p>:</span> <span class=n>shutil</span><span class=o>.</span><span class=n>rmtree</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_keep_files_dir</span><span class=p>))</span>  <span class=c1># remove directory</span>
<span class=linenos data-linenos="101 "></span>        <span class=c1># when script ends running (replace</span>
<span class=linenos data-linenos="102 "></span>        <span class=c1># `with tempfile.TemporaryDirectory(dir=environ[&#39;TMP_DIR&#39;]) as self._keep_files_dir: `)</span>
<span class=linenos data-linenos="103 "></span>
<span class=linenos data-linenos="104 "></span>    <span class=k>if</span> <span class=n>reqs</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="105 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span> <span class=o>=</span> <span class=n>Requests</span><span class=p>()</span>
<span class=linenos data-linenos="106 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="107 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span> <span class=o>=</span> <span class=n>reqs</span>
<span class=linenos data-linenos="108 "></span>
<span class=linenos data-linenos="109 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>last_msg</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="110 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>data</span>
<span class=linenos data-linenos="111 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_node_state_agent</span> <span class=o>=</span> <span class=n>NodeStateAgent</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>data</span><span class=p>()</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
<span class=linenos data-linenos="112 "></span>                                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>data</span><span class=p>()</span> <span class=k>else</span> <span class=p>[])</span>
<span class=linenos data-linenos="113 "></span>
<span class=linenos data-linenos="114 "></span>    <span class=c1># create TrainingPlan instance</span>
<span class=linenos data-linenos="115 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan_class</span><span class=p>()</span>  <span class=c1># contains TrainingPlan</span>
<span class=linenos data-linenos="116 "></span>
<span class=linenos data-linenos="117 "></span>    <span class=c1># save and load training plan to a file to be sure</span>
<span class=linenos data-linenos="118 "></span>    <span class=c1># 1. a file is associated to training plan so we can read its source, etc.</span>
<span class=linenos data-linenos="119 "></span>    <span class=c1># 2. all dependencies are applied</span>
<span class=linenos data-linenos="120 "></span>    <span class=n>training_plan_module</span> <span class=o>=</span> <span class=s1>&#39;model_&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="121 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_keep_files_dir</span><span class=p>,</span> <span class=n>training_plan_module</span> <span class=o>+</span> <span class=s1>&#39;.py&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="122 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="123 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>save_code</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_training_plan_file</span><span class=p>)</span>
<span class=linenos data-linenos="124 "></span>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="125 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB418</span><span class=si>}</span><span class=s2>: cannot save training plan to file: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="126 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="127 "></span>        <span class=k>raise</span> <span class=n>FedbiomedJobError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="128 "></span>    <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span>
<span class=linenos data-linenos="129 "></span>
<span class=linenos data-linenos="130 "></span>    <span class=n>_</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span> <span class=o>=</span> <span class=n>utils</span><span class=o>.</span><span class=n>import_class_object_from_file</span><span class=p>(</span>
<span class=linenos data-linenos="131 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan_file</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan_class</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
<span class=linenos data-linenos="132 "></span>
<span class=linenos data-linenos="133 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>post_init</span><span class=p>(</span><span class=n>model_args</span><span class=o>=</span><span class=p>{}</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span><span class=p>,</span>
<span class=linenos data-linenos="134 "></span>                                  <span class=n>training_args</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span><span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.job.Job-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.aggregator_args class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">aggregator_args</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>aggregator_args</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.id class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">id</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=nb>id</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.last_msg class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">last_msg</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>last_msg</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.nodes class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">nodes</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> <small class="doc doc-label doc-label-writable"><code>writable</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>nodes</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.requests class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">requests</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>requests</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.training_args class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">training_args</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> <small class="doc doc-label doc-label-writable"><code>writable</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>training_args</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.training_plan class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">training_plan</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>training_plan</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.training_plan_file class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">training_plan_file</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>training_plan_file</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.Job.training_replies class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">training_replies</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>training_replies</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.researcher.job.Job-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.job.Job.check_training_plan_is_approved_by_nodes class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">check_training_plan_is_approved_by_nodes</span> </h5> <div class=highlight><pre><span></span><code><span class=n>check_training_plan_is_approved_by_nodes</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Checks whether model is approved or not.</p> <p>This method sends <code>training-plan-status</code> request to the nodes. It should be run before running experiment. So, researchers can find out if their model has been approved</p> <p><strong>Returns:</strong></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></code> </td> <td> <div class=doc-md-description> <p>A dict of <code>Message</code> objects indexed by node ID, one for each job's nodes</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="176 "></span><span class=k>def</span> <span class=nf>check_training_plan_is_approved_by_nodes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos="177 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Checks whether model is approved or not.</span>
<span class=linenos data-linenos="178 "></span>
<span class=linenos data-linenos="179 "></span><span class=sd>    This method sends `training-plan-status` request to the nodes. It should be run before running experiment.</span>
<span class=linenos data-linenos="180 "></span><span class=sd>    So, researchers can find out if their model has been approved</span>
<span class=linenos data-linenos="181 "></span>
<span class=linenos data-linenos="182 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="183 "></span><span class=sd>        A dict of `Message` objects indexed by node ID, one for each job&#39;s nodes</span>
<span class=linenos data-linenos="184 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="185 "></span>
<span class=linenos data-linenos="186 "></span>    <span class=n>message</span> <span class=o>=</span> <span class=n>TrainingPlanStatusRequest</span><span class=p>(</span><span class=o>**</span><span class=p>{</span>
<span class=linenos data-linenos="187 "></span>        <span class=s1>&#39;researcher_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span><span class=p>,</span>
<span class=linenos data-linenos="188 "></span>        <span class=s1>&#39;job_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_id</span><span class=p>,</span>
<span class=linenos data-linenos="189 "></span>        <span class=s1>&#39;training_plan&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>source</span><span class=p>(),</span>
<span class=linenos data-linenos="190 "></span>        <span class=s1>&#39;command&#39;</span><span class=p>:</span> <span class=s1>&#39;training-plan-status&#39;</span>
<span class=linenos data-linenos="191 "></span>    <span class=p>})</span>
<span class=linenos data-linenos="192 "></span>
<span class=linenos data-linenos="193 "></span>    <span class=n>node_ids</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>node_ids</span><span class=p>()</span>
<span class=linenos data-linenos="194 "></span>
<span class=linenos data-linenos="195 "></span>    <span class=c1># Send message to each node that has been found after dataset search request</span>
<span class=linenos data-linenos="196 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>node_ids</span><span class=p>,</span> <span class=n>policies</span><span class=o>=</span><span class=p>[</span><span class=n>DiscardOnTimeout</span><span class=p>(</span><span class=mi>5</span><span class=p>)])</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos="197 "></span>        <span class=n>replies</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span>
<span class=linenos data-linenos="198 "></span>
<span class=linenos data-linenos="199 "></span>        <span class=k>for</span> <span class=n>node_id</span><span class=p>,</span> <span class=n>reply</span> <span class=ow>in</span> <span class=n>replies</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="200 "></span>            <span class=k>if</span> <span class=n>reply</span><span class=o>.</span><span class=n>success</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
<span class=linenos data-linenos="201 "></span>                <span class=k>if</span> <span class=n>reply</span><span class=o>.</span><span class=n>approval_obligation</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
<span class=linenos data-linenos="202 "></span>                    <span class=k>if</span> <span class=n>reply</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>TrainingPlanApprovalStatus</span><span class=o>.</span><span class=n>APPROVED</span><span class=o>.</span><span class=n>value</span><span class=p>:</span>
<span class=linenos data-linenos="203 "></span>                        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Training plan has been approved by the node: </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="204 "></span>                    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="205 "></span>                        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Training plan has NOT been approved by the node: </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s1>.&#39;</span> <span class=o>+</span>
<span class=linenos data-linenos="206 "></span>                                       <span class=sa>f</span><span class=s1>&#39;Training plan status : </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="207 "></span>                <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="208 "></span>                    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Training plan approval is not required by the node: </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="209 "></span>            <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="210 "></span>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Node : </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2> : </span><span class=si>{</span><span class=n>reply</span><span class=o>.</span><span class=n>msg</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="211 "></span>
<span class=linenos data-linenos="212 "></span>    <span class=c1># Get the nodes that haven&#39;t replied training-plan-status request</span>
<span class=linenos data-linenos="213 "></span>    <span class=n>non_replied_nodes</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>node_ids</span><span class=p>)</span> <span class=o>-</span> <span class=nb>set</span><span class=p>(</span><span class=n>replies</span><span class=o>.</span><span class=n>keys</span><span class=p>()))</span>
<span class=linenos data-linenos="214 "></span>    <span class=k>if</span> <span class=n>non_replied_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="215 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Request for checking training plan status hasn&#39;t been replied </span><span class=se>\</span>
<span class=linenos data-linenos="216 "></span><span class=s2>                         by the nodes: </span><span class=si>{</span><span class=n>non_replied_nodes</span><span class=si>}</span><span class=s2>. You might get error </span><span class=se>\</span>
<span class=linenos data-linenos="217 "></span><span class=s2>                             while running your experiment. &quot;</span><span class=p>)</span>
<span class=linenos data-linenos="218 "></span>
<span class=linenos data-linenos="219 "></span>    <span class=k>return</span> <span class=n>replies</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.job.Job.extract_received_optimizer_aux_var_from_round class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">extract_received_optimizer_aux_var_from_round</span> </h5> <div class=highlight><pre><span></span><code><span class=n>extract_received_optimizer_aux_var_from_round</span><span class=p>(</span><span class=n>round_id</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Restructure the received auxiliary variables (if any) from a round.</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>round_id</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code> </td> <td> <div class=doc-md-description> <p>Index of the round, replies from which to parse through.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><strong>Returns:</strong></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]]</code> </td> <td> <div class=doc-md-description> <p>Dict of auxiliary variables, collating node-wise information, with</p> </div> </td> </tr> <tr> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]]</code> </td> <td> <div class=doc-md-description> <p>format <code>{mod_name: {node_id: node_dict}}</code>.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="398 "></span><span class=k>def</span> <span class=nf>extract_received_optimizer_aux_var_from_round</span><span class=p>(</span>
<span class=linenos data-linenos="399 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="400 "></span>    <span class=n>round_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
<span class=linenos data-linenos="401 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]]:</span>
<span class=linenos data-linenos="402 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Restructure the received auxiliary variables (if any) from a round.</span>
<span class=linenos data-linenos="403 "></span>
<span class=linenos data-linenos="404 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="405 "></span><span class=sd>        round_id: Index of the round, replies from which to parse through.</span>
<span class=linenos data-linenos="406 "></span>
<span class=linenos data-linenos="407 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="408 "></span><span class=sd>        Dict of auxiliary variables, collating node-wise information, with</span>
<span class=linenos data-linenos="409 "></span><span class=sd>        format `{mod_name: {node_id: node_dict}}`.</span>
<span class=linenos data-linenos="410 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="411 "></span>    <span class=n>aux_var</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># type: Dict[str, Dict[str, Dict[str, Any]]]</span>
<span class=linenos data-linenos="412 "></span>    <span class=k>for</span> <span class=n>reply</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>training_replies</span><span class=p>[</span><span class=n>round_id</span><span class=p>]</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
<span class=linenos data-linenos="413 "></span>        <span class=n>node_id</span> <span class=o>=</span> <span class=n>reply</span><span class=p>[</span><span class=s2>&quot;node_id&quot;</span><span class=p>]</span>
<span class=linenos data-linenos="414 "></span>        <span class=n>node_av</span> <span class=o>=</span> <span class=n>reply</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;optim_aux_var&quot;</span><span class=p>,</span> <span class=p>{})</span>
<span class=linenos data-linenos="415 "></span>        <span class=k>for</span> <span class=n>module</span><span class=p>,</span> <span class=n>params</span> <span class=ow>in</span> <span class=n>node_av</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="416 "></span>            <span class=n>aux_var</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>module</span><span class=p>,</span> <span class=p>{})[</span><span class=n>node_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>params</span>
<span class=linenos data-linenos="417 "></span>    <span class=k>return</span> <span class=n>aux_var</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.job.Job.load_state_breakpoint class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">load_state_breakpoint</span> </h5> <div class=highlight><pre><span></span><code><span class=n>load_state_breakpoint</span><span class=p>(</span><span class=n>saved_state</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Load breakpoints state for a Job from a saved state</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>saved_state</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code> </td> <td> <div class=doc-md-description> <p>breakpoint content</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="548 "></span><span class=k>def</span> <span class=nf>load_state_breakpoint</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>saved_state</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="549 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Load breakpoints state for a Job from a saved state</span>
<span class=linenos data-linenos="550 "></span>
<span class=linenos data-linenos="551 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="552 "></span><span class=sd>        saved_state: breakpoint content</span>
<span class=linenos data-linenos="553 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="554 "></span>    <span class=c1># Reload the job and researched ids.</span>
<span class=linenos data-linenos="555 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>saved_state</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;job_id&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="556 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span> <span class=o>=</span> <span class=n>saved_state</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;researcher_id&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="557 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_node_state_agent</span><span class=o>.</span><span class=n>load_state_breakpoint</span><span class=p>(</span><span class=n>saved_state</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;node_state&#39;</span><span class=p>))</span>
<span class=linenos data-linenos="558 "></span>    <span class=c1># Upload the latest model parameters. This records the filename and url.</span>
<span class=linenos data-linenos="559 "></span>    <span class=n>params</span> <span class=o>=</span> <span class=n>Serializer</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>saved_state</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;model_params_path&quot;</span><span class=p>))</span>
<span class=linenos data-linenos="560 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>update_parameters</span><span class=p>(</span><span class=n>params</span><span class=p>)</span>
<span class=linenos data-linenos="561 "></span>
<span class=linenos data-linenos="562 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_load_and_set_model_params_from_file</span><span class=p>(</span><span class=n>saved_state</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;model_params_path&quot;</span><span class=p>))</span>
<span class=linenos data-linenos="563 "></span>    <span class=c1># Reload the latest training replies.</span>
<span class=linenos data-linenos="564 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_replies</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_load_training_replies</span><span class=p>(</span>
<span class=linenos data-linenos="565 "></span>        <span class=n>saved_state</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;training_replies&#39;</span><span class=p>,</span> <span class=p>{})</span>
<span class=linenos data-linenos="566 "></span>    <span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.job.Job.save_state_breakpoint class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">save_state_breakpoint</span> </h5> <div class=highlight><pre><span></span><code><span class=n>save_state_breakpoint</span><span class=p>(</span><span class=n>breakpoint_path</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Creates current state of the job to be included in a breakpoint.</p> <p>Includes creating links to files included in the job state.</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>breakpoint_path</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>path to the existing breakpoint directory</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><strong>Returns:</strong></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>Job's current state for breakpoint</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="512 "></span><span class=k>def</span> <span class=nf>save_state_breakpoint</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>breakpoint_path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="513 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Creates current state of the job to be included in a breakpoint.</span>
<span class=linenos data-linenos="514 "></span>
<span class=linenos data-linenos="515 "></span><span class=sd>    Includes creating links to files included in the job state.</span>
<span class=linenos data-linenos="516 "></span>
<span class=linenos data-linenos="517 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="518 "></span><span class=sd>        breakpoint_path: path to the existing breakpoint directory</span>
<span class=linenos data-linenos="519 "></span>
<span class=linenos data-linenos="520 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="521 "></span><span class=sd>        Job&#39;s current state for breakpoint</span>
<span class=linenos data-linenos="522 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="523 "></span>
<span class=linenos data-linenos="524 "></span>    <span class=c1># Note: some state is passed to __init__() thus is not managed</span>
<span class=linenos data-linenos="525 "></span>    <span class=c1># as job state but as experiment state in current version</span>
<span class=linenos data-linenos="526 "></span>    <span class=n>state</span> <span class=o>=</span> <span class=p>{</span>
<span class=linenos data-linenos="527 "></span>        <span class=s1>&#39;researcher_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span><span class=p>,</span>
<span class=linenos data-linenos="528 "></span>        <span class=s1>&#39;job_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_id</span><span class=p>,</span>
<span class=linenos data-linenos="529 "></span>        <span class=s1>&#39;model_params_path&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model_params_file</span><span class=p>,</span>
<span class=linenos data-linenos="530 "></span>        <span class=s1>&#39;training_replies&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_save_training_replies</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_training_replies</span><span class=p>),</span>
<span class=linenos data-linenos="531 "></span>        <span class=s1>&#39;node_state&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_node_state_agent</span><span class=o>.</span><span class=n>save_state_breakpoint</span><span class=p>()</span>
<span class=linenos data-linenos="532 "></span>    <span class=p>}</span>
<span class=linenos data-linenos="533 "></span>
<span class=linenos data-linenos="534 "></span>    <span class=n>state</span><span class=p>[</span><span class=s1>&#39;model_params_path&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>create_unique_link</span><span class=p>(</span>
<span class=linenos data-linenos="535 "></span>        <span class=n>breakpoint_path</span><span class=p>,</span> <span class=s1>&#39;aggregated_params_current&#39;</span><span class=p>,</span> <span class=s1>&#39;.mpk&#39;</span><span class=p>,</span>
<span class=linenos data-linenos="536 "></span>        <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s1>&#39;..&#39;</span><span class=p>,</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>state</span><span class=p>[</span><span class=s2>&quot;model_params_path&quot;</span><span class=p>]))</span>
<span class=linenos data-linenos="537 "></span>    <span class=p>)</span>
<span class=linenos data-linenos="538 "></span>
<span class=linenos data-linenos="539 "></span>    <span class=k>for</span> <span class=n>round_replies</span> <span class=ow>in</span> <span class=n>state</span><span class=p>[</span><span class=s1>&#39;training_replies&#39;</span><span class=p>]:</span>
<span class=linenos data-linenos="540 "></span>        <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>round_replies</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
<span class=linenos data-linenos="541 "></span>            <span class=n>node_params_path</span> <span class=o>=</span> <span class=n>create_unique_file_link</span><span class=p>(</span>
<span class=linenos data-linenos="542 "></span>                <span class=n>breakpoint_path</span><span class=p>,</span> <span class=n>response</span><span class=p>[</span><span class=s1>&#39;params_path&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="543 "></span>            <span class=p>)</span>
<span class=linenos data-linenos="544 "></span>            <span class=n>response</span><span class=p>[</span><span class=s1>&#39;params_path&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>node_params_path</span>
<span class=linenos data-linenos="545 "></span>
<span class=linenos data-linenos="546 "></span>    <span class=k>return</span> <span class=n>state</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.job.Job.start_nodes_training_round class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">start_nodes_training_round</span> </h5> <div class=highlight><pre><span></span><code><span class=n>start_nodes_training_round</span><span class=p>(</span><span class=n>round_</span><span class=p>,</span> <span class=n>aggregator_args</span><span class=p>,</span> <span class=n>secagg_arguments</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>do_training</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>optim_aux_var</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sends training request to nodes and waits for the replies</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>round_</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code> </td> <td> <div class=doc-md-description> <p>current number of round the algorithm is performing (a round is considered to be all the training steps of a federated model between 2 aggregations).</p> </div> </td> <td> <em>required</em> </td> </tr> <tr> <td><code>aggregator_args</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</code> </td> <td> <div class=doc-md-description> <p>dictionary containing some metadata about the aggregation strategy, useful to transfer some data when it's required by am aggregator.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr> <td><code>secagg_arguments</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>]</code> </td> <td> <div class=doc-md-description> <p>Secure aggregation ServerKey context id</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>do_training</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> </td> <td> <div class=doc-md-description> <p>if False, skip training in this round (do only validation). Defaults to True.</p> </div> </td> <td> <code>True</code> </td> </tr> <tr> <td><code>optim_aux_var</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]]</code> </td> <td> <div class=doc-md-description> <p>Auxiliary variables of the researcher-side Optimizer, if any. Note that such variables may only be used if both the Experiment and node-side training plan hold a declearn-based <a class="autorefs autorefs-internal" href="../../common/optimizers/#fedbiomed.common.optimizers.Optimizer">Optimizer</a>, and their plug-ins are coherent with each other as to expected information exchange.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="262 "></span><span class=k>def</span> <span class=nf>start_nodes_training_round</span><span class=p>(</span>
<span class=linenos data-linenos="263 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="264 "></span>    <span class=n>round_</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
<span class=linenos data-linenos="265 "></span>    <span class=n>aggregator_args</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]],</span>
<span class=linenos data-linenos="266 "></span>    <span class=n>secagg_arguments</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="267 "></span>    <span class=n>do_training</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="268 "></span>    <span class=n>optim_aux_var</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="269 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="270 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Sends training request to nodes and waits for the replies</span>
<span class=linenos data-linenos="271 "></span>
<span class=linenos data-linenos="272 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="273 "></span><span class=sd>        round_: current number of round the algorithm is performing (a round is considered to be all the</span>
<span class=linenos data-linenos="274 "></span><span class=sd>            training steps of a federated model between 2 aggregations).</span>
<span class=linenos data-linenos="275 "></span><span class=sd>        aggregator_args: dictionary containing some metadata about the aggregation</span>
<span class=linenos data-linenos="276 "></span><span class=sd>            strategy, useful to transfer some data when it&#39;s required by am aggregator.</span>
<span class=linenos data-linenos="277 "></span><span class=sd>        secagg_arguments: Secure aggregation ServerKey context id</span>
<span class=linenos data-linenos="278 "></span><span class=sd>        do_training: if False, skip training in this round (do only validation). Defaults to True.</span>
<span class=linenos data-linenos="279 "></span><span class=sd>        optim_aux_var: Auxiliary variables of the researcher-side Optimizer, if any.</span>
<span class=linenos data-linenos="280 "></span><span class=sd>            Note that such variables may only be used if both the Experiment and node-side training plan</span>
<span class=linenos data-linenos="281 "></span><span class=sd>            hold a declearn-based [Optimizer][fedbiomed.common.optimizers.Optimizer], and their plug-ins</span>
<span class=linenos data-linenos="282 "></span><span class=sd>            are coherent with each other as to expected information exchange.</span>
<span class=linenos data-linenos="283 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="284 "></span>
<span class=linenos data-linenos="285 "></span>    <span class=c1># Assign empty dict to secagg arguments if it is None</span>
<span class=linenos data-linenos="286 "></span>    <span class=n>secagg_arguments</span> <span class=o>=</span> <span class=p>{}</span> <span class=k>if</span> <span class=n>secagg_arguments</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=n>secagg_arguments</span>
<span class=linenos data-linenos="287 "></span>
<span class=linenos data-linenos="288 "></span>    <span class=n>msg</span> <span class=o>=</span> <span class=p>{</span>
<span class=linenos data-linenos="289 "></span>        <span class=s1>&#39;researcher_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_researcher_id</span><span class=p>,</span>
<span class=linenos data-linenos="290 "></span>        <span class=s1>&#39;job_id&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_id</span><span class=p>,</span>
<span class=linenos data-linenos="291 "></span>        <span class=s1>&#39;training_args&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span><span class=o>.</span><span class=n>dict</span><span class=p>(),</span>
<span class=linenos data-linenos="292 "></span>        <span class=s1>&#39;training&#39;</span><span class=p>:</span> <span class=n>do_training</span><span class=p>,</span>
<span class=linenos data-linenos="293 "></span>        <span class=s1>&#39;model_args&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span><span class=p>,</span>
<span class=linenos data-linenos="294 "></span>        <span class=s1>&#39;round&#39;</span><span class=p>:</span> <span class=n>round_</span><span class=p>,</span>
<span class=linenos data-linenos="295 "></span>        <span class=s1>&#39;training_plan&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>source</span><span class=p>(),</span>
<span class=linenos data-linenos="296 "></span>        <span class=s1>&#39;training_plan_class&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan_class</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
<span class=linenos data-linenos="297 "></span>        <span class=s1>&#39;params&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_model_params</span><span class=p>(),</span>
<span class=linenos data-linenos="298 "></span>        <span class=s1>&#39;secagg_servkey_id&#39;</span><span class=p>:</span> <span class=n>secagg_arguments</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;secagg_servkey_id&#39;</span><span class=p>),</span>
<span class=linenos data-linenos="299 "></span>        <span class=s1>&#39;secagg_biprime_id&#39;</span><span class=p>:</span> <span class=n>secagg_arguments</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;secagg_biprime_id&#39;</span><span class=p>),</span>
<span class=linenos data-linenos="300 "></span>        <span class=s1>&#39;secagg_random&#39;</span><span class=p>:</span> <span class=n>secagg_arguments</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;secagg_random&#39;</span><span class=p>),</span>
<span class=linenos data-linenos="301 "></span>        <span class=s1>&#39;secagg_clipping_range&#39;</span><span class=p>:</span> <span class=n>secagg_arguments</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;secagg_clipping_range&#39;</span><span class=p>),</span>
<span class=linenos data-linenos="302 "></span>        <span class=s1>&#39;command&#39;</span><span class=p>:</span> <span class=s1>&#39;train&#39;</span><span class=p>,</span>
<span class=linenos data-linenos="303 "></span>        <span class=s1>&#39;aggregator_args&#39;</span><span class=p>:</span> <span class=p>{},</span>
<span class=linenos data-linenos="304 "></span>        <span class=s1>&#39;aux_vars&#39;</span><span class=p>:</span> <span class=p>[],</span>
<span class=linenos data-linenos="305 "></span>    <span class=p>}</span>
<span class=linenos data-linenos="306 "></span>
<span class=linenos data-linenos="307 "></span>    <span class=n>timer</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="308 "></span>
<span class=linenos data-linenos="309 "></span>    <span class=k>if</span> <span class=n>do_training</span><span class=p>:</span>
<span class=linenos data-linenos="310 "></span>        <span class=c1># update node states when used node list has changed from one round to another</span>
<span class=linenos data-linenos="311 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_update_nodes_states_agent</span><span class=p>()</span>
<span class=linenos data-linenos="312 "></span>
<span class=linenos data-linenos="313 "></span>    <span class=c1># FIXME: should be part of a method called from Experiment</span>
<span class=linenos data-linenos="314 "></span>    <span class=c1># (behaviour can be defined by user / changed by strategy)</span>
<span class=linenos data-linenos="315 "></span>    <span class=n>nodes_state_ids</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_node_state_agent</span><span class=o>.</span><span class=n>get_last_node_states</span><span class=p>()</span>
<span class=linenos data-linenos="316 "></span>
<span class=linenos data-linenos="317 "></span>    <span class=c1># Upload optimizer auxiliary variables, when there are.</span>
<span class=linenos data-linenos="318 "></span>    <span class=k>if</span> <span class=n>do_training</span> <span class=ow>and</span> <span class=n>optim_aux_var</span><span class=p>:</span>
<span class=linenos data-linenos="319 "></span>        <span class=n>aux_shared</span><span class=p>,</span> <span class=n>aux_bynode</span> <span class=o>=</span> <span class=p>(</span>
<span class=linenos data-linenos="320 "></span>            <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_agg_optimizer_aux_var</span><span class=p>(</span><span class=n>optim_aux_var</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>))</span>
<span class=linenos data-linenos="321 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="322 "></span>
<span class=linenos data-linenos="323 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="324 "></span>        <span class=n>aux_shared</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="325 "></span>        <span class=n>aux_bynode</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="326 "></span>
<span class=linenos data-linenos="327 "></span>    <span class=c1># Loop over nodes, add node specific data and send train request</span>
<span class=linenos data-linenos="328 "></span>    <span class=n>messages</span> <span class=o>=</span> <span class=n>MessagesByNode</span><span class=p>()</span>
<span class=linenos data-linenos="329 "></span>
<span class=linenos data-linenos="330 "></span>    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>:</span>
<span class=linenos data-linenos="331 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;dataset_id&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>data</span><span class=p>()[</span><span class=n>node</span><span class=p>][</span><span class=s1>&#39;dataset_id&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="332 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;aux_vars&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>aux_shared</span><span class=p>,</span> <span class=n>aux_bynode</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=kc>None</span><span class=p>)]</span>
<span class=linenos data-linenos="333 "></span>
<span class=linenos data-linenos="334 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;state_id&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>nodes_state_ids</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
<span class=linenos data-linenos="335 "></span>
<span class=linenos data-linenos="336 "></span>        <span class=c1># FIXME: There might be another node join recently</span>
<span class=linenos data-linenos="337 "></span>        <span class=n>msg</span><span class=p>[</span><span class=s1>&#39;aggregator_args&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>aggregator_args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=p>{})</span> <span class=k>if</span> <span class=n>aggregator_args</span> <span class=k>else</span> <span class=p>{}</span>
<span class=linenos data-linenos="338 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_log_round_info</span><span class=p>(</span><span class=n>node</span><span class=o>=</span><span class=n>node</span><span class=p>,</span> <span class=n>training</span><span class=o>=</span><span class=n>do_training</span><span class=p>)</span>
<span class=linenos data-linenos="339 "></span>
<span class=linenos data-linenos="340 "></span>        <span class=n>timer</span><span class=p>[</span><span class=n>node</span><span class=p>]</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>perf_counter</span><span class=p>()</span>
<span class=linenos data-linenos="341 "></span>
<span class=linenos data-linenos="342 "></span>        <span class=n>messages</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=n>node</span><span class=p>:</span> <span class=n>TrainRequest</span><span class=p>(</span><span class=o>**</span><span class=n>msg</span><span class=p>)})</span>
<span class=linenos data-linenos="343 "></span>
<span class=linenos data-linenos="344 "></span>        <span class=c1># Sends training request</span>
<span class=linenos data-linenos="345 "></span>
<span class=linenos data-linenos="346 "></span>    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reqs</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>messages</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>)</span> <span class=k>as</span> <span class=n>federated_req</span><span class=p>:</span>
<span class=linenos data-linenos="347 "></span>        <span class=n>errors</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>errors</span><span class=p>()</span>
<span class=linenos data-linenos="348 "></span>        <span class=n>replies</span> <span class=o>=</span> <span class=n>federated_req</span><span class=o>.</span><span class=n>replies</span><span class=p>()</span>
<span class=linenos data-linenos="349 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_get_training_testing_results</span><span class=p>(</span><span class=n>replies</span><span class=o>=</span><span class=n>replies</span><span class=p>,</span> <span class=n>errors</span><span class=o>=</span><span class=n>errors</span><span class=p>,</span> <span class=n>round_</span><span class=o>=</span><span class=n>round_</span><span class=p>,</span> <span class=n>timer</span><span class=o>=</span><span class=n>timer</span><span class=p>)</span>
<span class=linenos data-linenos="350 "></span>
<span class=linenos data-linenos="351 "></span>    <span class=k>if</span> <span class=n>do_training</span><span class=p>:</span>
<span class=linenos data-linenos="352 "></span>        <span class=c1># update node states with node answers + when used node list has changed during the round</span>
<span class=linenos data-linenos="353 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_update_nodes_states_agent</span><span class=p>(</span><span class=n>before_training</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=linenos data-linenos="354 "></span>
<span class=linenos data-linenos="355 "></span>    <span class=c1># return the list of nodes which answered because nodes in error have been removed</span>
<span class=linenos data-linenos="356 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.job.Job.update_parameters class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">update_parameters</span> </h5> <div class=highlight><pre><span></span><code><span class=n>update_parameters</span><span class=p>(</span><span class=n>params</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Update model parameters</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>params</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</code> </td> <td> <div class=doc-md-description> <p>Aggregated model parameters</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><strong>Returns:</strong></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <code><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>Path of filename where parameters are saved</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="463 "></span><span class=k>def</span> <span class=nf>update_parameters</span><span class=p>(</span>
<span class=linenos data-linenos="464 "></span>    <span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="465 "></span>    <span class=n>params</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span>
<span class=linenos data-linenos="466 "></span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
<span class=linenos data-linenos="467 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Update model parameters</span>
<span class=linenos data-linenos="468 "></span>
<span class=linenos data-linenos="469 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="470 "></span><span class=sd>        params: Aggregated model parameters</span>
<span class=linenos data-linenos="471 "></span>
<span class=linenos data-linenos="472 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="473 "></span><span class=sd>        Path of filename where parameters are saved</span>
<span class=linenos data-linenos="474 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="475 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_update_model_params</span><span class=p>(</span><span class=n>params</span><span class=p>)</span>
<span class=linenos data-linenos="476 "></span>    <span class=n>filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_keep_files_dir</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;aggregated_params_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=si>}</span><span class=s2>.mpk&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="477 "></span>    <span class=n>Serializer</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>params</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>
<span class=linenos data-linenos="478 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_model_params_file</span> <span class=o>=</span> <span class=n>filename</span>
<span class=linenos data-linenos="479 "></span>
<span class=linenos data-linenos="480 "></span>    <span class=k>return</span> <span class=n>filename</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.researcher.job.localJob class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">localJob</span> </h3> <div class=highlight><pre><span></span><code><span class=n>localJob</span><span class=p>(</span><span class=n>dataset_path</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>training_plan_class</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>training_args</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>model_args</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Represents the entity that manage the training part. LocalJob is the version of Job but applied locally on a local dataset (thus not involving any network). It is only used to compare results to a Federated approach, using networks.</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>dataset_path</code></td> <td> </td> <td> <div class=doc-md-description> <p>The path where data is stored on local disk.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>training_plan_class</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="fedbiomed.researcher.job.Typevar_TrainingPlanClass" href="#fedbiomed.researcher.job.Typevar_TrainingPlanClass">Typevar_TrainingPlanClass</a>]</code> </td> <td> <div class=doc-md-description> <p>Class containing the code of the TrainingPlan.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>training_args</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="fedbiomed.common.training_args.TrainingArgs" href="../../common/training_args/#fedbiomed.common.training_args.TrainingArgs">TrainingArgs</a>]</code> </td> <td> <div class=doc-md-description> <p>Contains training parameters: lr, epochs, batch_size...</p> </div> </td> <td> <code>None</code> </td> </tr> <tr> <td><code>model_args</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>]</code> </td> <td> <div class=doc-md-description> <p>Contains output and input feature dimension.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><strong>Raises:</strong></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedJobError" href="../../common/exceptions/#fedbiomed.common.exceptions.FedbiomedJobError">FedbiomedJobError</a></code> </td> <td> <div class=doc-md-description> <p>bad argument type or value</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="625 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="626 "></span>             <span class=n>dataset_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="627 "></span>             <span class=n>training_plan_class</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Typevar_TrainingPlanClass</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="628 "></span>             <span class=n>training_args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>TrainingArgs</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="629 "></span>             <span class=n>model_args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>dict</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos="630 "></span>
<span class=linenos data-linenos="631 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=linenos data-linenos="632 "></span><span class=sd>    Constructor of the class</span>
<span class=linenos data-linenos="633 "></span>
<span class=linenos data-linenos="634 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="635 "></span><span class=sd>        dataset_path : The path where data is stored on local disk.</span>
<span class=linenos data-linenos="636 "></span><span class=sd>        training_plan_class: Class containing the code of the TrainingPlan.</span>
<span class=linenos data-linenos="637 "></span><span class=sd>        training_args: Contains training parameters: lr, epochs, batch_size...</span>
<span class=linenos data-linenos="638 "></span><span class=sd>        model_args: Contains output and input feature dimension.</span>
<span class=linenos data-linenos="639 "></span>
<span class=linenos data-linenos="640 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="641 "></span><span class=sd>        FedbiomedJobError: bad argument type or value</span>
<span class=linenos data-linenos="642 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="643 "></span>    <span class=c1># Check arguments</span>
<span class=linenos data-linenos="644 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>training_plan_class</span><span class=p>):</span>
<span class=linenos data-linenos="645 "></span>        <span class=k>raise</span> <span class=n>FedbiomedJobError</span><span class=p>(</span>
<span class=linenos data-linenos="646 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB418</span><span class=si>}</span><span class=s2>: bad type for argument `training_plan_class` </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>training_plan_class</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="647 "></span>        <span class=p>)</span>
<span class=linenos data-linenos="648 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>issubclass</span><span class=p>(</span><span class=n>training_plan_class</span><span class=p>,</span> <span class=n>training_plans_types</span><span class=p>):</span>
<span class=linenos data-linenos="649 "></span>        <span class=k>raise</span> <span class=n>FedbiomedJobError</span><span class=p>(</span>
<span class=linenos data-linenos="650 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB418</span><span class=si>}</span><span class=s2>: bad type for argument &quot;</span>
<span class=linenos data-linenos="651 "></span>            <span class=s2>&quot;`training_plan_class` </span><span class=si>{training_plan_class}</span><span class=s2> is not subclass of training plans&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="652 "></span>
<span class=linenos data-linenos="653 "></span>    <span class=c1># Initialize values</span>
<span class=linenos data-linenos="654 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span> <span class=o>=</span> <span class=n>training_args</span>
<span class=linenos data-linenos="655 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span> <span class=o>=</span> <span class=n>model_args</span>
<span class=linenos data-linenos="656 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>dataset_path</span> <span class=o>=</span> <span class=n>dataset_path</span>
<span class=linenos data-linenos="657 "></span>
<span class=linenos data-linenos="658 "></span>    <span class=k>if</span> <span class=n>training_args</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="659 "></span>        <span class=k>if</span> <span class=n>training_args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;test_on_local_updates&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span> \
<span class=linenos data-linenos="660 "></span>                <span class=ow>or</span> <span class=n>training_args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;test_on_global_updates&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>):</span>
<span class=linenos data-linenos="661 "></span>            <span class=c1># if user wants to perform validation, display this message</span>
<span class=linenos data-linenos="662 "></span>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Cannot perform validation, not supported for LocalJob&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="663 "></span>
<span class=linenos data-linenos="664 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>training_args</span><span class=p>,</span> <span class=n>TrainingArgs</span><span class=p>):</span>
<span class=linenos data-linenos="665 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span> <span class=o>=</span> <span class=n>TrainingArgs</span><span class=p>(</span><span class=n>training_args</span><span class=p>,</span> <span class=n>only_required</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=linenos data-linenos="666 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="667 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span> <span class=o>=</span> <span class=n>training_args</span>
<span class=linenos data-linenos="668 "></span>
<span class=linenos data-linenos="669 "></span>    <span class=c1># create/save model instance</span>
<span class=linenos data-linenos="670 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span> <span class=o>=</span> <span class=n>training_plan_class</span><span class=p>()</span>
<span class=linenos data-linenos="671 "></span>
<span class=linenos data-linenos="672 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>post_init</span><span class=p>(</span><span class=n>model_args</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_model_args</span><span class=p>,</span>
<span class=linenos data-linenos="673 "></span>                                  <span class=n>training_args</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_training_args</span><span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.researcher.job.localJob-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.localJob.dataset_path class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">dataset_path</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>dataset_path</span> <span class=o>=</span> <span class=n>dataset_path</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.localJob.training_args class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">training_args</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> <small class="doc doc-label doc-label-writable"><code>writable</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>training_args</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.researcher.job.localJob.training_plan class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">training_plan</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class=highlight><pre><span></span><code><span class=n>training_plan</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.researcher.job.localJob-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.researcher.job.localJob.start_training class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">start_training</span> </h5> <div class=highlight><pre><span></span><code><span class=n>start_training</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Run the local training</p> <details class=quote> <summary>Source code in <code>fedbiomed/researcher/job.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="687 "></span><span class=k>def</span> <span class=nf>start_training</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="688 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Run the local training&quot;&quot;&quot;</span>
<span class=linenos data-linenos="689 "></span>    <span class=c1># Run import statements (very unsafely).</span>
<span class=linenos data-linenos="690 "></span>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>dependencies</span><span class=p>:</span>
<span class=linenos data-linenos="691 "></span>        <span class=n>exec</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=nb>globals</span><span class=p>())</span>
<span class=linenos data-linenos="692 "></span>
<span class=linenos data-linenos="693 "></span>    <span class=c1># Run the training routine.</span>
<span class=linenos data-linenos="694 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="695 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>set_dataset_path</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>dataset_path</span><span class=p>)</span>
<span class=linenos data-linenos="696 "></span>        <span class=n>data_manager</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>training_data</span><span class=p>()</span>
<span class=linenos data-linenos="697 "></span>        <span class=n>tp_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>type</span><span class=p>()</span>
<span class=linenos data-linenos="698 "></span>        <span class=n>data_manager</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>tp_type</span><span class=o>=</span><span class=n>tp_type</span><span class=p>)</span>
<span class=linenos data-linenos="699 "></span>        <span class=n>train_loader</span><span class=p>,</span> <span class=n>test_loader</span> <span class=o>=</span> <span class=n>data_manager</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>test_ratio</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<span class=linenos data-linenos="700 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>training_data_loader</span> <span class=o>=</span> <span class=n>train_loader</span>
<span class=linenos data-linenos="701 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>testing_data_loader</span> <span class=o>=</span> <span class=n>test_loader</span>
<span class=linenos data-linenos="702 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>training_routine</span><span class=p>()</span>
<span class=linenos data-linenos="703 "></span>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
<span class=linenos data-linenos="704 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Cannot train model in job: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=nb>repr</span><span class=p>(</span><span class=n>exc</span><span class=p>))</span>
<span class=linenos data-linenos="705 "></span>    <span class=c1># Save the current parameters.</span>
<span class=linenos data-linenos="706 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="707 "></span>        <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="708 "></span>            <span class=c1># TODO: should test status code but not yet returned by upload_file</span>
<span class=linenos data-linenos="709 "></span>            <span class=n>path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<span class=linenos data-linenos="710 "></span>                <span class=n>environ</span><span class=p>[</span><span class=s2>&quot;TMP_DIR&quot;</span><span class=p>],</span> <span class=sa>f</span><span class=s2>&quot;local_params_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=si>}</span><span class=s2>.mpk&quot;</span>
<span class=linenos data-linenos="711 "></span>            <span class=p>)</span>
<span class=linenos data-linenos="712 "></span>            <span class=n>Serializer</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_training_plan</span><span class=o>.</span><span class=n>get_model_params</span><span class=p>(),</span> <span class=n>path</span><span class=p>)</span>
<span class=linenos data-linenos="713 "></span>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
<span class=linenos data-linenos="714 "></span>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Cannot write results: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=nb>repr</span><span class=p>(</span><span class=n>exc</span><span class=p>))</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <h2 id=fedbiomed.researcher.job-functions>Functions</h2> </div> </div> </div> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Typevar_TrainingPlanClass class=md-nav__link> Typevar_TrainingPlanClass </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.training_plans_types class=md-nav__link> training_plans_types </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job-classes class=md-nav__link> Classes </a> <nav class=toc-nav aria-label=Classes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job class=md-nav__link> Job </a> <nav class=toc-nav aria-label=Job> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.aggregator_args class=md-nav__link> aggregator_args </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.id class=md-nav__link> id </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.last_msg class=md-nav__link> last_msg </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.nodes class=md-nav__link> nodes </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.requests class=md-nav__link> requests </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.training_args class=md-nav__link> training_args </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.training_plan class=md-nav__link> training_plan </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.training_plan_file class=md-nav__link> training_plan_file </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.training_replies class=md-nav__link> training_replies </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.check_training_plan_is_approved_by_nodes class=md-nav__link> check_training_plan_is_approved_by_nodes() </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.extract_received_optimizer_aux_var_from_round class=md-nav__link> extract_received_optimizer_aux_var_from_round() </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.load_state_breakpoint class=md-nav__link> load_state_breakpoint() </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.save_state_breakpoint class=md-nav__link> save_state_breakpoint() </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.start_nodes_training_round class=md-nav__link> start_nodes_training_round() </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.Job.update_parameters class=md-nav__link> update_parameters() </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.localJob class=md-nav__link> localJob </a> <nav class=toc-nav aria-label=localJob> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.localJob-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.localJob.dataset_path class=md-nav__link> dataset_path </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.localJob.training_args class=md-nav__link> training_args </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.localJob.training_plan class=md-nav__link> training_plan </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.localJob-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job.localJob.start_training class=md-nav__link> start_training() </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.researcher.job-functions class=md-nav__link> Functions </a> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed © 2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../../assets/javascript/lunr.js></script> <script src=../../../../assets/javascript/theme.js></script> </body> </html>