<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../../../versions.json";
      const search_worker_js = "../../../../assets/javascript/search-worker.js";
      const search_index_json = "../../../../search/search_index.json";
      const base_url = '../../../..';
    </script><!-- Site title --><title>Data - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../../../ > <img src=../../../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../../../assets/img/menu.svg> <img class=close style=display:none src=../../../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../../../..>Home</a> </li> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../../#funding>Funding</a> </li> <li class> <a href=../../../../news/ >News</a> </li> <li class> <a href=../../../../#contributors>Contributors</a> </li> <li class> <a href=../../../../#users>Users</a> </li> <li class> <a href=../../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> <li class> <a href=../../../../getting-started/installation/ class>Installation</a> </li> <li class> <a href=../../../../getting-started/basic-example/ class>Basic Example</a> </li> <li class> <a href=../../../../getting-started/configuration/ class>Configuration</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../../../tutorials/pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../../../tutorials/pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/pytorch/05_Transfer-learning_tutorial_usingDenseNet-121/ class>Transfer-learning in Fed-BioMed tutorial</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/flamby/flamby/ class>General Concepts</a> </li> <li class> <a href=../../../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby integration in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../../../../tutorials/concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../../../user-guide/deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../../../user-guide/deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../../../user-guide/nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../../../user-guide/nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../../../user-guide/nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../../../user-guide/nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../../../user-guide/researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../../../user-guide/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../../../user-guide/researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../../../user-guide/researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../../../user-guide/researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../../../user-guide/researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../../../user-guide/advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../../user-guide/secagg/introduction/ class>Introduction</a> </li> <li class> <a href=../../../../user-guide/secagg/configuration/ class>Configuration</a> </li> <li class> <a href=../../../../user-guide/secagg/researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../certificate_manager/ class>Certificate Manager</a> </li> <li class> <a href=../cli/ class>CLI</a> </li> <li class> <a href=../config/ class>Config</a> </li> <li class> <a href=../constants/ class>Constants</a> </li> <li class=current> <a href=./ class="link current">Data</a> </li> <li class> <a href=../db/ class>DB</a> </li> <li class> <a href=../exceptions/ class>Exceptions</a> </li> <li class> <a href=../ipython/ class>IPython</a> </li> <li class> <a href=../json/ class>Json</a> </li> <li class> <a href=../logger/ class>Logger</a> </li> <li class> <a href=../message/ class>Message</a> </li> <li class> <a href=../metrics/ class>Metrics</a> </li> <li class> <a href=../models/ class>Model</a> </li> <li class> <a class href=../mpc_controller.md>MPC controller</a> </li> <li class> <a href=../optimizers/ class>Optimizers</a> </li> <li class> <a href=../privacy/ class>Privacy</a> </li> <li class> <a href=../secagg/ class>Secagg</a> </li> <li class> <a href=../secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../serializer/ class>Serializer</a> </li> <li class> <a href=../singleton/ class>Singleton</a> </li> <li class> <a href=../synchro/ class>Synchro</a> </li> <li class> <a href=../tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../training_args/ class>TrainingArgs</a> </li> <li class> <a href=../utils/ class>Utils</a> </li> <li class> <a href=../validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../node/cli/ class>CLI</a> </li> <li class> <a href=../../node/cli_utils/ class>CLI Utils</a> </li> <li class> <a href=../../node/config/ class>Config</a> </li> <li class> <a href=../../node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../node/node/ class>Node</a> </li> <li class> <a href=../../node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../node/requests/ class>Requests</a> </li> <li class> <a href=../../node/round/ class>Round</a> </li> <li class> <a href=../../node/secagg/ class>Secagg</a> </li> <li class> <a href=../../node/secagg_manager/ class>Secagg Manager</a> </li> <li class> <a href=../../node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../researcher/aggregators/ class>Aggregators</a> </li> <li class> <a href=../../researcher/cli/ class>CLI</a> </li> <li class> <a href=../../researcher/config/ class>Config</a> </li> <li class> <a href=../../researcher/datasets/ class>Datasets</a> </li> <li class> <a href=../../researcher/federated_workflows/ class>Federated Workflows</a> </li> <li class> <a href=../../researcher/filetools/ class>Filetools</a> </li> <li class> <a href=../../researcher/jobs/ class>Jobs</a> </li> <li class> <a href=../../researcher/monitor/ class>Monitor</a> </li> <li class> <a href=../../researcher/node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../../researcher/requests/ class>Requests</a> </li> <li class> <a href=../../researcher/secagg/ class>Secagg</a> </li> <li class> <a href=../../researcher/strategies/ class>Strategies</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Transport <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../transport/client/ class>Client</a> </li> <li class> <a href=../../transport/controller/ class>Controller</a> </li> <li class> <a href=../../transport/node_agent/ class>NodeAgent</a> </li> <li class> <a href=../../transport/server/ class>Server</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../../usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../../ci/ class>Continuous Integration</a> </li> <li class> <a href=../../../definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../../development-environment/ class>Development Environment</a> </li> <li class> <a href=../../../testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../../messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> <li class> <a href=../../../../support/troubleshooting/ class>FAQ & Troubleshooting</a> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <h1>Data</h1> <article> <div class="doc doc-object doc-module"> <div class="doc doc-contents first"> <p>Classes that simplify imports from fedbiomed.common.data</p> <div class="doc doc-children"> <h2 id=fedbiomed.common.data-classes>Classes</h2> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.DataLoadingBlock class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DataLoadingBlock</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DataLoadingBlock</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title="abc.ABC" href="https://docs.python.org/3/library/abc.html#abc.ABC">ABC</a></code></p> <p>The building blocks of a DataLoadingPlan.</p> <p>A <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> describes an intermediary layer between the researcher and the node's filesystem. It allows the node to specify a customization in the way data is "perceived" by the data loaders during training.</p> <p>A <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> is identified by its type_id attribute. Thus, this attribute should be unique among all <a class="autorefs autorefs-internal" href="../constants/#fedbiomed.common.constants.DataLoadingBlockTypes">DataLoadingBlockTypes</a> in the same <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingPlan">DataLoadingPlan</a>. Moreover, we may test equality between a <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> and a string by checking its type_id, as a means of easily testing whether a <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> is contained in a collection.</p> <p>Correct usage of this class requires creating ad-hoc subclasses. The <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> class is not intended to be instantiated directly.</p> <p>Subclasses of <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> must respect the following conditions:</p> <ol> <li>implement a default constructor</li> <li>the implemented constructor must call <code>super().__init__()</code></li> <li>extend the serialize(self) and the deserialize(self, load_from: dict) functions</li> <li>both serialize and deserialize must call super's serialize and deserialize respectively</li> <li>the deserialize function must always return self</li> <li>the serialize function must update the dict returned by super's serialize</li> <li>implement an apply function that takes arbitrary arguments and applies the logic of the loading_block</li> <li>update the _validation_scheme to define rules for all new fields returned by the serialize function</li> </ol> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.DataLoadingBlock.__serialization_id">__serialization_id</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(str) identifies <em>one serialized instance</em> of the DataLoadingBlock</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="264 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="265 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span> <span class=o>=</span> <span class=s1>&#39;serialized_dlb_&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="266 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span> <span class=o>=</span> <span class=n>SerializationValidation</span><span class=p>()</span>
<span class=linenos data-linenos="267 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>(</span><span class=n>SerializationValidation</span><span class=o>.</span><span class=n>dlb_default_scheme</span><span class=p>())</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.DataLoadingBlock-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingBlock.apply class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">apply</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>apply</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Abstract method representing an application of the DataLoadingBlock</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="298 "></span><span class=nd>@abstractmethod</span>
<span class=linenos data-linenos="299 "></span><span class=k>def</span> <span class=nf>apply</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=linenos data-linenos="300 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Abstract method representing an application of the DataLoadingBlock</span>
<span class=linenos data-linenos="301 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="302 "></span>    <span class=k>pass</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingBlock.deserialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">deserialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>deserialize</span><span class=p>(</span><span class=n>load_from</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reconstruct the DataLoadingBlock from a serialized version.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>load_from</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary as obtained by the serialize function.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: the self instance</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="286 "></span><span class=k>def</span> <span class=nf>deserialize</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>load_from</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TDataLoadingBlock</span><span class=p>:</span>
<span class=linenos data-linenos="287 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reconstruct the DataLoadingBlock from a serialized version.</span>
<span class=linenos data-linenos="288 "></span>
<span class=linenos data-linenos="289 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="290 "></span><span class=sd>        load_from (dict): a dictionary as obtained by the serialize function.</span>
<span class=linenos data-linenos="291 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="292 "></span><span class=sd>        the self instance</span>
<span class=linenos data-linenos="293 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="294 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>validate</span><span class=p>(</span><span class=n>load_from</span><span class=p>,</span> <span class=n>FedbiomedLoadingBlockValueError</span><span class=p>)</span>
<span class=linenos data-linenos="295 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span> <span class=o>=</span> <span class=n>load_from</span><span class=p>[</span><span class=s1>&#39;dlb_id&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="296 "></span>    <span class=k>return</span> <span class=bp>self</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingBlock.get_serialization_id class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">get_serialization_id</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>get_serialization_id</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Expose serialization id as read-only</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="269 "></span><span class=k>def</span> <span class=nf>get_serialization_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="270 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Expose serialization id as read-only&quot;&quot;&quot;</span>
<span class=linenos data-linenos="271 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingBlock.instantiate_class class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">instantiate_class</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>instantiate_class</span><span class=p>(</span><span class=n>loading_block</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Instantiate one <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> object of the type defined in the arguments.</p> <p>Uses the <code>loading_block_module</code> and <code>loading_block_class</code> fields of the loading_block argument to identify the type of <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> to be instantiated, then calls its default constructor. Note that this function <strong>does not call deserialize</strong>.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>loading_block</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p><a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> metadata in the format returned by the serialize function.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: A default-constructed instance of a <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> of the type defined in the metadata. Raises: FedbiomedLoadingBlockError: if the instantiation process raised any exception.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="304 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="305 "></span><span class=k>def</span> <span class=nf>instantiate_class</span><span class=p>(</span><span class=n>loading_block</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TDataLoadingBlock</span><span class=p>:</span>
<span class=linenos data-linenos="306 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Instantiate one [DataLoadingBlock][fedbiomed.common.data._data_loading_plan.DataLoadingBlock]</span>
<span class=linenos data-linenos="307 "></span><span class=sd>    object of the type defined in the arguments.</span>
<span class=linenos data-linenos="308 "></span>
<span class=linenos data-linenos="309 "></span><span class=sd>    Uses the `loading_block_module` and `loading_block_class` fields of the loading_block argument to</span>
<span class=linenos data-linenos="310 "></span><span class=sd>    identify the type of [DataLoadingBlock][fedbiomed.common.data._data_loading_plan.DataLoadingBlock]</span>
<span class=linenos data-linenos="311 "></span><span class=sd>    to be instantiated, then calls its default constructor.</span>
<span class=linenos data-linenos="312 "></span><span class=sd>    Note that this function **does not call deserialize**.</span>
<span class=linenos data-linenos="313 "></span>
<span class=linenos data-linenos="314 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="315 "></span><span class=sd>        loading_block (dict): [DataLoadingBlock][fedbiomed.common.data._data_loading_plan.DataLoadingBlock]</span>
<span class=linenos data-linenos="316 "></span><span class=sd>            metadata in the format returned by the serialize function.</span>
<span class=linenos data-linenos="317 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="318 "></span><span class=sd>        A default-constructed instance of a</span>
<span class=linenos data-linenos="319 "></span><span class=sd>            [DataLoadingBlock][fedbiomed.common.data._data_loading_plan.DataLoadingBlock]</span>
<span class=linenos data-linenos="320 "></span><span class=sd>            of the type defined in the metadata.</span>
<span class=linenos data-linenos="321 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="322 "></span><span class=sd>       FedbiomedLoadingBlockError: if the instantiation process raised any exception.</span>
<span class=linenos data-linenos="323 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="324 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="325 "></span>        <span class=n>dlb_module</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>loading_block</span><span class=p>[</span><span class=s1>&#39;loading_block_module&#39;</span><span class=p>])</span>
<span class=linenos data-linenos="326 "></span>        <span class=n>dlb</span> <span class=o>=</span> <span class=nb>eval</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;dlb_module.</span><span class=si>{</span><span class=n>loading_block</span><span class=p>[</span><span class=s1>&#39;loading_block_class&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>()&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="327 "></span>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="328 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: could not instantiate DataLoadingBlock from the following metadata: &quot;</span> <span class=o>+</span>\
<span class=linenos data-linenos="329 "></span>              <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>loading_block</span><span class=si>}</span><span class=s2> because of </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="330 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="331 "></span>        <span class=k>raise</span> <span class=n>FedbiomedLoadingBlockError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="332 "></span>    <span class=k>return</span> <span class=n>dlb</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingBlock.instantiate_key class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">instantiate_key</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>instantiate_key</span><span class=p>(</span><span class=n>key_module</span><span class=p>,</span> <span class=n>key_classname</span><span class=p>,</span> <span class=n>loading_block_key_str</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Imports and loads <a class="autorefs autorefs-internal" href="../constants/#fedbiomed.common.constants.DataLoadingBlockTypes">DataLoadingBlockTypes</a> regarding the passed arguments</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>key_module</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>key_classname</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>loading_block_key_str</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDataLoadingPlanError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDataLoadingPlanError">FedbiomedDataLoadingPlanError</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>DataLoadingBlockTypes</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.constants.DataLoadingBlockTypes" href="../constants/#fedbiomed.common.constants.DataLoadingBlockTypes">DataLoadingBlockTypes</a></code> </td> <td> <div class=doc-md-description> <p><em>description</em></p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="334 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="335 "></span><span class=k>def</span> <span class=nf>instantiate_key</span><span class=p>(</span><span class=n>key_module</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>key_classname</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>loading_block_key_str</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DataLoadingBlockTypes</span><span class=p>:</span>
<span class=linenos data-linenos="336 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Imports and loads [DataLoadingBlockTypes][fedbiomed.common.constants.DataLoadingBlockTypes]</span>
<span class=linenos data-linenos="337 "></span><span class=sd>    regarding the passed arguments</span>
<span class=linenos data-linenos="338 "></span>
<span class=linenos data-linenos="339 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="340 "></span><span class=sd>        key_module (str): _description_</span>
<span class=linenos data-linenos="341 "></span><span class=sd>        key_classname (str): _description_</span>
<span class=linenos data-linenos="342 "></span><span class=sd>        loading_block_key_str (str): _description_</span>
<span class=linenos data-linenos="343 "></span>
<span class=linenos data-linenos="344 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="345 "></span><span class=sd>        FedbiomedDataLoadingPlanError: _description_</span>
<span class=linenos data-linenos="346 "></span>
<span class=linenos data-linenos="347 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="348 "></span><span class=sd>        DataLoadingBlockTypes: _description_</span>
<span class=linenos data-linenos="349 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="350 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="351 "></span>        <span class=n>keys</span> <span class=o>=</span> <span class=n>import_module</span><span class=p>(</span><span class=n>key_module</span><span class=p>)</span>
<span class=linenos data-linenos="352 "></span>        <span class=n>loading_block_key</span> <span class=o>=</span> <span class=nb>eval</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;keys.</span><span class=si>{</span><span class=n>key_classname</span><span class=si>}</span><span class=s2>(&#39;</span><span class=si>{</span><span class=n>loading_block_key_str</span><span class=si>}</span><span class=s2>&#39;)&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="353 "></span>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="354 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB615</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Error deserializing loading block key &quot;</span> <span class=o>+</span> \
<span class=linenos data-linenos="355 "></span>              <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>loading_block_key_str</span><span class=si>}</span><span class=s2> with path </span><span class=si>{</span><span class=n>key_module</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>key_classname</span><span class=si>}</span><span class=s2> &quot;</span> <span class=o>+</span> \
<span class=linenos data-linenos="356 "></span>              <span class=sa>f</span><span class=s2>&quot;because of </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="357 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="358 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="359 "></span>    <span class=k>return</span> <span class=n>loading_block_key</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingBlock.serialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">serialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>serialize</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Serializes the class in a format similar to json.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of key-value pairs sufficient for reconstructing</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>the DataLoadingBlock.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="273 "></span><span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="274 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Serializes the class in a format similar to json.</span>
<span class=linenos data-linenos="275 "></span>
<span class=linenos data-linenos="276 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="277 "></span><span class=sd>        a dictionary of key-value pairs sufficient for reconstructing</span>
<span class=linenos data-linenos="278 "></span><span class=sd>        the DataLoadingBlock.</span>
<span class=linenos data-linenos="279 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="280 "></span>    <span class=k>return</span> <span class=nb>dict</span><span class=p>(</span>
<span class=linenos data-linenos="281 "></span>        <span class=n>loading_block_class</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__qualname__</span><span class=p>,</span>
<span class=linenos data-linenos="282 "></span>        <span class=n>loading_block_module</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=vm>__module__</span><span class=p>,</span>
<span class=linenos data-linenos="283 "></span>        <span class=n>dlb_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__serialization_id</span>
<span class=linenos data-linenos="284 "></span>    <span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.DataLoadingPlan class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DataLoadingPlan</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DataLoadingPlan</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-internal" title="fedbiomed.common.constants.DataLoadingBlockTypes" href="../constants/#fedbiomed.common.constants.DataLoadingBlockTypes">DataLoadingBlockTypes</a>, <a class="autorefs autorefs-internal" title="fedbiomed.common.data._data_loading_plan.DataLoadingBlock" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a>]</code></p> <p>Customizations to the way the data is loaded and presented for training.</p> <p>A DataLoadingPlan is a dictionary of {name: DataLoadingBlock} pairs. Each <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> represents a customization to the way data is loaded and presented to the researcher. These customizations are defined by the node, but they operate on a Dataset class, which is defined by the library and instantiated by the researcher.</p> <p>To exploit this functionality, a Dataset must be modified to accept the customizations provided by the DataLoadingPlan. To simplify this process, we provide the <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingPlanMixin">DataLoadingPlanMixin</a> class below.</p> <p>The DataLoadingPlan class should be instantiated directly, no subclassing is needed. The DataLoadingPlan <em>is</em> a dict, and exposes the same interface as a dict.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title="fedbiomed.common.data.DataLoadingPlan.dlp_id" href="#fedbiomed.common.data.DataLoadingPlan.dlp_id">dlp_id</a></code></td> <td> </td> <td> <div class=doc-md-description> <p>str representing a unique plan id (auto-generated)</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title="fedbiomed.common.data.DataLoadingPlan.desc" href="#fedbiomed.common.data.DataLoadingPlan.desc">desc</a></code></td> <td> </td> <td> <div class=doc-md-description> <p>str representing an optional user-friendly short description</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><a class="autorefs autorefs-internal" title="fedbiomed.common.data.DataLoadingPlan.target_dataset_type" href="#fedbiomed.common.data.DataLoadingPlan.target_dataset_type">target_dataset_type</a></code></td> <td> </td> <td> <div class=doc-md-description> <p>a DatasetTypes enum representing the type of dataset targeted by this DataLoadingPlan</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="454 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=linenos data-linenos="455 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>DataLoadingPlan</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=linenos data-linenos="456 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>dlp_id</span> <span class=o>=</span> <span class=s1>&#39;dlp_&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
<span class=linenos data-linenos="457 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>desc</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
<span class=linenos data-linenos="458 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>NONE</span>
<span class=linenos data-linenos="459 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validation</span> <span class=o>=</span> <span class=n>SerializationValidation</span><span class=p>()</span>
<span class=linenos data-linenos="460 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validation</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>(</span><span class=n>SerializationValidation</span><span class=o>.</span><span class=n>dlp_default_scheme</span><span class=p>())</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.DataLoadingPlan-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.DataLoadingPlan.desc class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">desc</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>desc</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.DataLoadingPlan.dlp_id class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">dlp_id</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>dlp_id</span> <span class=o>=</span> <span class=s1>&#39;dlp_&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.DataLoadingPlan.target_dataset_type class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">target_dataset_type</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>NONE</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.common.data.DataLoadingPlan-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingPlan.deserialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">deserialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>deserialize</span><span class=p>(</span><span class=n>serialized_dlp</span><span class=p>,</span> <span class=n>serialized_loading_blocks</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reconstruct the DataLoadingPlan][fedbiomed.common.data._data_loading_plan.DataLoadingPlan] from a serialized version.</p> <div class="admonition warning"> <p class=admonition-title>Calling this function will <em>clear</em> the contained [DataLoadingBlockTypes].</p> <p>This function may not be used to "update" nor to "append to" a <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingPlan">DataLoadingPlan</a>.</p> </div> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>serialized_dlp</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of data loading plan metadata, as obtained from the first output of the serialize function</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>serialized_loading_blocks</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>]</code> </td> <td> <div class=doc-md-description> <p>a list of dictionaries of loading_block metadata, as obtained from the second output of the serialize function</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: the self instance</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="494 "></span><span class=k>def</span> <span class=nf>deserialize</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>serialized_dlp</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span> <span class=n>serialized_loading_blocks</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>TDataLoadingPlan</span><span class=p>:</span>
<span class=linenos data-linenos="495 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reconstruct the DataLoadingPlan][fedbiomed.common.data._data_loading_plan.DataLoadingPlan] from a serialized version.</span>
<span class=linenos data-linenos="496 "></span>
<span class=linenos data-linenos="497 "></span><span class=sd>    !!! warning &quot;Calling this function will *clear* the contained [DataLoadingBlockTypes].&quot;</span>
<span class=linenos data-linenos="498 "></span><span class=sd>        This function may not be used to &quot;update&quot; nor to &quot;append to&quot;</span>
<span class=linenos data-linenos="499 "></span><span class=sd>        a [DataLoadingPlan][fedbiomed.common.data._data_loading_plan.DataLoadingPlan].</span>
<span class=linenos data-linenos="500 "></span>
<span class=linenos data-linenos="501 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="502 "></span><span class=sd>        serialized_dlp: a dictionary of data loading plan metadata, as obtained from the first output of the</span>
<span class=linenos data-linenos="503 "></span><span class=sd>            serialize function</span>
<span class=linenos data-linenos="504 "></span><span class=sd>        serialized_loading_blocks: a list of dictionaries of loading_block metadata, as obtained from the</span>
<span class=linenos data-linenos="505 "></span><span class=sd>            second output of the serialize function</span>
<span class=linenos data-linenos="506 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="507 "></span><span class=sd>        the self instance</span>
<span class=linenos data-linenos="508 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="509 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validation</span><span class=o>.</span><span class=n>validate</span><span class=p>(</span><span class=n>serialized_dlp</span><span class=p>,</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>)</span>
<span class=linenos data-linenos="510 "></span>
<span class=linenos data-linenos="511 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
<span class=linenos data-linenos="512 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>dlp_id</span> <span class=o>=</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s1>&#39;dlp_id&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="513 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>desc</span> <span class=o>=</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s1>&#39;dlp_name&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="514 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>DatasetTypes</span><span class=p>(</span><span class=n>serialized_dlp</span><span class=p>[</span><span class=s1>&#39;target_dataset_type&#39;</span><span class=p>])</span>
<span class=linenos data-linenos="515 "></span>    <span class=k>for</span> <span class=n>loading_block_key_str</span><span class=p>,</span> <span class=n>dlb_id</span> <span class=ow>in</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s1>&#39;loading_blocks&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="516 "></span>        <span class=n>key_module</span><span class=p>,</span> <span class=n>key_classname</span> <span class=o>=</span> <span class=n>serialized_dlp</span><span class=p>[</span><span class=s1>&#39;key_paths&#39;</span><span class=p>][</span><span class=n>loading_block_key_str</span><span class=p>]</span>
<span class=linenos data-linenos="517 "></span>        <span class=n>loading_block_key</span> <span class=o>=</span> <span class=n>DataLoadingBlock</span><span class=o>.</span><span class=n>instantiate_key</span><span class=p>(</span><span class=n>key_module</span><span class=p>,</span> <span class=n>key_classname</span><span class=p>,</span> <span class=n>loading_block_key_str</span><span class=p>)</span>
<span class=linenos data-linenos="518 "></span>        <span class=n>loading_block</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=nb>filter</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=s1>&#39;dlb_id&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=n>dlb_id</span><span class=p>,</span>
<span class=linenos data-linenos="519 "></span>                                    <span class=n>serialized_loading_blocks</span><span class=p>))</span>
<span class=linenos data-linenos="520 "></span>        <span class=n>dlb</span> <span class=o>=</span> <span class=n>DataLoadingBlock</span><span class=o>.</span><span class=n>instantiate_class</span><span class=p>(</span><span class=n>loading_block</span><span class=p>)</span>
<span class=linenos data-linenos="521 "></span>        <span class=bp>self</span><span class=p>[</span><span class=n>loading_block_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>dlb</span><span class=o>.</span><span class=n>deserialize</span><span class=p>(</span><span class=n>loading_block</span><span class=p>)</span>
<span class=linenos data-linenos="522 "></span>    <span class=k>return</span> <span class=bp>self</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingPlan.infer_dataset_type class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">infer_dataset_type</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>infer_dataset_type</span><span class=p>(</span><span class=n>dataset</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Infer the type of a given dataset.</p> <p>This function provides the mapping between a dataset's class and the DatasetTypes enum. If the dataset exposes the correct interface (i.e. the get_dataset_type method) then it directly calls that, otherwise it tries to apply some heuristics to guess the type of dataset.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dataset</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></code> </td> <td> <div class=doc-md-description> <p>the dataset whose type we want to infer.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: a DatasetTypes enum element which identifies the type of the dataset. Raises: FedbiomedDataLoadingPlanValueError: if the dataset does not have a <code>get_dataset_type</code> method and moreover the type could not be guessed.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="529 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="530 "></span><span class=k>def</span> <span class=nf>infer_dataset_type</span><span class=p>(</span><span class=n>dataset</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DatasetTypes</span><span class=p>:</span>
<span class=linenos data-linenos="531 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Infer the type of a given dataset.</span>
<span class=linenos data-linenos="532 "></span>
<span class=linenos data-linenos="533 "></span><span class=sd>    This function provides the mapping between a dataset&#39;s class and the DatasetTypes enum. If the dataset exposes</span>
<span class=linenos data-linenos="534 "></span><span class=sd>    the correct interface (i.e. the get_dataset_type method) then it directly calls that, otherwise it tries to</span>
<span class=linenos data-linenos="535 "></span><span class=sd>    apply some heuristics to guess the type of dataset.</span>
<span class=linenos data-linenos="536 "></span>
<span class=linenos data-linenos="537 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="538 "></span><span class=sd>        dataset: the dataset whose type we want to infer.</span>
<span class=linenos data-linenos="539 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="540 "></span><span class=sd>        a DatasetTypes enum element which identifies the type of the dataset.</span>
<span class=linenos data-linenos="541 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="542 "></span><span class=sd>        FedbiomedDataLoadingPlanValueError: if the dataset does not have a `get_dataset_type` method and moreover</span>
<span class=linenos data-linenos="543 "></span><span class=sd>            the type could not be guessed.</span>
<span class=linenos data-linenos="544 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="545 "></span>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=s1>&#39;get_dataset_type&#39;</span><span class=p>):</span>
<span class=linenos data-linenos="546 "></span>        <span class=k>return</span> <span class=n>dataset</span><span class=o>.</span><span class=n>get_dataset_type</span><span class=p>()</span>
<span class=linenos data-linenos="547 "></span>    <span class=k>elif</span> <span class=n>dataset</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;ImageFolder&#39;</span><span class=p>:</span>
<span class=linenos data-linenos="548 "></span>        <span class=c1># ImageFolder could be both an images type or mednist. Try to identify mednist with some heuristic.</span>
<span class=linenos data-linenos="549 "></span>        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=s1>&#39;classes&#39;</span><span class=p>)</span> <span class=ow>and</span> \
<span class=linenos data-linenos="550 "></span>                <span class=nb>all</span><span class=p>([</span><span class=n>x</span> <span class=ow>in</span> <span class=n>dataset</span><span class=o>.</span><span class=n>classes</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=p>[</span><span class=s1>&#39;AbdomenCT&#39;</span><span class=p>,</span> <span class=s1>&#39;BreastMRI&#39;</span><span class=p>,</span> <span class=s1>&#39;CXR&#39;</span><span class=p>,</span> <span class=s1>&#39;ChestCT&#39;</span><span class=p>,</span> <span class=s1>&#39;Hand&#39;</span><span class=p>,</span> <span class=s1>&#39;HeadCT&#39;</span><span class=p>]]):</span>
<span class=linenos data-linenos="551 "></span>            <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>MEDNIST</span>
<span class=linenos data-linenos="552 "></span>        <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="553 "></span>            <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>IMAGES</span>
<span class=linenos data-linenos="554 "></span>    <span class=k>elif</span> <span class=n>dataset</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;MNIST&#39;</span><span class=p>:</span>
<span class=linenos data-linenos="555 "></span>        <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>DEFAULT</span>
<span class=linenos data-linenos="556 "></span>    <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB615</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Trying to infer dataset type of </span><span class=si>{</span><span class=n>dataset</span><span class=si>}</span><span class=s2> is not supported &quot;</span> <span class=o>+</span> \
<span class=linenos data-linenos="557 "></span>        <span class=sa>f</span><span class=s2>&quot;for datasets of type </span><span class=si>{</span><span class=n>dataset</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__qualname__</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="558 "></span>    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="559 "></span>    <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingPlan.serialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">serialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>serialize</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Serializes the class in a format similar to json.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>, <a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>]</code> </td> <td> <div class=doc-md-description> <p>a tuple sufficient for reconstructing the DataLoading plan. It includes: - a dictionary of key-value pairs with the <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingPlan">DataLoadingPlan</a> parameters. - a list of dict containing the data for reconstruction all the DataLoadingBlock of the <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingPlan">DataLoadingPlan</a></p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="476 "></span><span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=n>List</span><span class=p>]:</span>
<span class=linenos data-linenos="477 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Serializes the class in a format similar to json.</span>
<span class=linenos data-linenos="478 "></span>
<span class=linenos data-linenos="479 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="480 "></span><span class=sd>        a tuple sufficient for reconstructing the DataLoading plan. It includes:</span>
<span class=linenos data-linenos="481 "></span><span class=sd>            - a dictionary of key-value pairs with the</span>
<span class=linenos data-linenos="482 "></span><span class=sd>            [DataLoadingPlan][fedbiomed.common.data._data_loading_plan.DataLoadingPlan] parameters.</span>
<span class=linenos data-linenos="483 "></span><span class=sd>            - a list of dict containing the data for reconstruction all the DataLoadingBlock</span>
<span class=linenos data-linenos="484 "></span><span class=sd>                of the [DataLoadingPlan][fedbiomed.common.data._data_loading_plan.DataLoadingPlan] </span>
<span class=linenos data-linenos="485 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="486 "></span>    <span class=k>return</span> <span class=nb>dict</span><span class=p>(</span>
<span class=linenos data-linenos="487 "></span>        <span class=n>dlp_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>dlp_id</span><span class=p>,</span>
<span class=linenos data-linenos="488 "></span>        <span class=n>dlp_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>desc</span><span class=p>,</span>
<span class=linenos data-linenos="489 "></span>        <span class=n>target_dataset_type</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>target_dataset_type</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
<span class=linenos data-linenos="490 "></span>        <span class=n>loading_blocks</span><span class=o>=</span><span class=p>{</span><span class=n>key</span><span class=o>.</span><span class=n>value</span><span class=p>:</span> <span class=n>dlb</span><span class=o>.</span><span class=n>get_serialization_id</span><span class=p>()</span> <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>dlb</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>()},</span>
<span class=linenos data-linenos="491 "></span>        <span class=n>key_paths</span><span class=o>=</span><span class=p>{</span><span class=n>key</span><span class=o>.</span><span class=n>value</span><span class=p>:</span> <span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>key</span><span class=o>.</span><span class=vm>__module__</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>key</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__qualname__</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span> <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>keys</span><span class=p>()}</span>
<span class=linenos data-linenos="492 "></span>    <span class=p>),</span> <span class=p>[</span><span class=n>dlb</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span> <span class=k>for</span> <span class=n>dlb</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>values</span><span class=p>()]</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.DataLoadingPlanMixin class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DataLoadingPlanMixin</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DataLoadingPlanMixin</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Utility class to enable DLP functionality in a dataset.</p> <p>Any Dataset class that inherits from [DataLoadingPlanMixin] will have the basic tools necessary to support a <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingPlan">DataLoadingPlan</a>. Typically, the logic of each specific DataLoadingBlock in the <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingPlan">DataLoadingPlan</a> will be implemented in the form of hooks that are called within the Dataset's implementation using the helper function apply_dlb defined below.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="572 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="573 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.DataLoadingPlanMixin-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingPlanMixin.apply_dlb class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">apply_dlb</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>apply_dlb</span><span class=p>(</span><span class=n>default_ret_value</span><span class=p>,</span> <span class=n>dlb_key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Apply one DataLoadingBlock identified by its key.</p> <p>Note that we want to easily support the case where the DataLoadingPlan is not activated, or the requested loading block is not contained in the DataLoadingPlan. This is achieved by providing a default return value to be returned when the above conditions are met. Hence, most of the calls to apply_dlb will look like this: <div class=highlight><pre><span></span><code>value = self.apply_dlb(value, &#39;my-loading-block&#39;, my_apply_args)
</code></pre></div> This will ensure that value is not changed if the DataLoadingPlan is not active.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>default_ret_value</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></code> </td> <td> <div class=doc-md-description> <p>the value to be returned in case that the dlp functionality is not required</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>dlb_key</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.constants.DataLoadingBlockTypes" href="../constants/#fedbiomed.common.constants.DataLoadingBlockTypes">DataLoadingBlockTypes</a></code> </td> <td> <div class=doc-md-description> <p>the key of the DataLoadingBlock to be applied</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>*args</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code> </td> <td> <div class=doc-md-description> <p>forwarded to the DataLoadingBlock's apply function</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code> </td> <td> <div class=doc-md-description> <p>forwarded to the DataLoadingBlock's apply function</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p>Returns: the output of the DataLoadingBlock's apply function, or the default_ret_value when dlp is None or it does not contain the requested loading block</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="594 "></span><span class=k>def</span> <span class=nf>apply_dlb</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>default_ret_value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>dlb_key</span><span class=p>:</span> <span class=n>DataLoadingBlockTypes</span><span class=p>,</span>
<span class=linenos data-linenos="595 "></span>              <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>],</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
<span class=linenos data-linenos="596 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Apply one DataLoadingBlock identified by its key.</span>
<span class=linenos data-linenos="597 "></span>
<span class=linenos data-linenos="598 "></span><span class=sd>    Note that we want to easily support the case where the DataLoadingPlan</span>
<span class=linenos data-linenos="599 "></span><span class=sd>    is not activated, or the requested loading block is not contained in the</span>
<span class=linenos data-linenos="600 "></span><span class=sd>    DataLoadingPlan. This is achieved by providing a default return value</span>
<span class=linenos data-linenos="601 "></span><span class=sd>    to be returned when the above conditions are met. Hence, most of the</span>
<span class=linenos data-linenos="602 "></span><span class=sd>    calls to apply_dlb will look like this:</span>
<span class=linenos data-linenos="603 "></span><span class=sd>    ```</span>
<span class=linenos data-linenos="604 "></span><span class=sd>    value = self.apply_dlb(value, &#39;my-loading-block&#39;, my_apply_args)</span>
<span class=linenos data-linenos="605 "></span><span class=sd>    ```</span>
<span class=linenos data-linenos="606 "></span><span class=sd>    This will ensure that value is not changed if the DataLoadingPlan is</span>
<span class=linenos data-linenos="607 "></span><span class=sd>    not active.</span>
<span class=linenos data-linenos="608 "></span>
<span class=linenos data-linenos="609 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="610 "></span><span class=sd>        default_ret_value: the value to be returned in case that the dlp</span>
<span class=linenos data-linenos="611 "></span><span class=sd>            functionality is not required</span>
<span class=linenos data-linenos="612 "></span><span class=sd>        dlb_key: the key of the DataLoadingBlock to be applied</span>
<span class=linenos data-linenos="613 "></span><span class=sd>        *args: forwarded to the DataLoadingBlock&#39;s apply function</span>
<span class=linenos data-linenos="614 "></span><span class=sd>        **kwargs: forwarded to the DataLoadingBlock&#39;s apply function</span>
<span class=linenos data-linenos="615 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="616 "></span><span class=sd>        the output of the DataLoadingBlock&#39;s apply function, or</span>
<span class=linenos data-linenos="617 "></span><span class=sd>            the default_ret_value when dlp is None or it does not contain</span>
<span class=linenos data-linenos="618 "></span><span class=sd>            the requested loading block</span>
<span class=linenos data-linenos="619 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="620 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>dlb_key</span><span class=p>,</span> <span class=n>DataLoadingBlockTypes</span><span class=p>):</span>
<span class=linenos data-linenos="621 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Key </span><span class=si>{</span><span class=n>dlb_key</span><span class=si>}</span><span class=s2> is not of enum type DataLoadingBlockTypes&quot;</span>
<span class=linenos data-linenos="622 "></span>                                                 <span class=sa>f</span><span class=s2>&quot; in DataLoadingPlanMixin.apply_dlb&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="623 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>dlb_key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span><span class=p>:</span>
<span class=linenos data-linenos="624 "></span>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span><span class=p>[</span><span class=n>dlb_key</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=linenos data-linenos="625 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="626 "></span>        <span class=k>return</span> <span class=n>default_ret_value</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingPlanMixin.clear_dlp class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">clear_dlp</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>clear_dlp</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="591 "></span><span class=k>def</span> <span class=nf>clear_dlp</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="592 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataLoadingPlanMixin.set_dlp class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">set_dlp</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>set_dlp</span><span class=p>(</span><span class=n>dlp</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sets the dlp if the target dataset type is appropriate</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="575 "></span><span class=k>def</span> <span class=nf>set_dlp</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dlp</span><span class=p>:</span> <span class=n>DataLoadingPlan</span><span class=p>):</span>
<span class=linenos data-linenos="576 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Sets the dlp if the target dataset type is appropriate&quot;&quot;&quot;</span>
<span class=linenos data-linenos="577 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>dlp</span><span class=p>,</span> <span class=n>DataLoadingPlan</span><span class=p>):</span>
<span class=linenos data-linenos="578 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB615</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Trying to set a DataLoadingPlan but the argument is of type &quot;</span> <span class=o>+</span> \
<span class=linenos data-linenos="579 "></span>              <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>dlp</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="580 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="581 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="582 "></span>
<span class=linenos data-linenos="583 "></span>    <span class=n>dataset_type</span> <span class=o>=</span> <span class=n>DataLoadingPlan</span><span class=o>.</span><span class=n>infer_dataset_type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>  <span class=c1># `self` here will refer to the Dataset instance</span>
<span class=linenos data-linenos="584 "></span>    <span class=k>if</span> <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>!=</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>NONE</span> <span class=ow>and</span> <span class=n>dataset_type</span> <span class=o>!=</span> <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span><span class=p>:</span>
<span class=linenos data-linenos="585 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataLoadingPlanValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Trying to set </span><span class=si>{</span><span class=n>dlp</span><span class=si>}</span><span class=s2> on dataset of type </span><span class=si>{</span><span class=n>dataset_type</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> but &quot;</span>
<span class=linenos data-linenos="586 "></span>                                                 <span class=sa>f</span><span class=s2>&quot;the target type is </span><span class=si>{</span><span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="587 "></span>    <span class=k>elif</span> <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>==</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>NONE</span><span class=p>:</span>
<span class=linenos data-linenos="588 "></span>        <span class=n>dlp</span><span class=o>.</span><span class=n>target_dataset_type</span> <span class=o>=</span> <span class=n>dataset_type</span>
<span class=linenos data-linenos="589 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=o>=</span> <span class=n>dlp</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.DataManager class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">DataManager</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>DataManager</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=n>target</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></code></p> <p>Factory class that build different data loader/datasets based on the type of <code>dataset</code>. The argument <code>dataset</code> should be provided as <code>torch.utils.data.Dataset</code> object for to be used in PyTorch training.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dataset</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="pandas.DataFrame">DataFrame</span>, <span title="pandas.Series">Series</span>, <a class="autorefs autorefs-external" title="torch.utils.data.Dataset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Dataset">Dataset</a>]</code> </td> <td> <div class=doc-md-description> <p>Dataset object. It can be an instance, PyTorch Dataset or Tuple.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>target</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="pandas.DataFrame">DataFrame</span>, <span title="pandas.Series">Series</span>]</code> </td> <td> <div class=doc-md-description> <p>Target variable or variables.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>Additional parameters that are going to be used for data loader</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="29 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="30 "></span>             <span class=n>dataset</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span> <span class=n>Dataset</span><span class=p>],</span>
<span class=linenos data-linenos="31 "></span>             <span class=n>target</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="32 "></span>             <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="33 "></span>
<span class=linenos data-linenos="34 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor of DataManager,</span>
<span class=linenos data-linenos="35 "></span>
<span class=linenos data-linenos="36 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="37 "></span><span class=sd>        dataset: Dataset object. It can be an instance, PyTorch Dataset or Tuple.</span>
<span class=linenos data-linenos="38 "></span><span class=sd>        target: Target variable or variables.</span>
<span class=linenos data-linenos="39 "></span><span class=sd>        **kwargs: Additional parameters that are going to be used for data loader</span>
<span class=linenos data-linenos="40 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="41 "></span>
<span class=linenos data-linenos="42 "></span>    <span class=c1># TODO: Improve datamanager for auto loading by given dataset_path and other information</span>
<span class=linenos data-linenos="43 "></span>    <span class=c1># such as inputs variable indexes and target variables indexes</span>
<span class=linenos data-linenos="44 "></span>
<span class=linenos data-linenos="45 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span> <span class=o>=</span> <span class=n>dataset</span>
<span class=linenos data-linenos="46 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_target</span> <span class=o>=</span> <span class=n>target</span>
<span class=linenos data-linenos="47 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>:</span> <span class=n>Dict</span> <span class=o>=</span> <span class=n>kwargs</span>
<span class=linenos data-linenos="48 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_data_manager_instance</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.DataManager-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataManager.extend_loader_args class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">extend_loader_args</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>extend_loader_args</span><span class=p>(</span><span class=n>extension</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Extends the class' loader arguments</p> <p>Extends the class's <code>_loader_arguments</code> attribute with additional key-values from the <code>extension</code> argument. If a key already exists in the <code>_loader_arguments</code>, then it is not replaced.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>extension</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a></code> </td> <td> <div class=doc-md-description> <p>the mapping used to extend the loader arguments</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="50 "></span><span class=k>def</span> <span class=nf>extend_loader_args</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>extension</span><span class=p>:</span> <span class=n>Dict</span><span class=p>):</span>
<span class=linenos data-linenos="51 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Extends the class&#39; loader arguments</span>
<span class=linenos data-linenos="52 "></span>
<span class=linenos data-linenos="53 "></span><span class=sd>    Extends the class&#39;s `_loader_arguments` attribute with additional key-values from</span>
<span class=linenos data-linenos="54 "></span><span class=sd>    the `extension` argument. If a key already exists in the `_loader_arguments`, then</span>
<span class=linenos data-linenos="55 "></span><span class=sd>    it is not replaced.</span>
<span class=linenos data-linenos="56 "></span>
<span class=linenos data-linenos="57 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="58 "></span><span class=sd>        extension: the mapping used to extend the loader arguments</span>
<span class=linenos data-linenos="59 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="60 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
<span class=linenos data-linenos="61 "></span>        <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>value</span> <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>extension</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>}</span>
<span class=linenos data-linenos="62 "></span>    <span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.DataManager.load class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">load</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>load</span><span class=p>(</span><span class=n>tp_type</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Loads proper DataManager based on given TrainingPlan and <code>dataset</code>, <code>target</code> attributes.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>tp_type</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.constants.TrainingPlans" href="../constants/#fedbiomed.common.constants.TrainingPlans">TrainingPlans</a></code> </td> <td> <div class=doc-md-description> <p>Enumeration instance of TrainingPlans that stands for type of training plan.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDataManagerError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDataManagerError">FedbiomedDataManagerError</a></code> </td> <td> <div class=doc-md-description> <p>If requested DataManager does not match with given arguments.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 64 "></span><span class=k>def</span> <span class=nf>load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tp_type</span><span class=p>:</span> <span class=n>TrainingPlans</span><span class=p>):</span>
<span class=linenos data-linenos=" 65 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Loads proper DataManager based on given TrainingPlan and</span>
<span class=linenos data-linenos=" 66 "></span><span class=sd>    `dataset`, `target` attributes.</span>
<span class=linenos data-linenos=" 67 "></span>
<span class=linenos data-linenos=" 68 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos=" 69 "></span><span class=sd>        tp_type: Enumeration instance of TrainingPlans that stands for type of training plan.</span>
<span class=linenos data-linenos=" 70 "></span>
<span class=linenos data-linenos=" 71 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos=" 72 "></span><span class=sd>        FedbiomedDataManagerError: If requested DataManager does not match with given arguments.</span>
<span class=linenos data-linenos=" 73 "></span>
<span class=linenos data-linenos=" 74 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 75 "></span>
<span class=linenos data-linenos=" 76 "></span>    <span class=c1># Training plan is type of TorcTrainingPlan</span>
<span class=linenos data-linenos=" 77 "></span>    <span class=k>if</span> <span class=n>tp_type</span> <span class=o>==</span> <span class=n>TrainingPlans</span><span class=o>.</span><span class=n>TorchTrainingPlan</span><span class=p>:</span>
<span class=linenos data-linenos=" 78 "></span>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_target</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=n>Dataset</span><span class=p>):</span>
<span class=linenos data-linenos=" 79 "></span>            <span class=c1># Create Dataset for pytorch</span>
<span class=linenos data-linenos=" 80 "></span>            <span class=bp>self</span><span class=o>.</span><span class=n>_data_manager_instance</span> <span class=o>=</span> <span class=n>TorchDataManager</span><span class=p>(</span><span class=n>dataset</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>)</span>
<span class=linenos data-linenos=" 81 "></span>        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>))</span> <span class=ow>and</span> \
<span class=linenos data-linenos=" 82 "></span>                <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>)):</span>
<span class=linenos data-linenos=" 83 "></span>            <span class=c1># If `dataset` and `target` attributes are array-like object</span>
<span class=linenos data-linenos=" 84 "></span>            <span class=c1># create TabularDataset object to instantiate a TorchDataManager</span>
<span class=linenos data-linenos=" 85 "></span>            <span class=n>torch_dataset</span> <span class=o>=</span> <span class=n>TabularDataset</span><span class=p>(</span><span class=n>inputs</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>)</span>
<span class=linenos data-linenos=" 86 "></span>            <span class=bp>self</span><span class=o>.</span><span class=n>_data_manager_instance</span> <span class=o>=</span> <span class=n>TorchDataManager</span><span class=p>(</span><span class=n>dataset</span><span class=o>=</span><span class=n>torch_dataset</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>)</span>
<span class=linenos data-linenos=" 87 "></span>        <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos=" 88 "></span>            <span class=k>raise</span> <span class=n>FedbiomedDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB607</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Invalid arguments for torch based &quot;</span>
<span class=linenos data-linenos=" 89 "></span>                                            <span class=sa>f</span><span class=s2>&quot;training plan, either provide the argument  `dataset` as PyTorch &quot;</span>
<span class=linenos data-linenos=" 90 "></span>                                            <span class=sa>f</span><span class=s2>&quot;Dataset instance, or provide `dataset` and `target` arguments as &quot;</span>
<span class=linenos data-linenos=" 91 "></span>                                            <span class=sa>f</span><span class=s2>&quot;an instance one of pd.DataFrame, pd.Series or np.ndarray &quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 92 "></span>
<span class=linenos data-linenos=" 93 "></span>    <span class=k>elif</span> <span class=n>tp_type</span> <span class=o>==</span> <span class=n>TrainingPlans</span><span class=o>.</span><span class=n>SkLearnTrainingPlan</span><span class=p>:</span>
<span class=linenos data-linenos=" 94 "></span>        <span class=c1># Try to convert `torch.utils.Data.Dataset` to SkLearnBased dataset/datamanager</span>
<span class=linenos data-linenos=" 95 "></span>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_target</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=n>Dataset</span><span class=p>):</span>
<span class=linenos data-linenos=" 96 "></span>            <span class=n>torch_data_manager</span> <span class=o>=</span> <span class=n>TorchDataManager</span><span class=p>(</span><span class=n>dataset</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>)</span>
<span class=linenos data-linenos=" 97 "></span>            <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos=" 98 "></span>                <span class=bp>self</span><span class=o>.</span><span class=n>_data_manager_instance</span> <span class=o>=</span> <span class=n>torch_data_manager</span><span class=o>.</span><span class=n>to_sklearn</span><span class=p>()</span>
<span class=linenos data-linenos=" 99 "></span>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="100 "></span>                <span class=k>raise</span> <span class=n>FedbiomedDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB607</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: PyTorch based `Dataset` object &quot;</span>
<span class=linenos data-linenos="101 "></span>                                                <span class=s2>&quot;has been instantiated with DataManager. An error occurred while&quot;</span>
<span class=linenos data-linenos="102 "></span>                                                <span class=s2>&quot;trying to convert torch.utils.data.Dataset to numpy based &quot;</span>
<span class=linenos data-linenos="103 "></span>                                                <span class=sa>f</span><span class=s2>&quot;dataset: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="104 "></span>
<span class=linenos data-linenos="105 "></span>        <span class=c1># For scikit-learn based training plans, the arguments `dataset` and `target` should be an instance</span>
<span class=linenos data-linenos="106 "></span>        <span class=c1># one of `pd.DataFrame`, `pd.Series`, `np.ndarray`</span>
<span class=linenos data-linenos="107 "></span>        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>))</span> <span class=ow>and</span> \
<span class=linenos data-linenos="108 "></span>                <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>)):</span>
<span class=linenos data-linenos="109 "></span>            <span class=c1># Create Dataset for SkLearn training plans</span>
<span class=linenos data-linenos="110 "></span>            <span class=bp>self</span><span class=o>.</span><span class=n>_data_manager_instance</span> <span class=o>=</span> <span class=n>SkLearnDataManager</span><span class=p>(</span><span class=n>inputs</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>,</span>
<span class=linenos data-linenos="111 "></span>                                                             <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>)</span>
<span class=linenos data-linenos="112 "></span>        <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="113 "></span>            <span class=k>raise</span> <span class=n>FedbiomedDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB607</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: The argument `dataset` and `target` &quot;</span>
<span class=linenos data-linenos="114 "></span>                                            <span class=sa>f</span><span class=s2>&quot;should be instance of pd.DataFrame, pd.Series or np.ndarray &quot;</span><span class=p>)</span>
<span class=linenos data-linenos="115 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="116 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB607</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Undefined training plan&quot;</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.MapperBlock class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">MapperBlock</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>MapperBlock</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._data_loading_plan.DataLoadingBlock" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a></code></p> <p>A <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> for mapping values.</p> <p>This <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> can be used whenever an "indirect mapping" is needed. For example, it can be used to implement a correspondence between a set of "logical" abstract names and a set of folder names on the filesystem.</p> <p>The apply function of this <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> takes a "key" as input (a str) and returns the mapped value corresponding to map[key]. Note that while the constructor of this class sets a value for type_id, developers are recommended to set a more meaningful value that better speaks to their application.</p> <p>Multiple instances of this loading_block may be used in the same DataLoadingPlan, provided that they are given different type_id via the constructor.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="380 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="381 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>MapperBlock</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<span class=linenos data-linenos="382 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>map</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="383 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>(</span><span class=n>MapperBlock</span><span class=o>.</span><span class=n>_extra_validation_scheme</span><span class=p>())</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.MapperBlock-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MapperBlock.map class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">map</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nb>map</span> <span class=o>=</span> <span class=p>{}</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.common.data.MapperBlock-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MapperBlock.apply class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">apply</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>apply</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the value mapped to the key, if it exists.</p> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedLoadingBlockError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedLoadingBlockError">FedbiomedLoadingBlockError</a></code> </td> <td> <div class=doc-md-description> <p>if map is not a dict or the key does not exist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="409 "></span><span class=k>def</span> <span class=nf>apply</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=linenos data-linenos="410 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the value mapped to the key, if it exists.</span>
<span class=linenos data-linenos="411 "></span>
<span class=linenos data-linenos="412 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="413 "></span><span class=sd>        FedbiomedLoadingBlockError: if map is not a dict or the key does not exist.</span>
<span class=linenos data-linenos="414 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="415 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)</span> <span class=ow>or</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>:</span>
<span class=linenos data-linenos="416 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Mapper block error: no key &#39;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#39; in mapping dictionary&quot;</span>
<span class=linenos data-linenos="417 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="418 "></span>        <span class=k>raise</span> <span class=n>FedbiomedLoadingBlockError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="419 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MapperBlock.deserialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">deserialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>deserialize</span><span class=p>(</span><span class=n>load_from</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Reconstruct the <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a> from a serialized version.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>load_from</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary as obtained by the serialize function.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: the self instance</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="396 "></span><span class=k>def</span> <span class=nf>deserialize</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>load_from</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DataLoadingBlock</span><span class=p>:</span>
<span class=linenos data-linenos="397 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reconstruct the [DataLoadingBlock][fedbiomed.common.data._data_loading_plan.DataLoadingBlock]</span>
<span class=linenos data-linenos="398 "></span><span class=sd>    from a serialized version.</span>
<span class=linenos data-linenos="399 "></span>
<span class=linenos data-linenos="400 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="401 "></span><span class=sd>        load_from (dict): a dictionary as obtained by the serialize function.</span>
<span class=linenos data-linenos="402 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="403 "></span><span class=sd>        the self instance</span>
<span class=linenos data-linenos="404 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="405 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>MapperBlock</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>deserialize</span><span class=p>(</span><span class=n>load_from</span><span class=p>)</span>
<span class=linenos data-linenos="406 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>map</span> <span class=o>=</span> <span class=n>load_from</span><span class=p>[</span><span class=s1>&#39;map&#39;</span><span class=p>]</span>
<span class=linenos data-linenos="407 "></span>    <span class=k>return</span> <span class=bp>self</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MapperBlock.serialize class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">serialize</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>serialize</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Serializes the class in a format similar to json.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>a dictionary of key-value pairs sufficient for reconstructing</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>the <a class="autorefs autorefs-internal" href="#fedbiomed.common.data.DataLoadingBlock">DataLoadingBlock</a>.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="385 "></span><span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="386 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Serializes the class in a format similar to json.</span>
<span class=linenos data-linenos="387 "></span>
<span class=linenos data-linenos="388 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="389 "></span><span class=sd>        a dictionary of key-value pairs sufficient for reconstructing</span>
<span class=linenos data-linenos="390 "></span><span class=sd>        the [DataLoadingBlock][fedbiomed.common.data._data_loading_plan.DataLoadingBlock].</span>
<span class=linenos data-linenos="391 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="392 "></span>    <span class=n>ret</span> <span class=o>=</span> <span class=nb>super</span><span class=p>(</span><span class=n>MapperBlock</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span>
<span class=linenos data-linenos="393 "></span>    <span class=n>ret</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s1>&#39;map&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>map</span><span class=p>})</span>
<span class=linenos data-linenos="394 "></span>    <span class=k>return</span> <span class=n>ret</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.MedicalFolderBase class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">MedicalFolderBase</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>MedicalFolderBase</span><span class=p>(</span><span class=n>root</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._data_loading_plan.DataLoadingPlanMixin" href="#fedbiomed.common.data.DataLoadingPlanMixin">DataLoadingPlanMixin</a></code></p> <p>Controller class for Medical Folder dataset.</p> <p>Contains methods to validate the MedicalFolder folder hierarchy and extract folder-base metadata information such as modalities, number of subject etc.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>root</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>, None]</code> </td> <td> <div class=doc-md-description> <p>path to Medical Folder root folder.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="236 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>root</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Path</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos="237 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructs MedicalFolderBase</span>
<span class=linenos data-linenos="238 "></span>
<span class=linenos data-linenos="239 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="240 "></span><span class=sd>        root: path to Medical Folder root folder.</span>
<span class=linenos data-linenos="241 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="242 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>MedicalFolderBase</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<span class=linenos data-linenos="243 "></span>
<span class=linenos data-linenos="244 "></span>    <span class=k>if</span> <span class=n>root</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="245 "></span>        <span class=n>root</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>validate_MedicalFolder_root_folder</span><span class=p>(</span><span class=n>root</span><span class=p>)</span>
<span class=linenos data-linenos="246 "></span>
<span class=linenos data-linenos="247 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_root</span> <span class=o>=</span> <span class=n>root</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.MedicalFolderBase-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderBase.default_modality_names class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">default_modality_names</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>default_modality_names</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;T1&#39;</span><span class=p>,</span> <span class=s1>&#39;T2&#39;</span><span class=p>,</span> <span class=s1>&#39;label&#39;</span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderBase.root class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">root</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> <small class="doc doc-label doc-label-writable"><code>writable</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>root</span>
</code></pre></div> <div class="doc doc-contents "> <p>Root property of MedicalFolderController</p> </div> </div> <h4 id=fedbiomed.common.data.MedicalFolderBase-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.available_subjects class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">available_subjects</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>available_subjects</span><span class=p>(</span><span class=n>subjects_from_index</span><span class=p>,</span> <span class=n>subjects_from_folder</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Checks missing subject folders and missing entries in demographics</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>subjects_from_index</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>, <span title="pandas.Series">Series</span>]</code> </td> <td> <div class=doc-md-description> <p>Given subject folder names in demographics</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>subjects_from_folder</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code> </td> <td> <div class=doc-md-description> <p>List of subject folder names to get intersection of given subject_from_index</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>available_subjects</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>subjects that have an imaging data folder and are also present in the demographics file</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>missing_subject_folders</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>subjects that are in the demographics file but do not have an imaging data folder</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>missing_entries</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>subjects that have an imaging data folder but are not present in the demographics file</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="395 "></span><span class=k>def</span> <span class=nf>available_subjects</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="396 "></span>                       <span class=n>subjects_from_index</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>list</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>],</span>
<span class=linenos data-linenos="397 "></span>                       <span class=n>subjects_from_folder</span><span class=p>:</span> <span class=nb>list</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>tuple</span><span class=p>[</span><span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]]:</span>
<span class=linenos data-linenos="398 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Checks missing subject folders and missing entries in demographics</span>
<span class=linenos data-linenos="399 "></span>
<span class=linenos data-linenos="400 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="401 "></span><span class=sd>        subjects_from_index: Given subject folder names in demographics</span>
<span class=linenos data-linenos="402 "></span><span class=sd>        subjects_from_folder: List of subject folder names to get intersection of given subject_from_index</span>
<span class=linenos data-linenos="403 "></span>
<span class=linenos data-linenos="404 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="405 "></span><span class=sd>        available_subjects: subjects that have an imaging data folder and are also present in the demographics file</span>
<span class=linenos data-linenos="406 "></span><span class=sd>        missing_subject_folders: subjects that are in the demographics file but do not have an imaging data folder</span>
<span class=linenos data-linenos="407 "></span><span class=sd>        missing_entries: subjects that have an imaging data folder but are not present in the demographics file</span>
<span class=linenos data-linenos="408 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="409 "></span>
<span class=linenos data-linenos="410 "></span>    <span class=c1># Select all subject folders if it is not given</span>
<span class=linenos data-linenos="411 "></span>    <span class=k>if</span> <span class=n>subjects_from_folder</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="412 "></span>        <span class=n>subjects_from_folder</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>subjects_with_imaging_data_folders</span><span class=p>()</span>
<span class=linenos data-linenos="413 "></span>
<span class=linenos data-linenos="414 "></span>    <span class=c1># Missing subject that will cause warnings</span>
<span class=linenos data-linenos="415 "></span>    <span class=n>missing_subject_folders</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>subjects_from_index</span><span class=p>)</span> <span class=o>-</span> <span class=nb>set</span><span class=p>(</span><span class=n>subjects_from_folder</span><span class=p>))</span>
<span class=linenos data-linenos="416 "></span>
<span class=linenos data-linenos="417 "></span>    <span class=c1># Missing entries that will cause errors</span>
<span class=linenos data-linenos="418 "></span>    <span class=n>missing_entries</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>subjects_from_folder</span><span class=p>)</span> <span class=o>-</span> <span class=nb>set</span><span class=p>(</span><span class=n>subjects_from_index</span><span class=p>))</span>
<span class=linenos data-linenos="419 "></span>
<span class=linenos data-linenos="420 "></span>    <span class=c1># Intersection</span>
<span class=linenos data-linenos="421 "></span>    <span class=n>available_subjects</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>subjects_from_index</span><span class=p>)</span><span class=o>.</span><span class=n>intersection</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>subjects_from_folder</span><span class=p>)))</span>
<span class=linenos data-linenos="422 "></span>
<span class=linenos data-linenos="423 "></span>    <span class=k>return</span> <span class=n>available_subjects</span><span class=p>,</span> <span class=n>missing_subject_folders</span><span class=p>,</span> <span class=n>missing_entries</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.complete_subjects class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">complete_subjects</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>complete_subjects</span><span class=p>(</span><span class=n>subjects</span><span class=p>,</span> <span class=n>modalities</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves subjects that have given all the modalities.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>subjects</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>List of subject folder names</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>modalities</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>List of required modalities</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>List of subject folder names that have required modalities</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="375 "></span><span class=k>def</span> <span class=nf>complete_subjects</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>subjects</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>modalities</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=linenos data-linenos="376 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves subjects that have given all the modalities.</span>
<span class=linenos data-linenos="377 "></span>
<span class=linenos data-linenos="378 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="379 "></span><span class=sd>        subjects: List of subject folder names</span>
<span class=linenos data-linenos="380 "></span><span class=sd>        modalities: List of required modalities</span>
<span class=linenos data-linenos="381 "></span>
<span class=linenos data-linenos="382 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="383 "></span><span class=sd>        List of subject folder names that have required modalities</span>
<span class=linenos data-linenos="384 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="385 "></span>    <span class=k>return</span> <span class=p>[</span><span class=n>subject</span> <span class=k>for</span> <span class=n>subject</span> <span class=ow>in</span> <span class=n>subjects</span> <span class=k>if</span> <span class=nb>all</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>is_modalities_existing</span><span class=p>(</span><span class=n>subject</span><span class=p>,</span> <span class=n>modalities</span><span class=p>))]</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.demographics_column_names class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">demographics_column_names</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>demographics_column_names</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="438 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="439 "></span><span class=k>def</span> <span class=nf>demographics_column_names</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Path</span><span class=p>]):</span>
<span class=linenos data-linenos="440 "></span>    <span class=k>return</span> <span class=n>MedicalFolderBase</span><span class=o>.</span><span class=n>read_demographics</span><span class=p>(</span><span class=n>path</span><span class=p>)</span><span class=o>.</span><span class=n>columns</span><span class=o>.</span><span class=n>values</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.get_dataset_type class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">get_dataset_type</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>get_dataset_type</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="484 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="485 "></span><span class=k>def</span> <span class=nf>get_dataset_type</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>DatasetTypes</span><span class=p>:</span>
<span class=linenos data-linenos="486 "></span>    <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>MEDICAL_FOLDER</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.is_modalities_existing class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">is_modalities_existing</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>is_modalities_existing</span><span class=p>(</span><span class=n>subject</span><span class=p>,</span> <span class=n>modalities</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Checks whether given modalities exists in the subject directory</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>subject</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>Subject ID or subject folder name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>modalities</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>List of modalities to check</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code> </td> <td> <div class=doc-md-description> <p>List of <code>bool</code> that represents whether modality is existing respectively for each of modality.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDatasetError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDatasetError">FedbiomedDatasetError</a></code> </td> <td> <div class=doc-md-description> <p>bad argument type</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="293 "></span><span class=k>def</span> <span class=nf>is_modalities_existing</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>subject</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>modalities</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>bool</span><span class=p>]:</span>
<span class=linenos data-linenos="294 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Checks whether given modalities exists in the subject directory</span>
<span class=linenos data-linenos="295 "></span>
<span class=linenos data-linenos="296 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="297 "></span><span class=sd>        subject: Subject ID or subject folder name</span>
<span class=linenos data-linenos="298 "></span><span class=sd>        modalities: List of modalities to check</span>
<span class=linenos data-linenos="299 "></span>
<span class=linenos data-linenos="300 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="301 "></span><span class=sd>        List of `bool` that represents whether modality is existing respectively for each of modality.</span>
<span class=linenos data-linenos="302 "></span>
<span class=linenos data-linenos="303 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="304 "></span><span class=sd>        FedbiomedDatasetError: bad argument type</span>
<span class=linenos data-linenos="305 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="306 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>subject</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<span class=linenos data-linenos="307 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Expected string for subject folder/ID, &quot;</span>
<span class=linenos data-linenos="308 "></span>                                    <span class=sa>f</span><span class=s2>&quot;but got </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>subject</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="309 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>modalities</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<span class=linenos data-linenos="310 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Expected a list for modalities, &quot;</span>
<span class=linenos data-linenos="311 "></span>                                    <span class=sa>f</span><span class=s2>&quot;but got </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>modalities</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="312 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>all</span><span class=p>([</span><span class=nb>type</span><span class=p>(</span><span class=n>m</span><span class=p>)</span> <span class=ow>is</span> <span class=nb>str</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>modalities</span><span class=p>]):</span>
<span class=linenos data-linenos="313 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Expected a list of string for modalities, &quot;</span>
<span class=linenos data-linenos="314 "></span>                                    <span class=sa>f</span><span class=s2>&quot;but some modalities are &quot;</span>
<span class=linenos data-linenos="315 "></span>                                    <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=s1>&#39; &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=w> </span><span class=nb>str</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>m</span><span class=p>)</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>modalities</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=nb>type</span><span class=p>(</span><span class=n>m</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=nb>str</span><span class=p>)])</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="316 "></span>    <span class=n>are_modalities_existing</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
<span class=linenos data-linenos="317 "></span>    <span class=k>for</span> <span class=n>modality</span> <span class=ow>in</span> <span class=n>modalities</span><span class=p>:</span>
<span class=linenos data-linenos="318 "></span>        <span class=n>modality_folder</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subject_modality_folder</span><span class=p>(</span><span class=n>subject</span><span class=p>,</span> <span class=n>modality</span><span class=p>)</span>
<span class=linenos data-linenos="319 "></span>        <span class=n>are_modalities_existing</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>bool</span><span class=p>(</span><span class=n>modality_folder</span><span class=p>)</span> <span class=ow>and</span>
<span class=linenos data-linenos="320 "></span>                                       <span class=bp>self</span><span class=o>.</span><span class=n>_root</span><span class=o>.</span><span class=n>joinpath</span><span class=p>(</span><span class=n>subject</span><span class=p>,</span> <span class=n>modality_folder</span><span class=p>)</span><span class=o>.</span><span class=n>is_dir</span><span class=p>())</span>
<span class=linenos data-linenos="321 "></span>    <span class=k>return</span> <span class=n>are_modalities_existing</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.modalities class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">modalities</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>modalities</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets all modalities based either on all possible candidates or those provided by the DataLoadingPlan.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code> </td> <td> <div class=doc-md-description> <p>List of unique available modalities</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code> </td> <td> <div class=doc-md-description> <p>List of all encountered modality folders in each subject folder, appearing once per folder</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="279 "></span><span class=k>def</span> <span class=nf>modalities</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>list</span><span class=p>,</span> <span class=nb>list</span><span class=p>]:</span>
<span class=linenos data-linenos="280 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets all modalities based either on all possible candidates or those provided by the DataLoadingPlan.</span>
<span class=linenos data-linenos="281 "></span>
<span class=linenos data-linenos="282 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="283 "></span><span class=sd>         List of unique available modalities</span>
<span class=linenos data-linenos="284 "></span><span class=sd>         List of all encountered modality folders in each subject folder, appearing once per folder</span>
<span class=linenos data-linenos="285 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="286 "></span>    <span class=n>modality_candidates</span><span class=p>,</span> <span class=n>modality_folders_list</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>modalities_candidates_from_subfolders</span><span class=p>()</span>
<span class=linenos data-linenos="287 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>MedicalFolderLoadingBlockTypes</span><span class=o>.</span><span class=n>MODALITIES_TO_FOLDERS</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span><span class=p>:</span>
<span class=linenos data-linenos="288 "></span>        <span class=n>modalities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span><span class=p>[</span><span class=n>MedicalFolderLoadingBlockTypes</span><span class=o>.</span><span class=n>MODALITIES_TO_FOLDERS</span><span class=p>]</span><span class=o>.</span><span class=n>map</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
<span class=linenos data-linenos="289 "></span>        <span class=k>return</span> <span class=n>modalities</span><span class=p>,</span> <span class=n>modality_folders_list</span>
<span class=linenos data-linenos="290 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="291 "></span>        <span class=k>return</span> <span class=n>modality_candidates</span><span class=p>,</span> <span class=n>modality_folders_list</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.modalities_candidates_from_subfolders class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">modalities_candidates_from_subfolders</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>modalities_candidates_from_subfolders</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets all possible modality folders under root directory</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code> </td> <td> <div class=doc-md-description> <p>List of unique available modality folders appearing at least once</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code> </td> <td> <div class=doc-md-description> <p>List of all encountered modality folders in each subject folder, appearing once per folder</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="264 "></span><span class=k>def</span> <span class=nf>modalities_candidates_from_subfolders</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>list</span><span class=p>,</span> <span class=nb>list</span><span class=p>]:</span>
<span class=linenos data-linenos="265 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Gets all possible modality folders under root directory</span>
<span class=linenos data-linenos="266 "></span>
<span class=linenos data-linenos="267 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="268 "></span><span class=sd>         List of unique available modality folders appearing at least once</span>
<span class=linenos data-linenos="269 "></span><span class=sd>         List of all encountered modality folders in each subject folder, appearing once per folder</span>
<span class=linenos data-linenos="270 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="271 "></span>
<span class=linenos data-linenos="272 "></span>    <span class=c1># Accept only folders that don&#39;t start with &quot;.&quot; and &quot;_&quot;</span>
<span class=linenos data-linenos="273 "></span>    <span class=n>modalities</span> <span class=o>=</span> <span class=p>[</span><span class=n>f</span><span class=o>.</span><span class=n>name</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root</span><span class=o>.</span><span class=n>glob</span><span class=p>(</span><span class=s2>&quot;*/*&quot;</span><span class=p>)</span> <span class=k>if</span> <span class=n>f</span><span class=o>.</span><span class=n>is_dir</span><span class=p>()</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>f</span><span class=o>.</span><span class=n>name</span><span class=o>.</span><span class=n>startswith</span><span class=p>((</span><span class=s2>&quot;.&quot;</span><span class=p>,</span> <span class=s2>&quot;_&quot;</span><span class=p>))]</span>
<span class=linenos data-linenos="274 "></span>    <span class=k>return</span> <span class=nb>sorted</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>modalities</span><span class=p>))),</span> <span class=n>modalities</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.read_demographics class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">read_demographics</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>read_demographics</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>index_col</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Read demographics tabular file for Medical Folder dataset</p> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDatasetError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDatasetError">FedbiomedDatasetError</a></code> </td> <td> <div class=doc-md-description> <p>bad file format</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="425 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="426 "></span><span class=k>def</span> <span class=nf>read_demographics</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Path</span><span class=p>],</span> <span class=n>index_col</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos="427 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Read demographics tabular file for Medical Folder dataset</span>
<span class=linenos data-linenos="428 "></span>
<span class=linenos data-linenos="429 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="430 "></span><span class=sd>        FedbiomedDatasetError: bad file format</span>
<span class=linenos data-linenos="431 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="432 "></span>    <span class=n>path</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
<span class=linenos data-linenos="433 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=o>.</span><span class=n>is_file</span><span class=p>()</span> <span class=ow>or</span> <span class=n>path</span><span class=o>.</span><span class=n>suffix</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&quot;.csv&quot;</span><span class=p>,</span> <span class=s2>&quot;.tsv&quot;</span><span class=p>]:</span>
<span class=linenos data-linenos="434 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Demographics should be CSV or TSV files&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="435 "></span>
<span class=linenos data-linenos="436 "></span>    <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>index_col</span><span class=o>=</span><span class=n>index_col</span><span class=p>,</span> <span class=n>engine</span><span class=o>=</span><span class=s1>&#39;python&#39;</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.subjects_with_imaging_data_folders class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">subjects_with_imaging_data_folders</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>subjects_with_imaging_data_folders</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves subject folder names under Medical Folder root directory.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>subject folder names under Medical Folder root directory.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="387 "></span><span class=k>def</span> <span class=nf>subjects_with_imaging_data_folders</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=linenos data-linenos="388 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves subject folder names under Medical Folder root directory.</span>
<span class=linenos data-linenos="389 "></span>
<span class=linenos data-linenos="390 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="391 "></span><span class=sd>        subject folder names under Medical Folder root directory.</span>
<span class=linenos data-linenos="392 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="393 "></span>    <span class=k>return</span> <span class=p>[</span><span class=n>f</span><span class=o>.</span><span class=n>name</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root</span><span class=o>.</span><span class=n>iterdir</span><span class=p>()</span> <span class=k>if</span> <span class=n>f</span><span class=o>.</span><span class=n>is_dir</span><span class=p>()</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>f</span><span class=o>.</span><span class=n>name</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;.&quot;</span><span class=p>)]</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderBase.validate_MedicalFolder_root_folder class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">validate_MedicalFolder_root_folder</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>validate_MedicalFolder_root_folder</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Validates Medical Folder root directory by checking folder structure</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>path</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code> </td> <td> <div class=doc-md-description> <p>path to root directory</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></code> </td> <td> <div class=doc-md-description> <p>Path to root folder of Medical Folder dataset</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDatasetError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDatasetError">FedbiomedDatasetError</a></code> </td> <td> <div class=doc-md-description> <ul> <li>If path is not an instance of <code>str</code> or <code>pathlib.Path</code> - If path is not a directory</li> </ul> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="442 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="443 "></span><span class=k>def</span> <span class=nf>validate_MedicalFolder_root_folder</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Path</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Path</span><span class=p>:</span>
<span class=linenos data-linenos="444 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Validates Medical Folder root directory by checking folder structure</span>
<span class=linenos data-linenos="445 "></span>
<span class=linenos data-linenos="446 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="447 "></span><span class=sd>        path: path to root directory</span>
<span class=linenos data-linenos="448 "></span>
<span class=linenos data-linenos="449 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="450 "></span><span class=sd>        Path to root folder of Medical Folder dataset</span>
<span class=linenos data-linenos="451 "></span>
<span class=linenos data-linenos="452 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="453 "></span><span class=sd>        FedbiomedDatasetError: - If path is not an instance of `str` or `pathlib.Path`</span>
<span class=linenos data-linenos="454 "></span><span class=sd>                               - If path is not a directory</span>
<span class=linenos data-linenos="455 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="456 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=p>(</span><span class=n>Path</span><span class=p>,</span> <span class=nb>str</span><span class=p>)):</span>
<span class=linenos data-linenos="457 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: The argument root should an instance of &quot;</span>
<span class=linenos data-linenos="458 "></span>                                    <span class=sa>f</span><span class=s2>&quot;`Path` or `str`, but got </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>path</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="459 "></span>
<span class=linenos data-linenos="460 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>Path</span><span class=p>):</span>
<span class=linenos data-linenos="461 "></span>        <span class=n>path</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
<span class=linenos data-linenos="462 "></span>
<span class=linenos data-linenos="463 "></span>    <span class=n>path</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span><span class=o>.</span><span class=n>expanduser</span><span class=p>()</span><span class=o>.</span><span class=n>resolve</span><span class=p>()</span>
<span class=linenos data-linenos="464 "></span>
<span class=linenos data-linenos="465 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>():</span>
<span class=linenos data-linenos="466 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Folder or file </span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s2> not found on system&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="467 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=o>.</span><span class=n>is_dir</span><span class=p>():</span>
<span class=linenos data-linenos="468 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Root for Medical Folder dataset &quot;</span>
<span class=linenos data-linenos="469 "></span>                                    <span class=sa>f</span><span class=s2>&quot;should be a directory.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="470 "></span>
<span class=linenos data-linenos="471 "></span>    <span class=n>directories</span> <span class=o>=</span> <span class=p>[</span><span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>path</span><span class=o>.</span><span class=n>iterdir</span><span class=p>()</span> <span class=k>if</span> <span class=n>f</span><span class=o>.</span><span class=n>is_dir</span><span class=p>()]</span>
<span class=linenos data-linenos="472 "></span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>directories</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<span class=linenos data-linenos="473 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Root folder of Medical Folder should &quot;</span>
<span class=linenos data-linenos="474 "></span>                                    <span class=sa>f</span><span class=s2>&quot;contain subject folders, but no sub folder has been found. &quot;</span><span class=p>)</span>
<span class=linenos data-linenos="475 "></span>
<span class=linenos data-linenos="476 "></span>    <span class=n>modalities</span> <span class=o>=</span> <span class=p>[</span><span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>path</span><span class=o>.</span><span class=n>glob</span><span class=p>(</span><span class=s2>&quot;*/*&quot;</span><span class=p>)</span> <span class=k>if</span> <span class=n>f</span><span class=o>.</span><span class=n>is_dir</span><span class=p>()]</span>
<span class=linenos data-linenos="477 "></span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>modalities</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
<span class=linenos data-linenos="478 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> Subject folders for Medical Folder should &quot;</span>
<span class=linenos data-linenos="479 "></span>                                    <span class=sa>f</span><span class=s2>&quot;contain modalities as folders. Folder structure should be &quot;</span>
<span class=linenos data-linenos="480 "></span>                                    <span class=sa>f</span><span class=s2>&quot;root/&lt;subjects&gt;/&lt;modalities&gt;&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="481 "></span>
<span class=linenos data-linenos="482 "></span>    <span class=k>return</span> <span class=n>path</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.MedicalFolderController class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">MedicalFolderController</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>MedicalFolderController</span><span class=p>(</span><span class=n>root</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._medical_datasets.MedicalFolderBase" href="#fedbiomed.common.data.MedicalFolderBase">MedicalFolderBase</a></code></p> <p>Utility class to construct and verify Medical Folder datasets without knowledge of the experiment.</p> <p>The purpose of this class is to enable key functionalities related to the MedicalFolderDataset at the time of dataset deployment, i.e. when the data is being added to the node's database.</p> <p>Specifically, the MedicalFolderController class can be used to: - construct a MedicalFolderDataset with all available data modalities, without knowing which ones will be used as targets or features during an experiment - validate that the proper folder structure has been respected by the data managers preparing the data - identify which subjects have which modalities</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>root</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code> </td> <td> <div class=doc-md-description> <p>Folder path to dataset. Defaults to None.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="901 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>root</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos="902 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructs MedicalFolderController</span>
<span class=linenos data-linenos="903 "></span>
<span class=linenos data-linenos="904 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="905 "></span><span class=sd>        root: Folder path to dataset. Defaults to None.</span>
<span class=linenos data-linenos="906 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="907 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>MedicalFolderController</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>root</span><span class=o>=</span><span class=n>root</span><span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.MedicalFolderController-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderController.load_MedicalFolder class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">load_MedicalFolder</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>load_MedicalFolder</span><span class=p>(</span><span class=n>tabular_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>index_col</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Load Medical Folder dataset with given tabular_file and index_col</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>tabular_file</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code> </td> <td> <div class=doc-md-description> <p>File path to demographics data set</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>index_col</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code> </td> <td> <div class=doc-md-description> <p>Column index that represents subject folder names</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._medical_datasets.MedicalFolderDataset" href="#fedbiomed.common.data.MedicalFolderDataset">MedicalFolderDataset</a></code> </td> <td> <div class=doc-md-description> <p>MedicalFolderDataset object</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDatasetError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDatasetError">FedbiomedDatasetError</a></code> </td> <td> <div class=doc-md-description> <p>If Medical Folder dataset is not successfully loaded</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 972 "></span><span class=k>def</span> <span class=nf>load_MedicalFolder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos=" 973 "></span>                       <span class=n>tabular_file</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Path</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 974 "></span>                       <span class=n>index_col</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>MedicalFolderDataset</span><span class=p>:</span>
<span class=linenos data-linenos=" 975 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Load Medical Folder dataset with given tabular_file and index_col</span>
<span class=linenos data-linenos=" 976 "></span>
<span class=linenos data-linenos=" 977 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos=" 978 "></span><span class=sd>        tabular_file: File path to demographics data set</span>
<span class=linenos data-linenos=" 979 "></span><span class=sd>        index_col: Column index that represents subject folder names</span>
<span class=linenos data-linenos=" 980 "></span>
<span class=linenos data-linenos=" 981 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos=" 982 "></span><span class=sd>        MedicalFolderDataset object</span>
<span class=linenos data-linenos=" 983 "></span>
<span class=linenos data-linenos=" 984 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos=" 985 "></span><span class=sd>        FedbiomedDatasetError: If Medical Folder dataset is not successfully loaded</span>
<span class=linenos data-linenos=" 986 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 987 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos=" 988 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Can not load Medical Folder dataset without &quot;</span>
<span class=linenos data-linenos=" 989 "></span>                                    <span class=sa>f</span><span class=s2>&quot;declaring root directory. Please set root or build MedicalFolderController &quot;</span>
<span class=linenos data-linenos=" 990 "></span>                                    <span class=sa>f</span><span class=s2>&quot;with by providing `root` argument use&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 991 "></span>
<span class=linenos data-linenos=" 992 "></span>    <span class=n>modalities</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>modalities</span><span class=p>()</span>
<span class=linenos data-linenos=" 993 "></span>
<span class=linenos data-linenos=" 994 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos=" 995 "></span>        <span class=n>dataset</span> <span class=o>=</span> <span class=n>MedicalFolderDataset</span><span class=p>(</span><span class=n>root</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_root</span><span class=p>,</span>
<span class=linenos data-linenos=" 996 "></span>                                       <span class=n>tabular_file</span><span class=o>=</span><span class=n>tabular_file</span><span class=p>,</span>
<span class=linenos data-linenos=" 997 "></span>                                       <span class=n>index_col</span><span class=o>=</span><span class=n>index_col</span><span class=p>,</span>
<span class=linenos data-linenos=" 998 "></span>                                       <span class=n>data_modalities</span><span class=o>=</span><span class=n>modalities</span><span class=p>,</span>
<span class=linenos data-linenos=" 999 "></span>                                       <span class=n>target_modalities</span><span class=o>=</span><span class=n>modalities</span><span class=p>)</span>
<span class=linenos data-linenos="1000 "></span>    <span class=k>except</span> <span class=n>FedbiomedError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="1001 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Can not create Medical Folder dataset. </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="1002 "></span>
<span class=linenos data-linenos="1003 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="1004 "></span>        <span class=n>dataset</span><span class=o>.</span><span class=n>set_dlp</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dlp</span><span class=p>)</span>
<span class=linenos data-linenos="1005 "></span>    <span class=k>return</span> <span class=n>dataset</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderController.subject_modality_status class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">subject_modality_status</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>subject_modality_status</span><span class=p>(</span><span class=n>index</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Scans subjects and checks which modalities are existing for each subject</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>index</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>, <span title="pandas.Series">Series</span>]</code> </td> <td> <div class=doc-md-description> <p>Array-like index that comes from reference csv file of Medical Folder dataset. It represents subject folder names. Defaults to None.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p>Returns: Modality status for each subject that indicates which modalities are available</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="942 "></span><span class=k>def</span> <span class=nf>subject_modality_status</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>List</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos="943 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Scans subjects and checks which modalities are existing for each subject</span>
<span class=linenos data-linenos="944 "></span>
<span class=linenos data-linenos="945 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="946 "></span><span class=sd>        index: Array-like index that comes from reference csv file of Medical Folder dataset. It represents subject</span>
<span class=linenos data-linenos="947 "></span><span class=sd>            folder names. Defaults to None.</span>
<span class=linenos data-linenos="948 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="949 "></span><span class=sd>        Modality status for each subject that indicates which modalities are available</span>
<span class=linenos data-linenos="950 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="951 "></span>
<span class=linenos data-linenos="952 "></span>    <span class=n>modalities</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>modalities</span><span class=p>()</span>
<span class=linenos data-linenos="953 "></span>    <span class=n>subjects</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>subjects_with_imaging_data_folders</span><span class=p>()</span>
<span class=linenos data-linenos="954 "></span>    <span class=n>modality_status</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;columns&quot;</span><span class=p>:</span> <span class=p>[</span><span class=o>*</span><span class=n>modalities</span><span class=p>],</span> <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=p>[],</span> <span class=s2>&quot;index&quot;</span><span class=p>:</span> <span class=p>[]}</span>
<span class=linenos data-linenos="955 "></span>
<span class=linenos data-linenos="956 "></span>    <span class=k>if</span> <span class=n>index</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="957 "></span>        <span class=n>_</span><span class=p>,</span> <span class=n>missing_subjects</span><span class=p>,</span> <span class=n>missing_entries</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>available_subjects</span><span class=p>(</span><span class=n>subjects_from_index</span><span class=o>=</span><span class=n>index</span><span class=p>)</span>
<span class=linenos data-linenos="958 "></span>        <span class=n>modality_status</span><span class=p>[</span><span class=s2>&quot;columns&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;in_folder&quot;</span><span class=p>,</span> <span class=s2>&quot;in_index&quot;</span><span class=p>])</span>
<span class=linenos data-linenos="959 "></span>
<span class=linenos data-linenos="960 "></span>    <span class=k>for</span> <span class=n>subject</span> <span class=ow>in</span> <span class=n>subjects</span><span class=p>:</span>
<span class=linenos data-linenos="961 "></span>        <span class=n>modality_report</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_modalities_existing</span><span class=p>(</span><span class=n>subject</span><span class=p>,</span> <span class=n>modalities</span><span class=p>)</span>
<span class=linenos data-linenos="962 "></span>        <span class=n>status_list</span> <span class=o>=</span> <span class=p>[</span><span class=n>status</span> <span class=k>for</span> <span class=n>status</span> <span class=ow>in</span> <span class=n>modality_report</span><span class=p>]</span>
<span class=linenos data-linenos="963 "></span>        <span class=k>if</span> <span class=n>index</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="964 "></span>            <span class=n>status_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=kc>False</span> <span class=k>if</span> <span class=n>subject</span> <span class=ow>in</span> <span class=n>missing_subjects</span> <span class=k>else</span> <span class=kc>True</span><span class=p>)</span>
<span class=linenos data-linenos="965 "></span>            <span class=n>status_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=kc>False</span> <span class=k>if</span> <span class=n>subject</span> <span class=ow>in</span> <span class=n>missing_entries</span> <span class=k>else</span> <span class=kc>True</span><span class=p>)</span>
<span class=linenos data-linenos="966 "></span>
<span class=linenos data-linenos="967 "></span>        <span class=n>modality_status</span><span class=p>[</span><span class=s2>&quot;data&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>status_list</span><span class=p>)</span>
<span class=linenos data-linenos="968 "></span>        <span class=n>modality_status</span><span class=p>[</span><span class=s2>&quot;index&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>subject</span><span class=p>)</span>
<span class=linenos data-linenos="969 "></span>
<span class=linenos data-linenos="970 "></span>    <span class=k>return</span> <span class=n>modality_status</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.MedicalFolderDataset class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">MedicalFolderDataset</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>MedicalFolderDataset</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>data_modalities</span><span class=o>=</span><span class=s1>&#39;T1&#39;</span><span class=p>,</span> <span class=n>transform</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>target_modalities</span><span class=o>=</span><span class=s1>&#39;label&#39;</span><span class=p>,</span> <span class=n>target_transform</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>demographics_transform</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>tabular_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>index_col</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title="torch.utils.data.Dataset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Dataset">Dataset</a></code>, <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._medical_datasets.MedicalFolderBase" href="#fedbiomed.common.data.MedicalFolderBase">MedicalFolderBase</a></code></p> <p>Torch dataset following the Medical Folder Structure.</p> <p>The Medical Folder structure is loosely inspired by the <a href=https://bids.neuroimaging.io/ >BIDS standard</a> [1]. It should respect the following pattern: <div class=highlight><pre><span></span><code> MedicalFolder_root/
     demographics.csv
     sub-01/
         T1/
           sub-01_xxx.nii.gz
         T2/
             sub-01_xxx.nii.gz
</code></pre></div> where the first-level subfolders or the root correspond to the subjects, and each subject's folder contains subfolders for each imaging modality. Images should be in Nifti format, with either the .nii or .nii.gz extensions. Finally, within the root folder there should also be a demographics file containing at least one index column with the names of the subject folders. This column will be used to explore the data and load the images. The demographics file may contain additional information about each subject and will be loaded alongside the images by our framework.</p> <p>[1] <a href=https://bids.neuroimaging.io/ >https://bids.neuroimaging.io/</a></p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>root</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code> </td> <td> <div class=doc-md-description> <p>Root folder containing all the subject directories.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>data_modalities</code></td> <td> <code>(<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a>)</code> </td> <td> <div class=doc-md-description> <p>Modality or modalities to be used as data sources.</p> </div> </td> <td> <code>&#39;T1&#39;</code> </td> </tr> <tr class=doc-section-item> <td><code>transform</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>]]</code> </td> <td> <div class=doc-md-description> <p>A function or dict of function transform(s) that preprocess each data source.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>target_modalities</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]]</code> </td> <td> <div class=doc-md-description> <p>(str, Iterable): Modality or modalities to be used as target sources.</p> </div> </td> <td> <code>&#39;label&#39;</code> </td> </tr> <tr class=doc-section-item> <td><code>target_transform</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>, <a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>]]</code> </td> <td> <div class=doc-md-description> <p>A function or dict of function transform(s) that preprocess each target source.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>demographics_transform</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>]</code> </td> <td> <div class=doc-md-description> <p>TODO</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>tabular_file</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>, None]</code> </td> <td> <div class=doc-md-description> <p>Path to a CSV or Excel file containing the demographic information from the patients.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>index_col</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, None]</code> </td> <td> <div class=doc-md-description> <p>Column name in the tabular file containing the subject ids which mush match the folder names.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="514 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="515 "></span>             <span class=n>root</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>PathLike</span><span class=p>,</span> <span class=n>Path</span><span class=p>],</span>
<span class=linenos data-linenos="516 "></span>             <span class=n>data_modalities</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>str</span><span class=p>]]]</span> <span class=o>=</span> <span class=s1>&#39;T1&#39;</span><span class=p>,</span>
<span class=linenos data-linenos="517 "></span>             <span class=n>transform</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Callable</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Callable</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="518 "></span>             <span class=n>target_modalities</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>str</span><span class=p>]]]</span> <span class=o>=</span> <span class=s1>&#39;label&#39;</span><span class=p>,</span>
<span class=linenos data-linenos="519 "></span>             <span class=n>target_transform</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Callable</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Callable</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="520 "></span>             <span class=n>demographics_transform</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Callable</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="521 "></span>             <span class=n>tabular_file</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>PathLike</span><span class=p>,</span> <span class=n>Path</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="522 "></span>             <span class=n>index_col</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>str</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos="523 "></span>             <span class=p>):</span>
<span class=linenos data-linenos="524 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor for class `MedicalFolderDataset`.</span>
<span class=linenos data-linenos="525 "></span>
<span class=linenos data-linenos="526 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="527 "></span><span class=sd>        root: Root folder containing all the subject directories.</span>
<span class=linenos data-linenos="528 "></span><span class=sd>        data_modalities (str, Iterable): Modality or modalities to be used as data sources.</span>
<span class=linenos data-linenos="529 "></span><span class=sd>        transform: A function or dict of function transform(s) that preprocess each data source.</span>
<span class=linenos data-linenos="530 "></span><span class=sd>        target_modalities: (str, Iterable): Modality or modalities to be used as target sources.</span>
<span class=linenos data-linenos="531 "></span><span class=sd>        target_transform: A function or dict of function transform(s) that preprocess each target source.</span>
<span class=linenos data-linenos="532 "></span><span class=sd>        demographics_transform: TODO</span>
<span class=linenos data-linenos="533 "></span><span class=sd>        tabular_file: Path to a CSV or Excel file containing the demographic information from the patients.</span>
<span class=linenos data-linenos="534 "></span><span class=sd>        index_col: Column name in the tabular file containing the subject ids which mush match the folder names.</span>
<span class=linenos data-linenos="535 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="536 "></span>    <span class=nb>super</span><span class=p>(</span><span class=n>MedicalFolderDataset</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>root</span><span class=o>=</span><span class=n>root</span><span class=p>)</span>
<span class=linenos data-linenos="537 "></span>
<span class=linenos data-linenos="538 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_tabular_file</span> <span class=o>=</span> <span class=n>tabular_file</span>
<span class=linenos data-linenos="539 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_index_col</span> <span class=o>=</span> <span class=n>index_col</span>
<span class=linenos data-linenos="540 "></span>
<span class=linenos data-linenos="541 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_data_modalities</span> <span class=o>=</span> <span class=p>[</span><span class=n>data_modalities</span><span class=p>]</span> <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data_modalities</span><span class=p>,</span> <span class=nb>str</span><span class=p>)</span> <span class=k>else</span> <span class=n>data_modalities</span>
<span class=linenos data-linenos="542 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_target_modalities</span> <span class=o>=</span> <span class=p>[</span><span class=n>target_modalities</span><span class=p>]</span> <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>target_modalities</span><span class=p>,</span> <span class=nb>str</span><span class=p>)</span> <span class=k>else</span> <span class=n>target_modalities</span>
<span class=linenos data-linenos="543 "></span>
<span class=linenos data-linenos="544 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_transform</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_check_and_reformat_transforms</span><span class=p>(</span><span class=n>transform</span><span class=p>,</span> <span class=n>data_modalities</span><span class=p>)</span>
<span class=linenos data-linenos="545 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_target_transform</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_check_and_reformat_transforms</span><span class=p>(</span><span class=n>target_transform</span><span class=p>,</span> <span class=n>target_modalities</span><span class=p>)</span>
<span class=linenos data-linenos="546 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_demographics_transform</span> <span class=o>=</span> <span class=n>demographics_transform</span> <span class=k>if</span> <span class=n>demographics_transform</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=p>{}</span>
<span class=linenos data-linenos="547 "></span>
<span class=linenos data-linenos="548 "></span>    <span class=c1># Image loader</span>
<span class=linenos data-linenos="549 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_reader</span> <span class=o>=</span> <span class=n>Compose</span><span class=p>([</span>
<span class=linenos data-linenos="550 "></span>        <span class=n>LoadImage</span><span class=p>(</span><span class=n>ITKReader</span><span class=p>(),</span> <span class=n>image_only</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
<span class=linenos data-linenos="551 "></span>        <span class=n>ToTensor</span><span class=p>()</span>
<span class=linenos data-linenos="552 "></span>    <span class=p>])</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.MedicalFolderDataset-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.ALLOWED_EXTENSIONS class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">ALLOWED_EXTENSIONS</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>ALLOWED_EXTENSIONS</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;.nii&#39;</span><span class=p>,</span> <span class=s1>&#39;.nii.gz&#39;</span><span class=p>]</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.demographics class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">demographics</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-cached"><code>cached</code></small> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>demographics</span>
</code></pre></div> <div class="doc doc-contents "> <p>Loads tabular data file (supports excel, csv, tsv and colon separated value files).</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.index_col class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">index_col</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> <small class="doc doc-label doc-label-writable"><code>writable</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>index_col</span>
</code></pre></div> <div class="doc doc-contents "> <p>Getter/setter of the column containing folder's name (in the tabular file)</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.subjects_has_all_modalities class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">subjects_has_all_modalities</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>subjects_has_all_modalities</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets only the subjects that have all required modalities</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.subjects_registered_in_demographics class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">subjects_registered_in_demographics</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-cached"><code>cached</code></small> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>subjects_registered_in_demographics</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets the subject only those who are present in the demographics file.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.tabular_file class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">tabular_file</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> <small class="doc doc-label doc-label-writable"><code>writable</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>tabular_file</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.common.data.MedicalFolderDataset-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.get_nontransformed_item class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">get_nontransformed_item</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>get_nontransformed_item</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="554 "></span><span class=k>def</span> <span class=nf>get_nontransformed_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
<span class=linenos data-linenos="555 "></span>    <span class=c1># For the first item retrieve complete subject folders</span>
<span class=linenos data-linenos="556 "></span>    <span class=n>subjects</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>subject_folders</span><span class=p>()</span>
<span class=linenos data-linenos="557 "></span>
<span class=linenos data-linenos="558 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>subjects</span><span class=p>:</span>
<span class=linenos data-linenos="559 "></span>        <span class=c1># case where subjects is an empty list (subject folders have not been found)</span>
<span class=linenos data-linenos="560 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span>
<span class=linenos data-linenos="561 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Cannot find complete subject folders with all the modalities&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="562 "></span>    <span class=c1># Get subject folder</span>
<span class=linenos data-linenos="563 "></span>    <span class=n>subject_folder</span> <span class=o>=</span> <span class=n>subjects</span><span class=p>[</span><span class=n>item</span><span class=p>]</span>
<span class=linenos data-linenos="564 "></span>
<span class=linenos data-linenos="565 "></span>    <span class=c1># Load data modalities</span>
<span class=linenos data-linenos="566 "></span>    <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>load_images</span><span class=p>(</span><span class=n>subject_folder</span><span class=p>,</span> <span class=n>modalities</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_data_modalities</span><span class=p>)</span>
<span class=linenos data-linenos="567 "></span>
<span class=linenos data-linenos="568 "></span>    <span class=c1># Load target modalities</span>
<span class=linenos data-linenos="569 "></span>    <span class=n>targets</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>load_images</span><span class=p>(</span><span class=n>subject_folder</span><span class=p>,</span> <span class=n>modalities</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_target_modalities</span><span class=p>)</span>
<span class=linenos data-linenos="570 "></span>
<span class=linenos data-linenos="571 "></span>    <span class=c1># Demographics</span>
<span class=linenos data-linenos="572 "></span>    <span class=n>demographics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_from_demographics</span><span class=p>(</span><span class=n>subject_id</span><span class=o>=</span><span class=n>subject_folder</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
<span class=linenos data-linenos="573 "></span>    <span class=k>return</span> <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>demographics</span><span class=p>),</span> <span class=n>targets</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.load_images class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">load_images</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>load_images</span><span class=p>(</span><span class=n>subject_folder</span><span class=p>,</span> <span class=n>modalities</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Loads modality images in given subject folder</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>subject_folder</code></td> <td> <code><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></code> </td> <td> <div class=doc-md-description> <p>Subject folder where modalities are stored</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>modalities</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code> </td> <td> <div class=doc-md-description> <p>List of available modalities</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="torch.Tensor" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor">Tensor</a>]</code> </td> <td> <div class=doc-md-description> <p>Subject image data as victories where keys represent each modality.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="749 "></span><span class=k>def</span> <span class=nf>load_images</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>subject_folder</span><span class=p>:</span> <span class=n>Path</span><span class=p>,</span> <span class=n>modalities</span><span class=p>:</span> <span class=nb>list</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>torch</span><span class=o>.</span><span class=n>Tensor</span><span class=p>]:</span>
<span class=linenos data-linenos="750 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Loads modality images in given subject folder</span>
<span class=linenos data-linenos="751 "></span>
<span class=linenos data-linenos="752 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="753 "></span><span class=sd>        subject_folder: Subject folder where modalities are stored</span>
<span class=linenos data-linenos="754 "></span><span class=sd>        modalities: List of available modalities</span>
<span class=linenos data-linenos="755 "></span>
<span class=linenos data-linenos="756 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="757 "></span><span class=sd>        Subject image data as victories where keys represent each modality.</span>
<span class=linenos data-linenos="758 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="759 "></span>    <span class=c1># FIXME: improvment suggestion of this function at #1279</span>
<span class=linenos data-linenos="760 "></span>
<span class=linenos data-linenos="761 "></span>    <span class=n>subject_data</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="762 "></span>
<span class=linenos data-linenos="763 "></span>    <span class=k>for</span> <span class=n>modality</span> <span class=ow>in</span> <span class=n>modalities</span><span class=p>:</span>
<span class=linenos data-linenos="764 "></span>        <span class=n>modality_folder</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subject_modality_folder</span><span class=p>(</span><span class=n>subject_folder</span><span class=p>,</span> <span class=n>modality</span><span class=p>)</span>
<span class=linenos data-linenos="765 "></span>        <span class=n>image_folder</span> <span class=o>=</span> <span class=n>subject_folder</span><span class=o>.</span><span class=n>joinpath</span><span class=p>(</span><span class=n>modality_folder</span><span class=p>)</span>
<span class=linenos data-linenos="766 "></span>        <span class=n>nii_files</span> <span class=o>=</span> <span class=p>[</span><span class=n>p</span><span class=o>.</span><span class=n>resolve</span><span class=p>()</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>image_folder</span><span class=o>.</span><span class=n>glob</span><span class=p>(</span><span class=s2>&quot;**/*&quot;</span><span class=p>)]</span>
<span class=linenos data-linenos="767 "></span>
<span class=linenos data-linenos="768 "></span>        <span class=c1># Load the first, we assume there is going to be a single image per modality for now.</span>
<span class=linenos data-linenos="769 "></span>
<span class=linenos data-linenos="770 "></span>        <span class=n>nii_files</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span>
<span class=linenos data-linenos="771 "></span>            <span class=n>img</span> <span class=k>for</span> <span class=n>img</span> <span class=ow>in</span> <span class=n>nii_files</span> <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>img</span><span class=p>)</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=n>fmt</span><span class=p>)</span> <span class=k>for</span> <span class=n>fmt</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>ALLOWED_EXTENSIONS</span><span class=p>)</span>
<span class=linenos data-linenos="772 "></span>                          <span class=p>)</span>
<span class=linenos data-linenos="773 "></span>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>nii_files</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
<span class=linenos data-linenos="774 "></span>            <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: folder </span><span class=si>{</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>image_folder</span><span class=p>,</span><span class=w> </span><span class=n>modality</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="775 "></span>                                        <span class=s2>&quot; is empty, but should contain an niftii image. Aborting&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="776 "></span>
<span class=linenos data-linenos="777 "></span>        <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>nii_files</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
<span class=linenos data-linenos="778 "></span>            <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: more than one niftii file has been detected&quot;</span>
<span class=linenos data-linenos="779 "></span>                                        <span class=s2>&quot; {&#39;, &#39;.join(tuple(str(f) for f in nii_files))}. &quot;</span>
<span class=linenos data-linenos="780 "></span>                                        <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>There should be only one niftii image per modality. Aborting&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="781 "></span>
<span class=linenos data-linenos="782 "></span>        <span class=n>img_path</span> <span class=o>=</span> <span class=n>nii_files</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<span class=linenos data-linenos="783 "></span>        <span class=n>img</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reader</span><span class=p>(</span><span class=n>img_path</span><span class=p>)</span>
<span class=linenos data-linenos="784 "></span>        <span class=n>subject_data</span><span class=p>[</span><span class=n>modality</span><span class=p>]</span> <span class=o>=</span> <span class=n>img</span>
<span class=linenos data-linenos="785 "></span>
<span class=linenos data-linenos="786 "></span>    <span class=k>return</span> <span class=n>subject_data</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.set_dataset_parameters class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">set_dataset_parameters</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>set_dataset_parameters</span><span class=p>(</span><span class=n>parameters</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Sets dataset parameters.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>parameters</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>Parameters to initialize</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDatasetError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDatasetError">FedbiomedDatasetError</a></code> </td> <td> <div class=doc-md-description> <p>If given parameters are not of <code>dict</code> type</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="730 "></span><span class=k>def</span> <span class=nf>set_dataset_parameters</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parameters</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
<span class=linenos data-linenos="731 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Sets dataset parameters.</span>
<span class=linenos data-linenos="732 "></span>
<span class=linenos data-linenos="733 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="734 "></span><span class=sd>        parameters: Parameters to initialize</span>
<span class=linenos data-linenos="735 "></span>
<span class=linenos data-linenos="736 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="737 "></span><span class=sd>        FedbiomedDatasetError: If given parameters are not of `dict` type</span>
<span class=linenos data-linenos="738 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="739 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>parameters</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
<span class=linenos data-linenos="740 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Expected type for `parameters` is `dict, &quot;</span>
<span class=linenos data-linenos="741 "></span>                                    <span class=sa>f</span><span class=s2>&quot;but got </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>parameters</span><span class=p>)</span><span class=si>}</span><span class=s2>`&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="742 "></span>
<span class=linenos data-linenos="743 "></span>    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>parameters</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<span class=linenos data-linenos="744 "></span>        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=linenos data-linenos="745 "></span>            <span class=nb>setattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
<span class=linenos data-linenos="746 "></span>        <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="747 "></span>            <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB613</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Trying to set non existing attribute &#39;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#39;&quot;</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.shape class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">shape</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>shape</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves shape information for modalities and demographics csv</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="803 "></span><span class=k>def</span> <span class=nf>shape</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
<span class=linenos data-linenos="804 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves shape information for modalities and demographics csv&quot;&quot;&quot;</span>
<span class=linenos data-linenos="805 "></span>
<span class=linenos data-linenos="806 "></span>    <span class=c1># Get all modalities</span>
<span class=linenos data-linenos="807 "></span>    <span class=n>data_modalities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data_modalities</span><span class=p>))</span>
<span class=linenos data-linenos="808 "></span>    <span class=n>target_modalities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_target_modalities</span><span class=p>))</span>
<span class=linenos data-linenos="809 "></span>    <span class=n>modalities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data_modalities</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>_target_modalities</span><span class=p>))</span>
<span class=linenos data-linenos="810 "></span>    <span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>_</span><span class=p>),</span> <span class=n>targets</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_nontransformed_item</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<span class=linenos data-linenos="811 "></span>
<span class=linenos data-linenos="812 "></span>    <span class=n>result</span> <span class=o>=</span> <span class=p>{</span><span class=n>modality</span><span class=p>:</span> <span class=nb>list</span><span class=p>(</span><span class=n>image</span><span class=p>[</span><span class=n>modality</span><span class=p>]</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=k>for</span> <span class=n>modality</span> <span class=ow>in</span> <span class=n>data_modalities</span><span class=p>}</span>
<span class=linenos data-linenos="813 "></span>
<span class=linenos data-linenos="814 "></span>    <span class=n>result</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=n>modality</span><span class=p>:</span> <span class=nb>list</span><span class=p>(</span><span class=n>targets</span><span class=p>[</span><span class=n>modality</span><span class=p>]</span><span class=o>.</span><span class=n>shape</span><span class=p>)</span> <span class=k>for</span> <span class=n>modality</span> <span class=ow>in</span> <span class=n>target_modalities</span><span class=p>})</span>
<span class=linenos data-linenos="815 "></span>    <span class=n>num_modalities</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>modalities</span><span class=p>)</span>
<span class=linenos data-linenos="816 "></span>    <span class=n>demographics_shape</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>demographics</span><span class=o>.</span><span class=n>shape</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>demographics</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=kc>None</span>
<span class=linenos data-linenos="817 "></span>    <span class=n>result</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s2>&quot;demographics&quot;</span><span class=p>:</span> <span class=n>demographics_shape</span><span class=p>,</span> <span class=s2>&quot;num_modalities&quot;</span><span class=p>:</span> <span class=n>num_modalities</span><span class=p>})</span>
<span class=linenos data-linenos="818 "></span>
<span class=linenos data-linenos="819 "></span>    <span class=k>return</span> <span class=n>result</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.MedicalFolderDataset.subject_folders class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">subject_folders</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>subject_folders</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves subject folder names of only those who have their complete modalities</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code> </td> <td> <div class=doc-md-description> <p>List of subject directories that has all requested modalities</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="788 "></span><span class=k>def</span> <span class=nf>subject_folders</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Path</span><span class=p>]:</span>
<span class=linenos data-linenos="789 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves subject folder names of only those who have their complete modalities</span>
<span class=linenos data-linenos="790 "></span>
<span class=linenos data-linenos="791 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="792 "></span><span class=sd>        List of subject directories that has all requested modalities</span>
<span class=linenos data-linenos="793 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="794 "></span>
<span class=linenos data-linenos="795 "></span>    <span class=c1># If demographics are present</span>
<span class=linenos data-linenos="796 "></span>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tabular_file</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_index_col</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="797 "></span>        <span class=n>complete_subject_folders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>subjects_registered_in_demographics</span>
<span class=linenos data-linenos="798 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="799 "></span>        <span class=n>complete_subject_folders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>subjects_has_all_modalities</span>
<span class=linenos data-linenos="800 "></span>
<span class=linenos data-linenos="801 "></span>    <span class=k>return</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>_root</span><span class=o>.</span><span class=n>joinpath</span><span class=p>(</span><span class=n>folder</span><span class=p>)</span> <span class=k>for</span> <span class=n>folder</span> <span class=ow>in</span> <span class=n>complete_subject_folders</span><span class=p>]</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.MedicalFolderLoadingBlockTypes class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">MedicalFolderLoadingBlockTypes</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>MedicalFolderLoadingBlockTypes</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="fedbiomed.common.constants.DataLoadingBlockTypes" href="../constants/#fedbiomed.common.constants.DataLoadingBlockTypes">DataLoadingBlockTypes</a></code>, <code><a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p> <details class=quote> <summary>Source code in <code>fedbiomed/common/constants.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="239 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>):</span>
<span class=linenos data-linenos="240 "></span>    <span class=bp>cls</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span>
<span class=linenos data-linenos="241 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<span class=linenos data-linenos="242 "></span>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;all fields of DataLoadingBlockTypes subclasses&quot;</span>
<span class=linenos data-linenos="243 "></span>                         <span class=s2>&quot; must be of str type&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="244 "></span>    <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>==</span> <span class=n>e</span><span class=o>.</span><span class=n>value</span> <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=bp>cls</span><span class=p>):</span>
<span class=linenos data-linenos="245 "></span>        <span class=n>a</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span>
<span class=linenos data-linenos="246 "></span>        <span class=n>e</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>)</span><span class=o>.</span><span class=n>name</span>
<span class=linenos data-linenos="247 "></span>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<span class=linenos data-linenos="248 "></span>            <span class=sa>f</span><span class=s2>&quot;duplicate values not allowed in DataLoadingBlockTypes and &quot;</span>
<span class=linenos data-linenos="249 "></span>            <span class=sa>f</span><span class=s2>&quot;its subclasses: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s2> --&gt; </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.MedicalFolderLoadingBlockTypes-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.MedicalFolderLoadingBlockTypes.MODALITIES_TO_FOLDERS class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">MODALITIES_TO_FOLDERS</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>MODALITIES_TO_FOLDERS</span> <span class=o>=</span> <span class=s1>&#39;modalities_to_folders&#39;</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.NIFTIFolderDataset class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">NIFTIFolderDataset</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>NIFTIFolderDataset</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>transform</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>target_transform</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title="torch.utils.data.Dataset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Dataset">Dataset</a></code></p> <p>A Generic class for loading NIFTI Images using the folder structure as the target classes' labels.</p> <p>Supported formats: - NIFTI and compressed NIFTI files: <code>.nii</code>, <code>.nii.gz</code></p> <p>This is a Dataset useful in classification tasks. Its usage is quite simple, quite similar to <code>torchvision.datasets.ImageFolder</code>. Images must be contained in first level sub-folders (level 2+ sub-folders are ignored) that describe the target class they belong to (target class label is the name of the folder).</p> <div class=highlight><pre><span></span><code>nifti_dataset_root_folder
 control_group
    subject_1.nii
    subject_2.nii
    ...
 disease_group
     subject_3.nii
     subject_4.nii
     ...
</code></pre></div> <p>In this example, there are 4 samples (one from each *.nii file), 2 target class, with labels <code>control_group</code> and <code>disease_group</code>. <code>subject_1.nii</code> has class label <code>control_group</code>, <code>subject_3.nii</code> has class label <code>disease_group</code>,etc.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>root</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="os.PathLike" href="https://docs.python.org/3/library/os.html#os.PathLike">PathLike</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code> </td> <td> <div class=doc-md-description> <p>folder where the data is located.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>transform</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>, None]</code> </td> <td> <div class=doc-md-description> <p>transforms to be applied on data.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>target_transform</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>, None]</code> </td> <td> <div class=doc-md-description> <p>transforms to be applied on target indexes.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDatasetError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDatasetError">FedbiomedDatasetError</a></code> </td> <td> <div class=doc-md-description> <p>bad argument type</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedDatasetError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedDatasetError">FedbiomedDatasetError</a></code> </td> <td> <div class=doc-md-description> <p>bad root path</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 64 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>root</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>PathLike</span><span class=p>,</span> <span class=n>Path</span><span class=p>],</span>
<span class=linenos data-linenos=" 65 "></span>             <span class=n>transform</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Callable</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 66 "></span>             <span class=n>target_transform</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Callable</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos=" 67 "></span>             <span class=p>):</span>
<span class=linenos data-linenos=" 68 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor of the class</span>
<span class=linenos data-linenos=" 69 "></span>
<span class=linenos data-linenos=" 70 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos=" 71 "></span><span class=sd>        root: folder where the data is located.</span>
<span class=linenos data-linenos=" 72 "></span><span class=sd>        transform: transforms to be applied on data.</span>
<span class=linenos data-linenos=" 73 "></span><span class=sd>        target_transform: transforms to be applied on target indexes.</span>
<span class=linenos data-linenos=" 74 "></span>
<span class=linenos data-linenos=" 75 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos=" 76 "></span><span class=sd>        FedbiomedDatasetError: bad argument type</span>
<span class=linenos data-linenos=" 77 "></span><span class=sd>        FedbiomedDatasetError: bad root path</span>
<span class=linenos data-linenos=" 78 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 79 "></span>    <span class=c1># check parameters type</span>
<span class=linenos data-linenos=" 80 "></span>    <span class=k>for</span> <span class=n>tr</span><span class=p>,</span> <span class=n>trname</span> <span class=ow>in</span> <span class=p>((</span><span class=n>transform</span><span class=p>,</span> <span class=s1>&#39;transform&#39;</span><span class=p>),</span> <span class=p>(</span><span class=n>target_transform</span><span class=p>,</span> <span class=s1>&#39;target_transform&#39;</span><span class=p>)):</span>
<span class=linenos data-linenos=" 81 "></span>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>callable</span><span class=p>(</span><span class=n>tr</span><span class=p>)</span> <span class=ow>and</span> <span class=n>tr</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos=" 82 "></span>            <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB612</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Parameter </span><span class=si>{</span><span class=n>trname</span><span class=si>}</span><span class=s2> has incorrect &quot;</span>
<span class=linenos data-linenos=" 83 "></span>                                        <span class=sa>f</span><span class=s2>&quot;type </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>tr</span><span class=p>)</span><span class=si>}</span><span class=s2>, cannot create dataset.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 84 "></span>
<span class=linenos data-linenos=" 85 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=nb>str</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>PathLike</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>Path</span><span class=p>):</span>
<span class=linenos data-linenos=" 86 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB612</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Parameter `root` has incorrect type &quot;</span>
<span class=linenos data-linenos=" 87 "></span>                                    <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>root</span><span class=p>)</span><span class=si>}</span><span class=s2>, cannot create dataset.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 88 "></span>
<span class=linenos data-linenos=" 89 "></span>    <span class=c1># initialize object variables</span>
<span class=linenos data-linenos=" 90 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_files</span> <span class=o>=</span> <span class=p>[]</span>
<span class=linenos data-linenos=" 91 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_class_labels</span> <span class=o>=</span> <span class=p>[]</span>
<span class=linenos data-linenos=" 92 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_targets</span> <span class=o>=</span> <span class=p>[]</span>
<span class=linenos data-linenos=" 93 "></span>
<span class=linenos data-linenos=" 94 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos=" 95 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_root_dir</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>root</span><span class=p>)</span><span class=o>.</span><span class=n>expanduser</span><span class=p>()</span>
<span class=linenos data-linenos=" 96 "></span>    <span class=k>except</span> <span class=ne>RuntimeError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos=" 97 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span>
<span class=linenos data-linenos=" 98 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB612</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Cannot expand path </span><span class=si>{</span><span class=n>root</span><span class=si>}</span><span class=s2>, error message is: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 99 "></span>
<span class=linenos data-linenos="100 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_transform</span> <span class=o>=</span> <span class=n>transform</span>
<span class=linenos data-linenos="101 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_target_transform</span> <span class=o>=</span> <span class=n>target_transform</span>
<span class=linenos data-linenos="102 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_reader</span> <span class=o>=</span> <span class=n>Compose</span><span class=p>([</span>
<span class=linenos data-linenos="103 "></span>        <span class=n>LoadImage</span><span class=p>(</span><span class=n>ITKReader</span><span class=p>(),</span> <span class=n>image_only</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
<span class=linenos data-linenos="104 "></span>        <span class=n>ToTensor</span><span class=p>()</span>
<span class=linenos data-linenos="105 "></span>    <span class=p>])</span>
<span class=linenos data-linenos="106 "></span>
<span class=linenos data-linenos="107 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_explore_root_folder</span><span class=p>()</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.NIFTIFolderDataset-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.NIFTIFolderDataset.files class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">files</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>files</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves the paths to the sample images.</p> <p>Gives sames order as when retrieving the sample images (eg <code>self.files[0]</code> is the path to <code>self.__getitem__[0]</code>)</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code> </td> <td> <div class=doc-md-description> <p>List of the absolute paths to the sample images</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="151 "></span><span class=k>def</span> <span class=nf>files</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Path</span><span class=p>]:</span>
<span class=linenos data-linenos="152 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves the paths to the sample images.</span>
<span class=linenos data-linenos="153 "></span>
<span class=linenos data-linenos="154 "></span><span class=sd>    Gives sames order as when retrieving the sample images (eg `self.files[0]`</span>
<span class=linenos data-linenos="155 "></span><span class=sd>    is the path to `self.__getitem__[0]`)</span>
<span class=linenos data-linenos="156 "></span>
<span class=linenos data-linenos="157 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="158 "></span><span class=sd>        List of the absolute paths to the sample images</span>
<span class=linenos data-linenos="159 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="160 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_files</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.NIFTIFolderDataset.labels class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">labels</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>labels</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Retrieves the labels of the target classes.</p> <p>Target label index is the index of the corresponding label in this list.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="typing.List" href="https://docs.python.org/3/library/typing.html#typing.List">List</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code> </td> <td> <div class=doc-md-description> <p>List of the labels of the target classes.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_medical_datasets.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="141 "></span><span class=k>def</span> <span class=nf>labels</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=linenos data-linenos="142 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieves the labels of the target classes.</span>
<span class=linenos data-linenos="143 "></span>
<span class=linenos data-linenos="144 "></span><span class=sd>    Target label index is the index of the corresponding label in this list.</span>
<span class=linenos data-linenos="145 "></span>
<span class=linenos data-linenos="146 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="147 "></span><span class=sd>        List of the labels of the target classes.</span>
<span class=linenos data-linenos="148 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="149 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_class_labels</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.NPDataLoader class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">NPDataLoader</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>NPDataLoader</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=n>target</span><span class=p>,</span> <span class=n>batch_size</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>shuffle</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>random_seed</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>drop_last</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>DataLoader for a Numpy dataset.</p> <p>This data loader encapsulates a dataset composed of numpy arrays and presents an Iterable interface. One design principle was to try to make the interface as similar as possible to a torch.DataLoader.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.NPDataLoader._dataset">_dataset</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(np.ndarray) a 2d array of features</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.NPDataLoader._target">_target</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(np.ndarray) an optional array of target values</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.NPDataLoader._batch_size">_batch_size</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(int) the number of elements in one batch</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.NPDataLoader._shuffle">_shuffle</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(bool) if True, shuffle the data at the beginning of every epoch</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.NPDataLoader._drop_last">_drop_last</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(bool) if True, drop the last batch if it does not contain batch_size elements</p> </div> </td> </tr> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.NPDataLoader._rng">_rng</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(np.random.Generator) the random number generator for shuffling</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dataset</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>2D Numpy array</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>target</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>Numpy array of target values</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>batch_size</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code> </td> <td> <div class=doc-md-description> <p>batch size for each iteration</p> </div> </td> <td> <code>1</code> </td> </tr> <tr class=doc-section-item> <td><code>shuffle</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> </td> <td> <div class=doc-md-description> <p>shuffle before iteration</p> </div> </td> <td> <code>False</code> </td> </tr> <tr class=doc-section-item> <td><code>random_seed</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code> </td> <td> <div class=doc-md-description> <p>an optional integer to set the numpy random seed for shuffling. If it equals None, then no attempt will be made to set the random seed.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td><code>drop_last</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> </td> <td> <div class=doc-md-description> <p>whether to drop the last batch in case it does not fill the whole batch size</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 39 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos=" 40 "></span>             <span class=n>dataset</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span>
<span class=linenos data-linenos=" 41 "></span>             <span class=n>target</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span>
<span class=linenos data-linenos=" 42 "></span>             <span class=n>batch_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
<span class=linenos data-linenos=" 43 "></span>             <span class=n>shuffle</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<span class=linenos data-linenos=" 44 "></span>             <span class=n>random_seed</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=linenos data-linenos=" 45 "></span>             <span class=n>drop_last</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>):</span>
<span class=linenos data-linenos=" 46 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Construct numpy data loader</span>
<span class=linenos data-linenos=" 47 "></span>
<span class=linenos data-linenos=" 48 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos=" 49 "></span><span class=sd>        dataset: 2D Numpy array</span>
<span class=linenos data-linenos=" 50 "></span><span class=sd>        target: Numpy array of target values</span>
<span class=linenos data-linenos=" 51 "></span><span class=sd>        batch_size: batch size for each iteration</span>
<span class=linenos data-linenos=" 52 "></span><span class=sd>        shuffle: shuffle before iteration</span>
<span class=linenos data-linenos=" 53 "></span><span class=sd>        random_seed: an optional integer to set the numpy random seed for shuffling. If it equals</span>
<span class=linenos data-linenos=" 54 "></span><span class=sd>            None, then no attempt will be made to set the random seed.</span>
<span class=linenos data-linenos=" 55 "></span><span class=sd>        drop_last: whether to drop the last batch in case it does not fill the whole batch size</span>
<span class=linenos data-linenos=" 56 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 57 "></span>
<span class=linenos data-linenos=" 58 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>)</span> <span class=ow>or</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>):</span>
<span class=linenos data-linenos=" 59 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>. Wrong input type for `dataset` or `target` in NPDataLoader. &quot;</span> \
<span class=linenos data-linenos=" 60 "></span>              <span class=sa>f</span><span class=s2>&quot;Expected type np.ndarray for both, instead got </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>dataset</span><span class=p>)</span><span class=si>}</span><span class=s2> and&quot;</span> \
<span class=linenos data-linenos=" 61 "></span>              <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>target</span><span class=p>)</span><span class=si>}</span><span class=s2> respectively.&quot;</span>
<span class=linenos data-linenos=" 62 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos=" 63 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTypeError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos=" 64 "></span>
<span class=linenos data-linenos=" 65 "></span>    <span class=c1># If the researcher gave a 1-dimensional dataset, we expand it to 2 dimensions</span>
<span class=linenos data-linenos=" 66 "></span>    <span class=k>if</span> <span class=n>dataset</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<span class=linenos data-linenos=" 67 "></span>        <span class=n>dataset</span> <span class=o>=</span> <span class=n>dataset</span><span class=p>[:,</span> <span class=n>np</span><span class=o>.</span><span class=n>newaxis</span><span class=p>]</span>
<span class=linenos data-linenos=" 68 "></span>
<span class=linenos data-linenos=" 69 "></span>    <span class=c1># If the researcher gave a 1-dimensional target, we expand it to 2 dimensions</span>
<span class=linenos data-linenos=" 70 "></span>    <span class=k>if</span> <span class=n>target</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<span class=linenos data-linenos=" 71 "></span>        <span class=n>target</span> <span class=o>=</span> <span class=n>target</span><span class=p>[:,</span> <span class=n>np</span><span class=o>.</span><span class=n>newaxis</span><span class=p>]</span>
<span class=linenos data-linenos=" 72 "></span>
<span class=linenos data-linenos=" 73 "></span>    <span class=k>if</span> <span class=n>dataset</span><span class=o>.</span><span class=n>ndim</span> <span class=o>!=</span> <span class=mi>2</span> <span class=ow>or</span> <span class=n>target</span><span class=o>.</span><span class=n>ndim</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>:</span>
<span class=linenos data-linenos=" 74 "></span>        <span class=k>raise</span> <span class=n>FedbiomedValueError</span><span class=p>(</span>
<span class=linenos data-linenos=" 75 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>. Wrong shape for `dataset` or `target` in &quot;</span>
<span class=linenos data-linenos=" 76 "></span>            <span class=sa>f</span><span class=s2>&quot;NPDataLoader. Expected 2-dimensional arrays, instead got </span><span class=si>{</span><span class=n>dataset</span><span class=o>.</span><span class=n>ndim</span><span class=si>}</span><span class=s2>- &quot;</span>
<span class=linenos data-linenos=" 77 "></span>            <span class=sa>f</span><span class=s2>&quot;dimensional and </span><span class=si>{</span><span class=n>target</span><span class=o>.</span><span class=n>ndim</span><span class=si>}</span><span class=s2>-dimensional arrays respectively.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 78 "></span>
<span class=linenos data-linenos=" 79 "></span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>dataset</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=n>target</span><span class=p>):</span>
<span class=linenos data-linenos=" 80 "></span>        <span class=k>raise</span> <span class=n>FedbiomedValueError</span><span class=p>(</span>
<span class=linenos data-linenos=" 81 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>. Inconsistent length for `dataset` and `target` &quot;</span>
<span class=linenos data-linenos=" 82 "></span>            <span class=sa>f</span><span class=s2>&quot;in NPDataLoader. Expected same length, instead got len(dataset)=</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>dataset</span><span class=p>)</span><span class=si>}</span><span class=s2>, &quot;</span>
<span class=linenos data-linenos=" 83 "></span>            <span class=sa>f</span><span class=s2>&quot;len(target)=</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>target</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 84 "></span>
<span class=linenos data-linenos=" 85 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>batch_size</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span> <span class=ow>or</span> <span class=n>batch_size</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
<span class=linenos data-linenos=" 86 "></span>        <span class=k>raise</span> <span class=n>FedbiomedValueError</span><span class=p>(</span>
<span class=linenos data-linenos=" 87 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>. Wrong value for `batch_size` parameter of &quot;</span>
<span class=linenos data-linenos=" 88 "></span>            <span class=sa>f</span><span class=s2>&quot;NPDataLoader. Expected a non-zero positive integer, instead got value </span><span class=si>{</span><span class=n>batch_size</span><span class=si>}</span><span class=s2>.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 89 "></span>
<span class=linenos data-linenos=" 90 "></span>    <span class=k>if</span> <span class=n>random_seed</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>random_seed</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
<span class=linenos data-linenos=" 91 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTypeError</span><span class=p>(</span>
<span class=linenos data-linenos=" 92 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>. Wrong type for `random_seed` parameter of &quot;</span>
<span class=linenos data-linenos=" 93 "></span>            <span class=sa>f</span><span class=s2>&quot;NPDataLoader. Expected int or None, instead got </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>random_seed</span><span class=p>)</span><span class=si>}</span><span class=s2>.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos=" 94 "></span>
<span class=linenos data-linenos=" 95 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span> <span class=o>=</span> <span class=n>dataset</span>
<span class=linenos data-linenos=" 96 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_target</span> <span class=o>=</span> <span class=n>target</span>
<span class=linenos data-linenos=" 97 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_batch_size</span> <span class=o>=</span> <span class=n>batch_size</span>
<span class=linenos data-linenos=" 98 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_shuffle</span> <span class=o>=</span> <span class=n>shuffle</span>
<span class=linenos data-linenos=" 99 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_drop_last</span> <span class=o>=</span> <span class=n>drop_last</span>
<span class=linenos data-linenos="100 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_rng</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>default_rng</span><span class=p>(</span><span class=n>random_seed</span><span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.NPDataLoader-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.NPDataLoader.dataset class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">dataset</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>dataset</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the encapsulated dataset</p> <p>This needs to be a property to harmonize the API with torch.DataLoader, enabling us to write generic code for both DataLoaders.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.NPDataLoader.target class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">target</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>target</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the array of target values</p> <p>This has been made a property to have a homogeneous interface with the dataset property above.</p> </div> </div> <h4 id=fedbiomed.common.data.NPDataLoader-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.NPDataLoader.batch_size class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">batch_size</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>batch_size</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the batch size</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="130 "></span><span class=k>def</span> <span class=nf>batch_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
<span class=linenos data-linenos="131 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the batch size&quot;&quot;&quot;</span>
<span class=linenos data-linenos="132 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_batch_size</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.NPDataLoader.drop_last class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">drop_last</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>drop_last</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the boolean drop_last attribute</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="142 "></span><span class=k>def</span> <span class=nf>drop_last</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=linenos data-linenos="143 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the boolean drop_last attribute&quot;&quot;&quot;</span>
<span class=linenos data-linenos="144 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_drop_last</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.NPDataLoader.n_remainder_samples class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">n_remainder_samples</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>n_remainder_samples</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the remainder of the division between dataset length and batch size.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="146 "></span><span class=k>def</span> <span class=nf>n_remainder_samples</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
<span class=linenos data-linenos="147 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the remainder of the division between dataset length and batch size.&quot;&quot;&quot;</span>
<span class=linenos data-linenos="148 "></span>    <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>)</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>_batch_size</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.NPDataLoader.rng class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">rng</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>rng</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the random number generator</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="134 "></span><span class=k>def</span> <span class=nf>rng</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>Generator</span><span class=p>:</span>
<span class=linenos data-linenos="135 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the random number generator&quot;&quot;&quot;</span>
<span class=linenos data-linenos="136 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_rng</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.NPDataLoader.shuffle class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">shuffle</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>shuffle</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Returns the boolean shuffle attribute</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="138 "></span><span class=k>def</span> <span class=nf>shuffle</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=linenos data-linenos="139 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns the boolean shuffle attribute&quot;&quot;&quot;</span>
<span class=linenos data-linenos="140 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_shuffle</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.SerializationValidation class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">SerializationValidation</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>SerializationValidation</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Provide Validation capabilities for serializing/deserializing a [DataLoadingBlock] or [DataLoadingPlan].</p> <p>When a developer inherits from [DataLoadingBlock] to define a custom loading block, they are required to call the <code>_serialization_validator.update_validation_scheme</code> function with a dictionary argument containing the rules to validate all the additional fields that will be used in the serialization of their loading block.</p> <p>These rules must follow the syntax explained in the <a class="autorefs autorefs-internal" href="../validator/#fedbiomed.common.validator.SchemeValidator">SchemeValidator</a> class.</p> <p>For example <div class=highlight><pre><span></span><code>    <span class=k>class</span> <span class=nc>MyLoadingBlock</span><span class=p>(</span><span class=n>DataLoadingBlock</span><span class=p>):</span>
        <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>my_custom_data</span> <span class=o>=</span> <span class=p>{}</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_serialization_validator</span><span class=o>.</span><span class=n>update_validation_scheme</span><span class=p>({</span>
                <span class=s1>&#39;custom_data&#39;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=o>...</span><span class=n>any</span> <span class=n>other</span> <span class=n>rules</span><span class=p>],</span>
                    <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span>
                <span class=p>}</span>
            <span class=p>})</span>
        <span class=k>def</span> <span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
            <span class=n>serialized</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span>
            <span class=n>serialized</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s1>&#39;custom_data&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>my_custom_data</span><span class=p>})</span>
            <span class=k>return</span> <span class=n>serialized</span>
</code></pre></div></p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title="fedbiomed.common.data.SerializationValidation._validation_scheme">_validation_scheme</span></code></td> <td> </td> <td> <div class=doc-md-description> <p>(dict) an extensible set of rules to validate the DataLoadingBlock metadata.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="51 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="52 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_validation_scheme</span> <span class=o>=</span> <span class=p>{}</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.SerializationValidation-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SerializationValidation.dlb_default_scheme class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">dlb_default_scheme</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>dlb_default_scheme</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>The dictionary of default validation rules for a serialized [DataLoadingBlock].</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="182 "></span><span class=nd>@classmethod</span>
<span class=linenos data-linenos="183 "></span><span class=k>def</span> <span class=nf>dlb_default_scheme</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos="184 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;The dictionary of default validation rules for a serialized [DataLoadingBlock].&quot;&quot;&quot;</span>
<span class=linenos data-linenos="185 "></span>    <span class=k>return</span> <span class=p>{</span>
<span class=linenos data-linenos="186 "></span>        <span class=s1>&#39;loading_block_class&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="187 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_identifier_validation_hook</span><span class=p>],</span>
<span class=linenos data-linenos="188 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="189 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="190 "></span>        <span class=s1>&#39;loading_block_module&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="191 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_identifier_validation_hook</span><span class=p>],</span>
<span class=linenos data-linenos="192 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="193 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="194 "></span>        <span class=s1>&#39;dlb_id&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="195 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_serial_id_validation_hook</span><span class=p>],</span>
<span class=linenos data-linenos="196 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="197 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="198 "></span>    <span class=p>}</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SerializationValidation.dlp_default_scheme class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">dlp_default_scheme</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>dlp_default_scheme</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>The dictionary of default validation rules for a serialized [DataLoadingPlan].</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="200 "></span><span class=nd>@classmethod</span>
<span class=linenos data-linenos="201 "></span><span class=k>def</span> <span class=nf>dlp_default_scheme</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
<span class=linenos data-linenos="202 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;The dictionary of default validation rules for a serialized [DataLoadingPlan].&quot;&quot;&quot;</span>
<span class=linenos data-linenos="203 "></span>    <span class=k>return</span> <span class=p>{</span>
<span class=linenos data-linenos="204 "></span>        <span class=s1>&#39;dlp_id&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="205 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>],</span>
<span class=linenos data-linenos="206 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="207 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="208 "></span>        <span class=s1>&#39;dlp_name&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="209 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>],</span>
<span class=linenos data-linenos="210 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="211 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="212 "></span>        <span class=s1>&#39;target_dataset_type&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="213 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_target_dataset_type_validator</span><span class=p>],</span>
<span class=linenos data-linenos="214 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<span class=linenos data-linenos="215 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="216 "></span>        <span class=s1>&#39;loading_blocks&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="217 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_loading_blocks_types_validator</span><span class=p>],</span>
<span class=linenos data-linenos="218 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span>
<span class=linenos data-linenos="219 "></span>        <span class=p>},</span>
<span class=linenos data-linenos="220 "></span>        <span class=s1>&#39;key_paths&#39;</span><span class=p>:</span> <span class=p>{</span>
<span class=linenos data-linenos="221 "></span>            <span class=s1>&#39;rules&#39;</span><span class=p>:</span> <span class=p>[</span><span class=nb>dict</span><span class=p>,</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_key_paths_validator</span><span class=p>],</span>
<span class=linenos data-linenos="222 "></span>            <span class=s1>&#39;required&#39;</span><span class=p>:</span> <span class=kc>True</span>
<span class=linenos data-linenos="223 "></span>        <span class=p>}</span>
<span class=linenos data-linenos="224 "></span>    <span class=p>}</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SerializationValidation.update_validation_scheme class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">update_validation_scheme</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>update_validation_scheme</span><span class=p>(</span><span class=n>new_scheme</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Updates the validation scheme.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>new_scheme</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>(dict) new dict of rules</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="90 "></span><span class=k>def</span> <span class=nf>update_validation_scheme</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>new_scheme</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="91 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Updates the validation scheme.</span>
<span class=linenos data-linenos="92 "></span>
<span class=linenos data-linenos="93 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="94 "></span><span class=sd>        new_scheme: (dict) new dict of rules</span>
<span class=linenos data-linenos="95 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="96 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_validation_scheme</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>new_scheme</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SerializationValidation.validate class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">validate</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>validate</span><span class=p>(</span><span class=n>dlb_metadata</span><span class=p>,</span> <span class=n>exception_type</span><span class=p>,</span> <span class=n>only_required</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Validate a dict of dlb_metadata according to the _validation_scheme.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dlb_metadata</code></td> <td> <code>dict) </code> </td> <td> <div class=doc-md-description> <p>the [DataLoadingBlock] metadata, as returned by serialize or as loaded from the node database.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>exception_type</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Type" href="https://docs.python.org/3/library/typing.html#typing.Type">Type</a>[<a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedError">FedbiomedError</a>]</code> </td> <td> <div class=doc-md-description> <p>the type of the exception to be raised when validation fails.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>only_required</code></td> <td> <code>bool) </code> </td> <td> <div class=doc-md-description> <p>see SchemeValidator.populate_with_defaults</p> </div> </td> <td> <code>True</code> </td> </tr> </tbody> </table> <p>Raises: exception_type: if the validation fails.</p> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_data_loading_plan.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="54 "></span><span class=k>def</span> <span class=nf>validate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="55 "></span>             <span class=n>dlb_metadata</span><span class=p>:</span> <span class=n>Dict</span><span class=p>,</span>
<span class=linenos data-linenos="56 "></span>             <span class=n>exception_type</span><span class=p>:</span> <span class=n>Type</span><span class=p>[</span><span class=n>FedbiomedError</span><span class=p>],</span>
<span class=linenos data-linenos="57 "></span>             <span class=n>only_required</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="58 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate a dict of dlb_metadata according to the _validation_scheme.</span>
<span class=linenos data-linenos="59 "></span>
<span class=linenos data-linenos="60 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="61 "></span><span class=sd>        dlb_metadata (dict) : the [DataLoadingBlock] metadata, as returned by serialize or as loaded from the</span>
<span class=linenos data-linenos="62 "></span><span class=sd>            node database.</span>
<span class=linenos data-linenos="63 "></span><span class=sd>        exception_type (Type[FedbiomedError]): the type of the exception to be raised when validation fails.</span>
<span class=linenos data-linenos="64 "></span><span class=sd>        only_required (bool) : see SchemeValidator.populate_with_defaults</span>
<span class=linenos data-linenos="65 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="66 "></span><span class=sd>        exception_type: if the validation fails.</span>
<span class=linenos data-linenos="67 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="68 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="69 "></span>        <span class=n>sc</span> <span class=o>=</span> <span class=n>SchemeValidator</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_validation_scheme</span><span class=p>)</span>
<span class=linenos data-linenos="70 "></span>    <span class=k>except</span> <span class=n>RuleError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="71 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span> <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="72 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="73 "></span>        <span class=k>raise</span> <span class=n>exception_type</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="74 "></span>
<span class=linenos data-linenos="75 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="76 "></span>        <span class=n>dlb_metadata</span> <span class=o>=</span> <span class=n>sc</span><span class=o>.</span><span class=n>populate_with_defaults</span><span class=p>(</span><span class=n>dlb_metadata</span><span class=p>,</span>
<span class=linenos data-linenos="77 "></span>                                                 <span class=n>only_required</span><span class=o>=</span><span class=n>only_required</span><span class=p>)</span>
<span class=linenos data-linenos="78 "></span>    <span class=k>except</span> <span class=n>ValidatorError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="79 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span> <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="80 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="81 "></span>        <span class=k>raise</span> <span class=n>exception_type</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="82 "></span>
<span class=linenos data-linenos="83 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="84 "></span>        <span class=n>sc</span><span class=o>.</span><span class=n>validate</span><span class=p>(</span><span class=n>dlb_metadata</span><span class=p>)</span>
<span class=linenos data-linenos="85 "></span>    <span class=k>except</span> <span class=n>ValidateError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="86 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB614</span><span class=o>.</span><span class=n>value</span> <span class=o>+</span> <span class=sa>f</span><span class=s2>&quot;: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
<span class=linenos data-linenos="87 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="88 "></span>        <span class=k>raise</span> <span class=n>exception_type</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.SkLearnDataManager class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">SkLearnDataManager</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>SkLearnDataManager</span><span class=p>(</span><span class=n>inputs</span><span class=p>,</span> <span class=n>target</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></code></p> <p>Wrapper for <code>pd.DataFrame</code>, <code>pd.Series</code> and <code>np.ndarray</code> datasets.</p> <p>Manages datasets for scikit-learn based model training. Responsible for managing inputs, and target variables that have been provided in <code>training_data</code> of scikit-learn based training plans.</p> <p>The loader arguments will be passed to the [fedbiomed.common.data.NPDataLoader] classes instantiated when split is called. They may include batch_size, shuffle, drop_last, and others. Please see the [fedbiomed.common.data.NPDataLoader] class for more details.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>inputs</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="pandas.DataFrame">DataFrame</span>, <span title="pandas.Series">Series</span>]</code> </td> <td> <div class=doc-md-description> <p>Independent variables (inputs, features) for model training</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>target</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="pandas.DataFrame">DataFrame</span>, <span title="pandas.Series">Series</span>]</code> </td> <td> <div class=doc-md-description> <p>Dependent variable/s (target) for model training and validation</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>Loader arguments</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="220 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="221 "></span>             <span class=n>inputs</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>],</span>
<span class=linenos data-linenos="222 "></span>             <span class=n>target</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>],</span>
<span class=linenos data-linenos="223 "></span>             <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
<span class=linenos data-linenos="224 "></span>
<span class=linenos data-linenos="225 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Construct a SkLearnDataManager from an array of inputs and an array of targets.</span>
<span class=linenos data-linenos="226 "></span>
<span class=linenos data-linenos="227 "></span><span class=sd>    The loader arguments will be passed to the [fedbiomed.common.data.NPDataLoader] classes instantiated</span>
<span class=linenos data-linenos="228 "></span><span class=sd>    when split is called. They may include batch_size, shuffle, drop_last, and others. Please see the</span>
<span class=linenos data-linenos="229 "></span><span class=sd>    [fedbiomed.common.data.NPDataLoader] class for more details.</span>
<span class=linenos data-linenos="230 "></span>
<span class=linenos data-linenos="231 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="232 "></span><span class=sd>        inputs: Independent variables (inputs, features) for model training</span>
<span class=linenos data-linenos="233 "></span><span class=sd>        target: Dependent variable/s (target) for model training and validation</span>
<span class=linenos data-linenos="234 "></span><span class=sd>        **kwargs: Loader arguments</span>
<span class=linenos data-linenos="235 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="236 "></span>
<span class=linenos data-linenos="237 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>inputs</span><span class=p>,</span> <span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>))</span> <span class=ow>or</span> \
<span class=linenos data-linenos="238 "></span>            <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)):</span>
<span class=linenos data-linenos="239 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>. Parameters `inputs` and `target` for &quot;</span> \
<span class=linenos data-linenos="240 "></span>              <span class=sa>f</span><span class=s2>&quot;initialization of </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> should be one of np.ndarray, pd.DataFrame, pd.Series&quot;</span>
<span class=linenos data-linenos="241 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="242 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTypeError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="243 "></span>
<span class=linenos data-linenos="244 "></span>    <span class=c1># Convert pd.DataFrame or pd.Series to np.ndarray for `inputs`</span>
<span class=linenos data-linenos="245 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>inputs</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)):</span>
<span class=linenos data-linenos="246 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_inputs</span> <span class=o>=</span> <span class=n>inputs</span><span class=o>.</span><span class=n>to_numpy</span><span class=p>()</span>
<span class=linenos data-linenos="247 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="248 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_inputs</span> <span class=o>=</span> <span class=n>inputs</span>
<span class=linenos data-linenos="249 "></span>
<span class=linenos data-linenos="250 "></span>    <span class=c1># Convert pd.DataFrame or pd.Series to np.ndarray for `target`</span>
<span class=linenos data-linenos="251 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)):</span>
<span class=linenos data-linenos="252 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_target</span> <span class=o>=</span> <span class=n>target</span><span class=o>.</span><span class=n>to_numpy</span><span class=p>()</span>
<span class=linenos data-linenos="253 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="254 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_target</span> <span class=o>=</span> <span class=n>target</span>
<span class=linenos data-linenos="255 "></span>
<span class=linenos data-linenos="256 "></span>    <span class=c1># Additional loader arguments</span>
<span class=linenos data-linenos="257 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span> <span class=o>=</span> <span class=n>kwargs</span>
<span class=linenos data-linenos="258 "></span>
<span class=linenos data-linenos="259 "></span>    <span class=c1># Subset None means that train/validation split has not been performed</span>
<span class=linenos data-linenos="260 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Tuple</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>],</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="261 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Tuple</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>],</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.SkLearnDataManager-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SkLearnDataManager.dataset class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">dataset</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>dataset</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets the entire registered dataset.</p> <p>This method returns whole dataset as it is without any split.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>inputs</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>Input variables for model training</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>targets</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>Target variable for model training</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="263 "></span><span class=k>def</span> <span class=nf>dataset</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>]:</span>
<span class=linenos data-linenos="264 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets the entire registered dataset.</span>
<span class=linenos data-linenos="265 "></span>
<span class=linenos data-linenos="266 "></span><span class=sd>    This method returns whole dataset as it is without any split.</span>
<span class=linenos data-linenos="267 "></span>
<span class=linenos data-linenos="268 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="269 "></span><span class=sd>         inputs: Input variables for model training</span>
<span class=linenos data-linenos="270 "></span><span class=sd>         targets: Target variable for model training</span>
<span class=linenos data-linenos="271 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="272 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_inputs</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_target</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SkLearnDataManager.split class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">split</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>split</span><span class=p>(</span><span class=n>test_ratio</span><span class=p>,</span> <span class=n>test_batch_size</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Splits <code>np.ndarray</code> dataset into train and validation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>test_ratio</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code> </td> <td> <div class=doc-md-description> <p>Ratio for validation set partition. Rest of the samples will be used for training</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>FedbiomedSkLearnDataManagerError</code> </td> <td> <div class=doc-md-description> <p>If the <code>test_ratio</code> is not between 0 and 1</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>train_loader</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._sklearn_data_manager.NPDataLoader" href="#fedbiomed.common.data.NPDataLoader">NPDataLoader</a></code> </td> <td> <div class=doc-md-description> <p>NPDataLoader of input variables for model training</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>test_loader</code></td> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._sklearn_data_manager.NPDataLoader" href="#fedbiomed.common.data.NPDataLoader">NPDataLoader</a></code> </td> <td> <div class=doc-md-description> <p>NPDataLoader of target variable for model training</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="294 "></span><span class=k>def</span> <span class=nf>split</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>test_ratio</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>test_batch_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>NPDataLoader</span><span class=p>,</span> <span class=n>NPDataLoader</span><span class=p>]:</span>
<span class=linenos data-linenos="295 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Splits `np.ndarray` dataset into train and validation.</span>
<span class=linenos data-linenos="296 "></span>
<span class=linenos data-linenos="297 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="298 "></span><span class=sd>         test_ratio: Ratio for validation set partition. Rest of the samples will be used for training</span>
<span class=linenos data-linenos="299 "></span>
<span class=linenos data-linenos="300 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="301 "></span><span class=sd>        FedbiomedSkLearnDataManagerError: If the `test_ratio` is not between 0 and 1</span>
<span class=linenos data-linenos="302 "></span>
<span class=linenos data-linenos="303 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="304 "></span><span class=sd>         train_loader: NPDataLoader of input variables for model training</span>
<span class=linenos data-linenos="305 "></span><span class=sd>         test_loader: NPDataLoader of target variable for model training</span>
<span class=linenos data-linenos="306 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="307 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>test_ratio</span><span class=p>,</span> <span class=nb>float</span><span class=p>):</span>
<span class=linenos data-linenos="308 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s1>: The argument `ratio` should be type `float` not </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>test_ratio</span><span class=p>)</span><span class=si>}</span><span class=s1>&#39;</span>
<span class=linenos data-linenos="309 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="310 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTypeError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="311 "></span>
<span class=linenos data-linenos="312 "></span>    <span class=k>if</span> <span class=n>test_ratio</span> <span class=o>&lt;</span> <span class=mf>0.</span> <span class=ow>or</span> <span class=n>test_ratio</span> <span class=o>&gt;</span> <span class=mf>1.</span><span class=p>:</span>
<span class=linenos data-linenos="313 "></span>        <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB609</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s1>: The argument `ratio` should be equal or between 0 and 1, &#39;</span> \
<span class=linenos data-linenos="314 "></span>             <span class=sa>f</span><span class=s1>&#39;not </span><span class=si>{</span><span class=n>test_ratio</span><span class=si>}</span><span class=s1>&#39;</span>
<span class=linenos data-linenos="315 "></span>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="316 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTypeError</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
<span class=linenos data-linenos="317 "></span>
<span class=linenos data-linenos="318 "></span>    <span class=n>empty_subset</span> <span class=o>=</span> <span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([]))</span>
<span class=linenos data-linenos="319 "></span>
<span class=linenos data-linenos="320 "></span>    <span class=k>if</span> <span class=n>test_ratio</span> <span class=o>&lt;=</span> <span class=mf>0.</span><span class=p>:</span>
<span class=linenos data-linenos="321 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span> <span class=o>=</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_inputs</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>)</span>
<span class=linenos data-linenos="322 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span> <span class=o>=</span> <span class=n>empty_subset</span>
<span class=linenos data-linenos="323 "></span>    <span class=k>elif</span> <span class=n>test_ratio</span> <span class=o>&gt;=</span> <span class=mf>1.</span><span class=p>:</span>
<span class=linenos data-linenos="324 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span> <span class=o>=</span> <span class=n>empty_subset</span>
<span class=linenos data-linenos="325 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span> <span class=o>=</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_inputs</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>)</span>
<span class=linenos data-linenos="326 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="327 "></span>        <span class=n>x_train</span><span class=p>,</span> <span class=n>x_test</span><span class=p>,</span> <span class=n>y_train</span><span class=p>,</span> <span class=n>y_test</span> <span class=o>=</span> <span class=n>train_test_split</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_inputs</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>,</span> <span class=n>test_size</span><span class=o>=</span><span class=n>test_ratio</span><span class=p>)</span>
<span class=linenos data-linenos="328 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span> <span class=o>=</span> <span class=p>(</span><span class=n>x_test</span><span class=p>,</span> <span class=n>y_test</span><span class=p>)</span>
<span class=linenos data-linenos="329 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span> <span class=o>=</span> <span class=p>(</span><span class=n>x_train</span><span class=p>,</span> <span class=n>y_train</span><span class=p>)</span>
<span class=linenos data-linenos="330 "></span>
<span class=linenos data-linenos="331 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>test_batch_size</span><span class=p>:</span>
<span class=linenos data-linenos="332 "></span>        <span class=n>test_batch_size</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span><span class=p>)</span>
<span class=linenos data-linenos="333 "></span>
<span class=linenos data-linenos="334 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subset_loader</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>),</span> \
<span class=linenos data-linenos="335 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>_subset_loader</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span><span class=p>,</span> <span class=n>batch_size</span><span class=o>=</span><span class=n>test_batch_size</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SkLearnDataManager.subset_test class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">subset_test</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>subset_test</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets Subset of dataset for validation partition.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>test_inputs</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>Input variables of validation subset for model validation</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>test_target</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>Target variable of validation subset for model validation</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="274 "></span><span class=k>def</span> <span class=nf>subset_test</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>]:</span>
<span class=linenos data-linenos="275 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets Subset of dataset for validation partition.</span>
<span class=linenos data-linenos="276 "></span>
<span class=linenos data-linenos="277 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="278 "></span><span class=sd>        test_inputs: Input variables of validation subset for model validation</span>
<span class=linenos data-linenos="279 "></span><span class=sd>        test_target: Target variable of validation subset for model validation</span>
<span class=linenos data-linenos="280 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="281 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.SkLearnDataManager.subset_train class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">subset_train</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>subset_train</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets Subset for train partition.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>test_inputs</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>Input variables of training subset for model training</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>test_target</code></td> <td> <code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code> </td> <td> <div class=doc-md-description> <p>Target variable of training subset for model training</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_sklearn_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="283 "></span><span class=k>def</span> <span class=nf>subset_train</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>]:</span>
<span class=linenos data-linenos="284 "></span>
<span class=linenos data-linenos="285 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets Subset for train partition.</span>
<span class=linenos data-linenos="286 "></span>
<span class=linenos data-linenos="287 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="288 "></span><span class=sd>        test_inputs: Input variables of training subset for model training</span>
<span class=linenos data-linenos="289 "></span><span class=sd>        test_target: Target variable of training subset for model training</span>
<span class=linenos data-linenos="290 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="291 "></span>
<span class=linenos data-linenos="292 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.TabularDataset class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">TabularDataset</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>TabularDataset</span><span class=p>(</span><span class=n>inputs</span><span class=p>,</span> <span class=n>target</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title="torch.utils.data.Dataset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Dataset">Dataset</a></code></p> <p>Torch based Dataset object to create torch Dataset from given numpy or dataframe type of input and target variables</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>inputs</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="pandas.DataFrame">DataFrame</span>, <span title="pandas.Series">Series</span>]</code> </td> <td> <div class=doc-md-description> <p>Input variables that will be passed to network</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>target</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, <span title="pandas.DataFrame">DataFrame</span>, <span title="pandas.Series">Series</span>]</code> </td> <td> <div class=doc-md-description> <p>Target variable for output layer</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>FedbiomedTorchDatasetError</code> </td> <td> <div class=doc-md-description> <p>If input variables and target variable does not have equal length/size</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_tabular_dataset.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="24 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
<span class=linenos data-linenos="25 "></span>             <span class=n>inputs</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>],</span>
<span class=linenos data-linenos="26 "></span>             <span class=n>target</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>]):</span>
<span class=linenos data-linenos="27 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructs PyTorch dataset object</span>
<span class=linenos data-linenos="28 "></span>
<span class=linenos data-linenos="29 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="30 "></span><span class=sd>        inputs: Input variables that will be passed to network</span>
<span class=linenos data-linenos="31 "></span><span class=sd>        target: Target variable for output layer</span>
<span class=linenos data-linenos="32 "></span>
<span class=linenos data-linenos="33 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="34 "></span><span class=sd>        FedbiomedTorchDatasetError: If input variables and target variable does not have</span>
<span class=linenos data-linenos="35 "></span><span class=sd>            equal length/size</span>
<span class=linenos data-linenos="36 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="37 "></span>
<span class=linenos data-linenos="38 "></span>    <span class=c1># Inputs and target variable should be converted to the torch tensors</span>
<span class=linenos data-linenos="39 "></span>    <span class=c1># PyTorch provides `from_numpy` function to convert numpy arrays to</span>
<span class=linenos data-linenos="40 "></span>    <span class=c1># torch tensor. Therefore, if the arguments `inputs` and `target` are</span>
<span class=linenos data-linenos="41 "></span>    <span class=c1># instance one of `pd.DataFrame` or `pd.Series`, they should be converted to</span>
<span class=linenos data-linenos="42 "></span>    <span class=c1># numpy arrays</span>
<span class=linenos data-linenos="43 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>inputs</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)):</span>
<span class=linenos data-linenos="44 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>inputs</span> <span class=o>=</span> <span class=n>inputs</span><span class=o>.</span><span class=n>to_numpy</span><span class=p>()</span>
<span class=linenos data-linenos="45 "></span>    <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>inputs</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>):</span>
<span class=linenos data-linenos="46 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>inputs</span> <span class=o>=</span> <span class=n>inputs</span>
<span class=linenos data-linenos="47 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="48 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB610</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: The argument `inputs` should be &quot;</span>
<span class=linenos data-linenos="49 "></span>                                                <span class=sa>f</span><span class=s2>&quot;an instance one of np.ndarray, pd.DataFrame or pd.Series&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="50 "></span>    <span class=c1># Configuring self.target attribute</span>
<span class=linenos data-linenos="51 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)):</span>
<span class=linenos data-linenos="52 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>target</span> <span class=o>=</span> <span class=n>target</span><span class=o>.</span><span class=n>to_numpy</span><span class=p>()</span>
<span class=linenos data-linenos="53 "></span>    <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>inputs</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>):</span>
<span class=linenos data-linenos="54 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>target</span> <span class=o>=</span> <span class=n>target</span>
<span class=linenos data-linenos="55 "></span>    <span class=k>else</span><span class=p>:</span>
<span class=linenos data-linenos="56 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB610</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: The argument `target` should be &quot;</span>
<span class=linenos data-linenos="57 "></span>                                                <span class=sa>f</span><span class=s2>&quot;an instance one of np.ndarray, pd.DataFrame or pd.Series&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="58 "></span>
<span class=linenos data-linenos="59 "></span>    <span class=c1># The lengths should be equal</span>
<span class=linenos data-linenos="60 "></span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>inputs</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>target</span><span class=p>):</span>
<span class=linenos data-linenos="61 "></span>        <span class=k>raise</span> <span class=n>FedbiomedDatasetError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB610</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Length of input variables and target &quot;</span>
<span class=linenos data-linenos="62 "></span>                                                <span class=sa>f</span><span class=s2>&quot;variable does not match. Please make sure that they have &quot;</span>
<span class=linenos data-linenos="63 "></span>                                                <span class=sa>f</span><span class=s2>&quot;equal size while creating the method `training_data` of &quot;</span>
<span class=linenos data-linenos="64 "></span>                                                <span class=sa>f</span><span class=s2>&quot;TrainingPlan&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="65 "></span>
<span class=linenos data-linenos="66 "></span>    <span class=c1># Convert `inputs` adn `target` to Torch floats</span>
<span class=linenos data-linenos="67 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>inputs</span> <span class=o>=</span> <span class=n>from_numpy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>inputs</span><span class=p>)</span><span class=o>.</span><span class=n>float</span><span class=p>()</span>
<span class=linenos data-linenos="68 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>target</span> <span class=o>=</span> <span class=n>from_numpy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>target</span><span class=p>)</span><span class=o>.</span><span class=n>float</span><span class=p>()</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.TabularDataset-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.TabularDataset.inputs class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">inputs</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>inputs</span> <span class=o>=</span> <span class=nb>float</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.TabularDataset.target class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">target</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>target</span> <span class=o>=</span> <span class=nb>float</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> </div> </div> <h4 id=fedbiomed.common.data.TabularDataset-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.TabularDataset.get_dataset_type class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">get_dataset_type</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>get_dataset_type</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_tabular_dataset.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="94 "></span><span class=nd>@staticmethod</span>
<span class=linenos data-linenos="95 "></span><span class=k>def</span> <span class=nf>get_dataset_type</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>DatasetTypes</span><span class=p>:</span>
<span class=linenos data-linenos="96 "></span>    <span class=k>return</span> <span class=n>DatasetTypes</span><span class=o>.</span><span class=n>TABULAR</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 id=fedbiomed.common.data.TorchDataManager class="doc doc-heading"> <span class="doc doc-object-name doc-class-name">TorchDataManager</span> </h3> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>TorchDataManager</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></code></p> <p>Wrapper for PyTorch Dataset to manage loading operations for validation and train.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dataset</code></td> <td> <code><a class="autorefs autorefs-external" title="torch.utils.data.Dataset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Dataset">Dataset</a></code> </td> <td> <div class=doc-md-description> <p>Dataset object for torch.utils.data.DataLoader</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td><code>**kwargs</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> </td> <td> <div class=doc-md-description> <p>Arguments for PyTorch <code>DataLoader</code></p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.exceptions.FedbiomedTorchDataManagerError" href="../exceptions/#fedbiomed.common.exceptions.FedbiomedTorchDataManagerError">FedbiomedTorchDataManagerError</a></code> </td> <td> <div class=doc-md-description> <p>If the argument <code>dataset</code> is not an instance of <code>torch.utils.data.Dataset</code></p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_torch_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="23 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dataset</span><span class=p>:</span> <span class=n>Dataset</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
<span class=linenos data-linenos="24 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Construct  of class</span>
<span class=linenos data-linenos="25 "></span>
<span class=linenos data-linenos="26 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos="27 "></span><span class=sd>        dataset: Dataset object for torch.utils.data.DataLoader</span>
<span class=linenos data-linenos="28 "></span><span class=sd>        **kwargs: Arguments for PyTorch `DataLoader`</span>
<span class=linenos data-linenos="29 "></span>
<span class=linenos data-linenos="30 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos="31 "></span><span class=sd>        FedbiomedTorchDataManagerError: If the argument `dataset` is not an instance of `torch.utils.data.Dataset`</span>
<span class=linenos data-linenos="32 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="33 "></span>
<span class=linenos data-linenos="34 "></span>    <span class=c1># TorchDataManager should get `dataset` argument as an instance of torch.utils.data.Dataset</span>
<span class=linenos data-linenos="35 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=n>Dataset</span><span class=p>):</span>
<span class=linenos data-linenos="36 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTorchDataManagerError</span><span class=p>(</span>
<span class=linenos data-linenos="37 "></span>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB608</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: The attribute `dataset` should an instance &quot;</span>
<span class=linenos data-linenos="38 "></span>            <span class=sa>f</span><span class=s2>&quot;of `torch.utils.data.Dataset`, please use `Dataset` as parent class for&quot;</span>
<span class=linenos data-linenos="39 "></span>            <span class=sa>f</span><span class=s2>&quot;your custom torch dataset object&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="40 "></span>
<span class=linenos data-linenos="41 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span> <span class=o>=</span> <span class=n>dataset</span>
<span class=linenos data-linenos="42 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span> <span class=o>=</span> <span class=n>kwargs</span>
<span class=linenos data-linenos="43 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Subset</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="44 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>Subset</span><span class=p>,</span> <span class=kc>None</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> </details> <div class="doc doc-children"> <h4 id=fedbiomed.common.data.TorchDataManager-attributes>Attributes</h4> <div class="doc doc-object doc-attribute"> <h5 id=fedbiomed.common.data.TorchDataManager.dataset class="doc doc-heading"> <span class="doc doc-object-name doc-attribute-name">dataset</span> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=n>dataset</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets dataset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="torch.utils.data.Dataset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Dataset">Dataset</a></code> </td> <td> <div class=doc-md-description> <p>PyTorch dataset instance</p> </div> </td> </tr> </tbody> </table> </div> </div> <h4 id=fedbiomed.common.data.TorchDataManager-functions>Functions</h4> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.TorchDataManager.load_all_samples class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">load_all_samples</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>load_all_samples</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Loading all samples as PyTorch DataLoader without splitting.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="torch.utils.data.DataLoader" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader">DataLoader</a></code> </td> <td> <div class=doc-md-description> <p>Dataloader for entire datasets. <code>DataLoader</code> arguments will be retrieved from the <code>**kwargs</code> which is defined while initializing the class</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_torch_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="72 "></span><span class=k>def</span> <span class=nf>load_all_samples</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DataLoader</span><span class=p>:</span>
<span class=linenos data-linenos="73 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Loading all samples as PyTorch DataLoader without splitting.</span>
<span class=linenos data-linenos="74 "></span>
<span class=linenos data-linenos="75 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="76 "></span><span class=sd>        Dataloader for entire datasets. `DataLoader` arguments will be retrieved from the `**kwargs` which</span>
<span class=linenos data-linenos="77 "></span><span class=sd>            is defined while initializing the class</span>
<span class=linenos data-linenos="78 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="79 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_torch_data_loader</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.TorchDataManager.split class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">split</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>split</span><span class=p>(</span><span class=n>test_ratio</span><span class=p>,</span> <span class=n>test_batch_size</span><span class=p>)</span>
</code></pre></div> <div class="doc doc-contents "> <p>Splitting PyTorch Dataset into train and validation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>test_ratio</code></td> <td> <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code> </td> <td> <div class=doc-md-description> <p>Split ratio for validation set ratio. Rest of the samples will be used for training</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Raises: FedbiomedTorchDataManagerError: If the ratio is not in good format</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>train_loader</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="torch.utils.data.DataLoader" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader">DataLoader</a>, None]</code> </td> <td> <div class=doc-md-description> <p>DataLoader for training subset. <code>None</code> if the <code>test_ratio</code> is <code>1</code></p> </div> </td> </tr> <tr class=doc-section-item> <td><code>test_loader</code></td> <td> <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="torch.utils.data.DataLoader" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.DataLoader">DataLoader</a>, None]</code> </td> <td> <div class=doc-md-description> <p>DataLoader for validation subset. <code>None</code> if the <code>test_ratio</code> is <code>0</code></p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_torch_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos=" 81 "></span><span class=k>def</span> <span class=nf>split</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>test_ratio</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>test_batch_size</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=kc>None</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=n>DataLoader</span><span class=p>,</span> <span class=kc>None</span><span class=p>],</span> <span class=n>Union</span><span class=p>[</span><span class=n>DataLoader</span><span class=p>,</span> <span class=kc>None</span><span class=p>]]:</span>
<span class=linenos data-linenos=" 82 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot; Splitting PyTorch Dataset into train and validation.</span>
<span class=linenos data-linenos=" 83 "></span>
<span class=linenos data-linenos=" 84 "></span><span class=sd>    Args:</span>
<span class=linenos data-linenos=" 85 "></span><span class=sd>         test_ratio: Split ratio for validation set ratio. Rest of the samples will be used for training</span>
<span class=linenos data-linenos=" 86 "></span><span class=sd>    Raises:</span>
<span class=linenos data-linenos=" 87 "></span><span class=sd>        FedbiomedTorchDataManagerError: If the ratio is not in good format</span>
<span class=linenos data-linenos=" 88 "></span>
<span class=linenos data-linenos=" 89 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos=" 90 "></span><span class=sd>         train_loader: DataLoader for training subset. `None` if the `test_ratio` is `1`</span>
<span class=linenos data-linenos=" 91 "></span><span class=sd>         test_loader: DataLoader for validation subset. `None` if the `test_ratio` is `0`</span>
<span class=linenos data-linenos=" 92 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos=" 93 "></span>
<span class=linenos data-linenos=" 94 "></span>    <span class=c1># Check the argument `ratio` is of type `float`</span>
<span class=linenos data-linenos=" 95 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>test_ratio</span><span class=p>,</span> <span class=p>(</span><span class=nb>float</span><span class=p>,</span> <span class=nb>int</span><span class=p>)):</span>
<span class=linenos data-linenos=" 96 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTorchDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB608</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s1>: The argument `ratio` should be &#39;</span>
<span class=linenos data-linenos=" 97 "></span>                                             <span class=sa>f</span><span class=s1>&#39;type `float` or `int` not </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>test_ratio</span><span class=p>)</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos=" 98 "></span>
<span class=linenos data-linenos=" 99 "></span>    <span class=c1># Check ratio is valid for splitting</span>
<span class=linenos data-linenos="100 "></span>    <span class=k>if</span> <span class=n>test_ratio</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=ow>or</span> <span class=n>test_ratio</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
<span class=linenos data-linenos="101 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTorchDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB608</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s1>: The argument `ratio` should be &#39;</span>
<span class=linenos data-linenos="102 "></span>                                             <span class=sa>f</span><span class=s1>&#39;equal or between 0 and 1, not </span><span class=si>{</span><span class=n>test_ratio</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=linenos data-linenos="103 "></span>
<span class=linenos data-linenos="104 "></span>    <span class=c1># If `Dataset` has proper data attribute</span>
<span class=linenos data-linenos="105 "></span>    <span class=c1># try to get shape from self.data</span>
<span class=linenos data-linenos="106 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=s1>&#39;__len__&#39;</span><span class=p>):</span>
<span class=linenos data-linenos="107 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTorchDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB608</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Can not get number of samples from &quot;</span>
<span class=linenos data-linenos="108 "></span>                                             <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>)</span><span class=si>}</span><span class=s2> without `__len__`.  Please make sure &quot;</span>
<span class=linenos data-linenos="109 "></span>                                             <span class=sa>f</span><span class=s2>&quot;that `__len__` method has been added to custom dataset. &quot;</span>
<span class=linenos data-linenos="110 "></span>                                             <span class=sa>f</span><span class=s2>&quot;This method should return total number of samples.&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="111 "></span>
<span class=linenos data-linenos="112 "></span>    <span class=k>try</span><span class=p>:</span>
<span class=linenos data-linenos="113 "></span>        <span class=n>samples</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>)</span>
<span class=linenos data-linenos="114 "></span>    <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="115 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTorchDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB608</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Can not get number of samples from &quot;</span>
<span class=linenos data-linenos="116 "></span>                                             <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>)</span><span class=si>}</span><span class=s2> due to undefined attribute, </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="117 "></span>    <span class=k>except</span> <span class=ne>TypeError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<span class=linenos data-linenos="118 "></span>        <span class=k>raise</span> <span class=n>FedbiomedTorchDataManagerError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>ErrorNumbers</span><span class=o>.</span><span class=n>FB608</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>: Can not get number of samples from &quot;</span>
<span class=linenos data-linenos="119 "></span>                                             <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>)</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=linenos data-linenos="120 "></span>
<span class=linenos data-linenos="121 "></span>    <span class=c1># Calculate number of samples for train and validation subsets</span>
<span class=linenos data-linenos="122 "></span>    <span class=n>test_samples</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>floor</span><span class=p>(</span><span class=n>samples</span> <span class=o>*</span> <span class=n>test_ratio</span><span class=p>)</span>
<span class=linenos data-linenos="123 "></span>    <span class=n>train_samples</span> <span class=o>=</span> <span class=n>samples</span> <span class=o>-</span> <span class=n>test_samples</span>
<span class=linenos data-linenos="124 "></span>
<span class=linenos data-linenos="125 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span> <span class=o>=</span> <span class=n>random_split</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=p>[</span><span class=n>train_samples</span><span class=p>,</span> <span class=n>test_samples</span><span class=p>])</span>
<span class=linenos data-linenos="126 "></span>
<span class=linenos data-linenos="127 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>test_batch_size</span><span class=p>:</span>
<span class=linenos data-linenos="128 "></span>
<span class=linenos data-linenos="129 "></span>        <span class=n>test_batch_size</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span><span class=p>)</span>
<span class=linenos data-linenos="130 "></span>    <span class=n>loaders</span> <span class=o>=</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_subset_loader</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>),</span>
<span class=linenos data-linenos="131 "></span>               <span class=bp>self</span><span class=o>.</span><span class=n>_subset_loader</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span><span class=p>,</span> <span class=n>batch_size</span> <span class=o>=</span> <span class=n>test_batch_size</span><span class=p>))</span>
<span class=linenos data-linenos="132 "></span>
<span class=linenos data-linenos="133 "></span>    <span class=k>return</span> <span class=n>loaders</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.TorchDataManager.subset_test class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">subset_test</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>subset_test</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets validation subset of the dataset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="torch.utils.data.Subset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Subset">Subset</a></code> </td> <td> <div class=doc-md-description> <p>Validation subset</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_torch_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="55 "></span><span class=k>def</span> <span class=nf>subset_test</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Subset</span><span class=p>:</span>
<span class=linenos data-linenos="56 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets validation subset of the dataset.</span>
<span class=linenos data-linenos="57 "></span>
<span class=linenos data-linenos="58 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="59 "></span><span class=sd>        Validation subset</span>
<span class=linenos data-linenos="60 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="61 "></span>
<span class=linenos data-linenos="62 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subset_test</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.TorchDataManager.subset_train class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">subset_train</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>subset_train</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Gets train subset of the dataset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-external" title="torch.utils.data.Subset" href="https://pytorch.org/docs/stable/data.html#torch.utils.data.Subset">Subset</a></code> </td> <td> <div class=doc-md-description> <p>Train subset</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_torch_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="64 "></span><span class=k>def</span> <span class=nf>subset_train</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Subset</span><span class=p>:</span>
<span class=linenos data-linenos="65 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets train subset of the dataset.</span>
<span class=linenos data-linenos="66 "></span>
<span class=linenos data-linenos="67 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="68 "></span><span class=sd>        Train subset</span>
<span class=linenos data-linenos="69 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="70 "></span>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_subset_train</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h5 id=fedbiomed.common.data.TorchDataManager.to_sklearn class="doc doc-heading"> <span class="doc doc-object-name doc-function-name">to_sklearn</span> </h5> <div class="doc-signature highlight"><pre><span></span><code><span class=nf>to_sklearn</span><span class=p>()</span>
</code></pre></div> <div class="doc doc-contents "> <p>Converts PyTorch <code>Dataset</code> to sklearn data manager of Fed-BioMed.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="fedbiomed.common.data._sklearn_data_manager.SkLearnDataManager" href="#fedbiomed.common.data.SkLearnDataManager">SkLearnDataManager</a></code> </td> <td> <div class=doc-md-description> <p>Data manager to use in SkLearn base training plans</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>fedbiomed/common/data/_torch_data_manager.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="135 "></span><span class=k>def</span> <span class=nf>to_sklearn</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>SkLearnDataManager</span><span class=p>:</span>
<span class=linenos data-linenos="136 "></span><span class=w>    </span><span class=sd>&quot;&quot;&quot;Converts PyTorch `Dataset` to sklearn data manager of Fed-BioMed.</span>
<span class=linenos data-linenos="137 "></span>
<span class=linenos data-linenos="138 "></span><span class=sd>    Returns:</span>
<span class=linenos data-linenos="139 "></span><span class=sd>        Data manager to use in SkLearn base training plans</span>
<span class=linenos data-linenos="140 "></span><span class=sd>    &quot;&quot;&quot;</span>
<span class=linenos data-linenos="141 "></span>
<span class=linenos data-linenos="142 "></span>    <span class=n>loader</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_torch_data_loader</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>,</span> <span class=n>batch_size</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_dataset</span><span class=p>))</span>
<span class=linenos data-linenos="143 "></span>    <span class=c1># Iterate over samples and get input variable and target variable</span>
<span class=linenos data-linenos="144 "></span>    <span class=n>inputs</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=n>loader</span><span class=p>))[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>numpy</span><span class=p>()</span>
<span class=linenos data-linenos="145 "></span>    <span class=n>target</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=n>loader</span><span class=p>))[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>numpy</span><span class=p>()</span>
<span class=linenos data-linenos="146 "></span>
<span class=linenos data-linenos="147 "></span>    <span class=k>return</span> <span class=n>SkLearnDataManager</span><span class=p>(</span><span class=n>inputs</span><span class=o>=</span><span class=n>inputs</span><span class=p>,</span> <span class=n>target</span><span class=o>=</span><span class=n>target</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_loader_arguments</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data-classes class=md-nav__link> Classes </a> <nav class=toc-nav aria-label=Classes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock class=md-nav__link> DataLoadingBlock </a> <nav class=toc-nav aria-label=DataLoadingBlock> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock.apply class=md-nav__link> apply </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock.deserialize class=md-nav__link> deserialize </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock.get_serialization_id class=md-nav__link> get_serialization_id </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock.instantiate_class class=md-nav__link> instantiate_class </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock.instantiate_key class=md-nav__link> instantiate_key </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingBlock.serialize class=md-nav__link> serialize </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan class=md-nav__link> DataLoadingPlan </a> <nav class=toc-nav aria-label=DataLoadingPlan> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan.desc class=md-nav__link> desc </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan.dlp_id class=md-nav__link> dlp_id </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan.target_dataset_type class=md-nav__link> target_dataset_type </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan.deserialize class=md-nav__link> deserialize </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan.infer_dataset_type class=md-nav__link> infer_dataset_type </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlan.serialize class=md-nav__link> serialize </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlanMixin class=md-nav__link> DataLoadingPlanMixin </a> <nav class=toc-nav aria-label=DataLoadingPlanMixin> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlanMixin-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlanMixin.apply_dlb class=md-nav__link> apply_dlb </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlanMixin.clear_dlp class=md-nav__link> clear_dlp </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataLoadingPlanMixin.set_dlp class=md-nav__link> set_dlp </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataManager class=md-nav__link> DataManager </a> <nav class=toc-nav aria-label=DataManager> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataManager-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataManager.extend_loader_args class=md-nav__link> extend_loader_args </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.DataManager.load class=md-nav__link> load </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MapperBlock class=md-nav__link> MapperBlock </a> <nav class=toc-nav aria-label=MapperBlock> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MapperBlock-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MapperBlock.map class=md-nav__link> map </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MapperBlock-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MapperBlock.apply class=md-nav__link> apply </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MapperBlock.deserialize class=md-nav__link> deserialize </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MapperBlock.serialize class=md-nav__link> serialize </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase class=md-nav__link> MedicalFolderBase </a> <nav class=toc-nav aria-label=MedicalFolderBase> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.default_modality_names class=md-nav__link> default_modality_names </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.root class=md-nav__link> root </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.available_subjects class=md-nav__link> available_subjects </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.complete_subjects class=md-nav__link> complete_subjects </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.demographics_column_names class=md-nav__link> demographics_column_names </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.get_dataset_type class=md-nav__link> get_dataset_type </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.is_modalities_existing class=md-nav__link> is_modalities_existing </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.modalities class=md-nav__link> modalities </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.modalities_candidates_from_subfolders class=md-nav__link> modalities_candidates_from_subfolders </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.read_demographics class=md-nav__link> read_demographics </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.subjects_with_imaging_data_folders class=md-nav__link> subjects_with_imaging_data_folders </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderBase.validate_MedicalFolder_root_folder class=md-nav__link> validate_MedicalFolder_root_folder </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderController class=md-nav__link> MedicalFolderController </a> <nav class=toc-nav aria-label=MedicalFolderController> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderController-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderController.load_MedicalFolder class=md-nav__link> load_MedicalFolder </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderController.subject_modality_status class=md-nav__link> subject_modality_status </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset class=md-nav__link> MedicalFolderDataset </a> <nav class=toc-nav aria-label=MedicalFolderDataset> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.ALLOWED_EXTENSIONS class=md-nav__link> ALLOWED_EXTENSIONS </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.demographics class=md-nav__link> demographics </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.index_col class=md-nav__link> index_col </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.subjects_has_all_modalities class=md-nav__link> subjects_has_all_modalities </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.subjects_registered_in_demographics class=md-nav__link> subjects_registered_in_demographics </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.tabular_file class=md-nav__link> tabular_file </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.get_nontransformed_item class=md-nav__link> get_nontransformed_item </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.load_images class=md-nav__link> load_images </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.set_dataset_parameters class=md-nav__link> set_dataset_parameters </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.shape class=md-nav__link> shape </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderDataset.subject_folders class=md-nav__link> subject_folders </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderLoadingBlockTypes class=md-nav__link> MedicalFolderLoadingBlockTypes </a> <nav class=toc-nav aria-label=MedicalFolderLoadingBlockTypes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderLoadingBlockTypes-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.MedicalFolderLoadingBlockTypes.MODALITIES_TO_FOLDERS class=md-nav__link> MODALITIES_TO_FOLDERS </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NIFTIFolderDataset class=md-nav__link> NIFTIFolderDataset </a> <nav class=toc-nav aria-label=NIFTIFolderDataset> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NIFTIFolderDataset-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NIFTIFolderDataset.files class=md-nav__link> files </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NIFTIFolderDataset.labels class=md-nav__link> labels </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader class=md-nav__link> NPDataLoader </a> <nav class=toc-nav aria-label=NPDataLoader> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader.dataset class=md-nav__link> dataset </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader.target class=md-nav__link> target </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader.batch_size class=md-nav__link> batch_size </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader.drop_last class=md-nav__link> drop_last </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader.n_remainder_samples class=md-nav__link> n_remainder_samples </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader.rng class=md-nav__link> rng </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.NPDataLoader.shuffle class=md-nav__link> shuffle </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SerializationValidation class=md-nav__link> SerializationValidation </a> <nav class=toc-nav aria-label=SerializationValidation> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SerializationValidation-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SerializationValidation.dlb_default_scheme class=md-nav__link> dlb_default_scheme </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SerializationValidation.dlp_default_scheme class=md-nav__link> dlp_default_scheme </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SerializationValidation.update_validation_scheme class=md-nav__link> update_validation_scheme </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SerializationValidation.validate class=md-nav__link> validate </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SkLearnDataManager class=md-nav__link> SkLearnDataManager </a> <nav class=toc-nav aria-label=SkLearnDataManager> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SkLearnDataManager-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SkLearnDataManager.dataset class=md-nav__link> dataset </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SkLearnDataManager.split class=md-nav__link> split </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SkLearnDataManager.subset_test class=md-nav__link> subset_test </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.SkLearnDataManager.subset_train class=md-nav__link> subset_train </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TabularDataset class=md-nav__link> TabularDataset </a> <nav class=toc-nav aria-label=TabularDataset> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TabularDataset-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TabularDataset.inputs class=md-nav__link> inputs </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TabularDataset.target class=md-nav__link> target </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TabularDataset-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TabularDataset.get_dataset_type class=md-nav__link> get_dataset_type </a> </li> </ul> </nav> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager class=md-nav__link> TorchDataManager </a> <nav class=toc-nav aria-label=TorchDataManager> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager-attributes class=md-nav__link> Attributes </a> <nav class=toc-nav aria-label=Attributes> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager.dataset class=md-nav__link> dataset </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager-functions class=md-nav__link> Functions </a> <nav class=toc-nav aria-label=Functions> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager.load_all_samples class=md-nav__link> load_all_samples </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager.split class=md-nav__link> split </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager.subset_test class=md-nav__link> subset_test </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager.subset_train class=md-nav__link> subset_train </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#fedbiomed.common.data.TorchDataManager.to_sklearn class=md-nav__link> to_sklearn </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed  2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../../assets/javascript/lunr.js></script> <script src=../../../../assets/javascript/theme.js></script> </body> </html>