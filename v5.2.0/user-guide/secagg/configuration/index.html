<!DOCTYPE html><html> <head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1"><meta name=robots context="index, archive"><!--  --><script>
      const versions_json = "../../../../versions.json";
      const search_worker_js = "../../../assets/javascript/search-worker.js";
      const search_index_json = "../../../search/search_index.json";
      const base_url = '../../..';
    </script><!-- Site title --><title>Configuration - Fed-BioMed</title><link rel=icon type=image/x-icon href=../../../favicon.ico><!-- Page description --><meta name=description content="Open, Transparent and Trusted Collaborative Learning for Real-world Healthcare Applications"><!-- Page keywords --><!-- Page author --><!-- Latest compiled and minified CSS --><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><!-- Bootstrap Icons --><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link href=../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../assets/css/style.css rel=stylesheet></head> <body> <header> <div class="container-fluid top-bar"> <div class=brand> <a href=/ > <img src=../../../assets/img/fedbiomed-logo-small.png> </a> </div> <nav class=top> <ul> <li class> <a href=../../..>Home</a> </li> <li class> <a href=../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../#funding>Funding</a> </li> <li class> <a href=../../../news/ >News</a> </li> <li class> <a href=../../../#contributors>Contributors</a> </li> <li class> <a href=../../../#users>Users</a> </li> <li class> <a href=../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> <div class="container-fluid top-bar-mobile"> <div class=mobile-bar> <div class=brand> <a href=../../../ > <img src=../../../assets/img/fedbiomed-logo-small.png> </a> </div> <div class=hum-menu> <img class=open src=../../../assets/img/menu.svg> <img class=close style=display:none src=../../../assets/img/cancel.svg> </div> </div> <nav class=top-mobile> <ul> <li class> <a href=../../..>Home</a> </li> <li class> <a href=../../../getting-started/what-is-fedbiomed/ >User Documentation</a> </li> <li class> <a href=../../../pages/about-us/ >About</a> </li> <li id=clicker class=has-sub> More <i class="bi bi-chevron-down"></i> <ul class=sub-nav-menu> <li class> <a href=../../../#funding>Funding</a> </li> <li class> <a href=../../../news/ >News</a> </li> <li class> <a href=../../../#contributors>Contributors</a> </li> <li class> <a href=../../../#users>Users</a> </li> <li class> <a href=../../../pages/roadmap/ >Roadmap</a> </li> <li class> <a href=../../../#contact-us>Contact Us</a> </li> </ul> </li> </ul> </nav> </div> </header> <div class=main> <!-- Home page --> <div class=container-fluid> <div class=doc-row> <div class=left-col> <div class=sidebar-doc> <nav class=sidebar-inner> <ul class="sidebar-menu-left sub"> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Getting Started <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../getting-started/what-is-fedbiomed/ class>What's Fed-BioMed</a> </li> <li class> <a href=../../../getting-started/getting-started/ class>Basic Example</a> </li> <li class> <a href=../../../getting-started/fedbiomed-architecture/ class>Fedbiomed Architecture</a> </li> <li class> <a href=../../../getting-started/fedbiomed-workflow/ class>Fedbiomed Workflow</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Tutorials <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Installation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/installation/0-basic-software-installation/ class>Software Installation</a> </li> <li class> <a href=../../../tutorials/installation/1-setting-up-environment/ class>Setting Up Environment</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> PyTorch <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/pytorch/01_PyTorch_MNIST_Single_Node_Tutorial/ class>PyTorch MNIST Basic Example</a> </li> <li class> <a href=../../../tutorials/pytorch/02_Create_Your_Custom_Training_Plan/ class>How to Create Your Custom PyTorch Training Plan</a> </li> <li class> <a href=../../../tutorials/pytorch/03_PyTorch_Used_Cars_Dataset_Example/ class>PyTorch Used Cars Dataset Example</a> </li> <li class> <a href=../../../tutorials/pytorch/04-Aggregation_in_Fed-BioMed/ class>PyTorch aggregation methods in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> MONAI <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/monai/01_monai-2d-image-classification/ class>Federated 2d image classification with MONAI</a> </li> <li class> <a href=../../../tutorials/monai/02_monai-2d-image-registration/ class>Federated 2d XRay registration with MONAI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Scikit-Learn <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/scikit-learn/01_sklearn_MNIST_classification_tutorial/ class>MNIST classification with Scikit-Learn Classifier (Perceptron)</a> </li> <li class> <a href=../../../tutorials/scikit-learn/02_sklearn_sgd_regressor_tutorial/ class>Fed-BioMed to train a federated SGD regressor model</a> </li> <li class> <a href=../../../tutorials/scikit-learn/03-other-scikit-learn-models/ class>Implementing other Scikit Learn models for Federated Learning</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Optimizers <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/optimizers/01-fedopt-and-scaffold/ class>Advanced optimizers in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> FLamby <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/flamby/flamby/ class>General Concepts</a> </li> <li class> <a href=../../../tutorials/flamby/flamby-integration-into-fedbiomed/ class>FLamby integration in Fed-BioMed</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Advanced <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/advanced/in-depth-experiment-configuration/ class>In Depth Experiment Configuration</a> </li> <li class> <a href=../../../tutorials/advanced/training-with-gpu/ class>PyTorch model training using a GPU</a> </li> <li class> <a href=../../../tutorials/advanced/breakpoints/ class>Breakpoints</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Security <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/security/differential-privacy-with-opacus-on-fedbiomed/ class>Using Differential Privacy with OPACUS on Fed-BioMed</a> </li> <li class> <a href=../../../tutorials/security/non-private-local-central-dp-monai-2d-image-registration/ class>Local and Central DP with Fed-BioMed: MONAI 2d image registration</a> </li> <li class> <a href=../../../tutorials/security/training-with-approved-training-plans/ class>Training Process with Training Plan Management</a> </li> <li class> <a href=../../../tutorials/security/secure-aggregation/ class>Training with Secure Aggregation</a> </li> <li class> <a href=../../../tutorials/concrete-ml/concrete-ml/ class>End-to-end Privacy Preserving Training and Inference on Medical Data</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Biomedical data <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../tutorials/medical/medical-image-segmentation-unet-library/ class>Brain Segmentation</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> User Guide <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../../glossary/ class>Glossary</a> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Deployment <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../deployment/deployment/ class>Introduction</a> </li> <li class> <a href=../../deployment/deployment-vpn/ class>VPN Deployment</a> </li> <li class> <a href=../../deployment/matrix/ class>Network matrix</a> </li> <li class> <a href=../../deployment/security-model/ class>Security model</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../nodes/configuring-nodes/ class>Configuring Nodes</a> </li> <li class> <a href=../../nodes/deploying-datasets/ class>Deploying Datasets</a> </li> <li class> <a href=../../nodes/training-plan-security-manager/ class>Training Plan Management</a> </li> <li class> <a href=../../nodes/using-gpu/ class>Using GPU</a> </li> <li class> <a href=../../nodes/node-gui/ class>Node GUI</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../researcher/training-plan/ class>Training Plan</a> </li> <li class> <a href=../../researcher/training-data/ class>Training Data</a> </li> <li class> <a href=../../researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../researcher/aggregation/ class>Aggregation</a> </li> <li class> <a href=../../researcher/listing-datasets-and-selecting-nodes/ class>Listing Datasets and Selecting Nodes</a> </li> <li class> <a href=../../researcher/model-testing-during-federated-training/ class>Model Validation on the Node Side</a> </li> <li class> <a href=../../researcher/tensorboard/ class>Tensorboard</a> </li> </ul> </li> <li class> <a href=../../advanced-optimization/ class>Optimization</a> </li> <li data-adress=sub-1 class="current has-sub-side"> <div href class="parent-list current "> Secure Aggregation <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub active "> <li class> <a href=../introduction/ class>Introduction</a> </li> <li class=current> <a href=./ class="link current">Configuration</a> </li> <li class> <a href=../certificate-registration/ class>Certificate Registration</a> </li> <li class> <a href=../researcher-interface/ class>Managing Secure Aggregation in Researcher</a> </li> </ul> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Developer <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> API Reference <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Common <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../developer/api/common/constants/ class>Constants</a> </li> <li class> <a href=../../../developer/api/common/data/ class>Data</a> </li> <li class> <a href=../../../developer/api/common/environ/ class>Environ</a> </li> <li class> <a href=../../../developer/api/common/exceptions/ class>Exceptions</a> </li> <li class> <a class href=../../../developer/api/common/json.md>Json</a> </li> <li class> <a href=../../../developer/api/common/logger/ class>Logger</a> </li> <li class> <a href=../../../developer/api/common/message/ class>Message</a> </li> <li class> <a class href=../../../developer/api/common/messaging.md>Messaging</a> </li> <li class> <a href=../../../developer/api/common/models/ class>Model</a> </li> <li class> <a href=../../../developer/api/common/optimizers/ class>Optimizers</a> </li> <li class> <a class href=../../../developer/api/common/repository.md>Repository</a> </li> <li class> <a href=../../../developer/api/common/tasks_queue/ class>TasksQueue</a> </li> <li class> <a href=../../../developer/api/common/training_plans/ class>TrainingPlans</a> </li> <li class> <a href=../../../developer/api/common/training_args/ class>TrainingArgs</a> </li> <li class> <a href=../../../developer/api/common/utils/ class>Utils</a> </li> <li class> <a href=../../../developer/api/common/validator/ class>Validator</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Node <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../developer/api/node/cli/ class>CLI</a> </li> <li class> <a href=../../../developer/api/node/dataset_manager/ class>DatasetManager</a> </li> <li class> <a href=../../../developer/api/node/node/ class>Node</a> </li> <li class> <a href=../../../developer/api/node/node_state_manager/ class>NodeStateManager</a> </li> <li class> <a href=../../../developer/api/node/training_plan_security_manager/ class>TrainingPlanSecurityManager</a> </li> <li class> <a href=../../../developer/api/node/history_monitor/ class>HistoryMonitor</a> </li> <li class> <a href=../../../developer/api/node/round/ class>Round</a> </li> </ul> </li> <li data-adress=sub-1 class=has-sub-side> <div href class="parent-list "> Researcher <i class="bi bi-chevron-down"></i> </div> <ul class="sub-sidebar-menu sub "> <li class> <a href=../../../developer/api/researcher/aggregators/ class>Aggregators</a> </li> <li class> <a href=../../../developer/api/researcher/datasets/ class>Datasets</a> </li> <li class> <a href=../../../developer/api/researcher/experiment/ class>Experiment</a> </li> <li class> <a href=../../../developer/api/researcher/filetools/ class>Filetools</a> </li> <li class> <a href=../../../developer/api/researcher/jobs/ class>Jobs</a> </li> <li class> <a href=../../../developer/api/researcher/monitor/ class>Monitor</a> </li> <li class> <a href=../../../developer/api/researcher/node_state_agent/ class>NodeStateAgent</a> </li> <li class> <a href=../../../developer/api/researcher/requests/ class>Requests</a> </li> <li class> <a href=../../../developer/api/researcher/strategies/ class>Strategies</a> </li> <li class> <a href=../../../developer/api/researcher/secagg/ class>Secagg</a> </li> </ul> </li> </ul> </li> <li class> <a href=../../../developer/usage_and_tools/ class>Usage and Tools</a> </li> <li class> <a href=../../../developer/ci/ class>Continuous Integration</a> </li> <li class> <a href=../../../developer/definition-of-done/ class>Definition of Done</a> </li> <li class> <a href=../../../developer/testing-in-fedbiomed/ class>Testing in Fed-BioMed</a> </li> <li class> <a href=../../../developer/messaging/ class>RPC Protocol and Messages</a> </li> </ul> </li> </ul> </nav> </div> </div> <div class=main-col> <main class=main-docs> <article> <h1 id=secure-aggregation-configuration>Secure Aggregation Configuration</h1> <p>Secure aggregation is implemented in Fed-BioMed and can be activated or deactivated as an option through the configuration. Even if secure aggregation is not configured during the initial installation, Fed-BioMed still works as long as the researcher or node component does not activate it. However, if secure aggregation is activated in an instance, the infrastructure must have been post-configured for secure aggregation beforehand, after the Fed-BioMed instance is installed.</p> <p>To configure an instance for secure aggregation, you need to install <a href=../introduction/#mp-spdz>MP-SPDZ</a> for multi-party computation and provide communication parameters, such as IP address, port, and SSL certificate. While Fed-BioMed provides magic scripts for configuring communication parameters in development mode, where all instances are launched in the same local environment, these parameters must be manually configured for other Fed-BioMed deployment cases.</p> <h2 id=mp-spdz-installation>MP-SPDZ Installation</h2> <p>Fed-BioMed provides pre-compiled MP-SPDZ protocols and scripts for Linux-based operating systems. However, for Darwin-based operating systems, MP-SPDZ must be compiled from its source code. Fed-BioMed provides a script that eases this process by distinguishing the operating system and performing the installation.</p> <p>To install or configure existing pre-compiled MP-SPDZ scripts for a <code>Node component</code>, please run following command.</p> <p><div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_configure_secagg<span class=w> </span>node
</code></pre></div> For researcher component;</p> <div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_configure_secagg<span class=w> </span>researcher
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Development environment</p> <p>In a development environment where researcher and nodes are located in the same local environment, it is sufficient to run the installation once equally as node or researcher.</p> </div> <div class="admonition note"> <p class=admonition-title>Specifying environment</p> <p>Specifying the environment is necessary to make available the required modules for installation. Declaring either node or researcher environments does not make any significant difference, except that the node instance would not have the researcher environment and the researcher instance would not have the node environment in a deployment scenario.</p> </div> <h2 id=creating-a-component>Creating a component</h2> <p>Usually, a Fed-BioMed instance (either node or researcher) is created once it is started or a dataset is added. However, when using secure aggregation, creating Fed-BioMed instances before starting the node gives the opportunity to modify the configuration.</p> <h3 id=using-cli-with-default-option>Using CLI with default option</h3> <p>The Fed-BioMed CLI provides an option to generate or create a component. It creates a configuration file, a database file and certificates.</p> <p>The command below creates a component with a configuration file named <code>config-n1.ini</code>.</p> <div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_run<span class=w> </span>environ-node<span class=w> </span>configuration<span class=w> </span>create<span class=w> </span>--component<span class=w> </span>node<span class=w> </span>--name<span class=w> </span>config-n1.ini
</code></pre></div> <p>Other node components can be created by replacing <code>config-n1.in</code>i` with any desired unique name.</p> <p>Fed-BioMed currently allows only a single researcher. Therefore, the following command creates a researcher component with default configuration file name.</p> <div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_run<span class=w> </span>configuration<span class=w> </span>create<span class=w> </span>--component<span class=w> </span>researcher
</code></pre></div> <h3 id=updating-existing-configuration>Updating existing configuration</h3> <p>Depending on the version of Fed-BioMed for which the configuration file is created, some variables may not be available in the current configuration file after upgrading Fed-BioMed. In such cases, it is always better to back up the old configuration file and create a new one using the CLI. Afterwards, the values of the backed-up configuration file can be replaced by the default ones that are generated.</p> <h2 id=mp-spdz-and-secure-aggregation-configuration>MP-SPDZ and Secure Aggregation Configuration</h2> <p>After the installation and component creation are completed, configuration files of Fed-BioMed instances can be modified. Here are the sections that can be configured.</p> <div class=highlight><pre><span></span><code><span class=k>[mpspdz]</span>
<span class=na>private_key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>certs/cert_node_e0394bff-4684-4f84-9c84-6c5e3c683dcb/MPSPDZ_certificate.key</span>
<span class=na>public_key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>certs/cert_node_e0394bff-4684-4f84-9c84-6c5e3c683dcb/MPSPDZ_certificate.pem</span>
<span class=na>mpspdz_ip</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>localhost</span>
<span class=na>mpspdz_port</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>14000</span>
<span class=na>allow_default_biprimes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>True</span>
</code></pre></div> <p>Node configuration file has extra variables under <code>security</code> section regarding secure aggregation configuration as <code>secure_aggregation</code> and <code>force_secure_aggregation</code>. These parameters allow node owners to manage activate, deactivate and force secure aggregation by default.</p> <div class=highlight><pre><span></span><code><span class=k>[security]</span>
<span class=na>hashing_algorithm</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>SHA256</span>
<span class=na>allow_default_training_plans</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>True</span>
<span class=na>training_plan_approval</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>False</span>
<span class=na>secure_aggregation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>True</span>
<span class=na>force_secure_aggregation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>False</span>
</code></pre></div> <h3 id=activating-deactivating-and-forcing-secure-aggregation>Activating, Deactivating and Forcing Secure Aggregation</h3> <p>Nodes have the privilege of activating, deactivating, and enforcing secure aggregation. This means that model parameters can either be encrypted (required), optionally encrypted, or unencrypted. If a node requires model encryption and a training request from a researcher does not include secure aggregation context, the node will refuse training. If secure aggregation is allowed but not forced by the node, end-users are able to send training requests with or without secure aggregation.</p> <p>In a federated setup, if one of the nodes requires secure aggregation but the researcher does not activate it, the FL round fails. Please refer to the researcher secure aggregation interface for more details.</p> <div class="admonition note"> <p class=admonition-title>Researcher</p> <p>Researcher configuration file does not have parameter regarding secure aggregation activation. However, secure aggregation context is managed through [Experiment][fedbiomed.researcher.federated_workflows] interface (class).</p> </div> <h3 id=mp-spdz-network-parameters>MP-SPDZ Network Parameters</h3> <h4 id=certificates>Certificates</h4> <p>When a component is created, Fed-BioMed CLI automatically generates SSL certificates. These certificates are self-signed certificates, and they can be re-generated or replaced by certificates signed by third party authorities. Certificate files should be located in <code>${FEDBIOMED_DIR}/etc/certs</code> and path should be relative to <code>${FEDBIOMED_DIR}</code>.</p> <p>Fed-BioMed generates 2048 bits RSA key and signs it using <code>SHA256</code>. Generated private keys and certificates located in <code>${FEDBIOMED_DIR}/etc/certs/cert_&lt;component_id&gt;</code>, and named as <code>MPSPDZ_certificate.key</code> and <code>MPSPDZ_certificate.pem</code>. <code>ORGANIZATION_NAME</code> attribute of the certificate is set to the component id.</p> <h4 id=re-generating-certificates>Re-generating Certificates</h4> <p>Auto-generated certificates expire after 5 years. However, they can be renewed through the Fed-BioMed CLI at any desired time. If a certificate has already been generated, the command should be executed with the --force or -f option.</p> <p><div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_run<span class=w> </span>node<span class=w> </span>--config<span class=w> </span>config-n1.ini<span class=w> </span>certificate<span class=w> </span>generate<span class=w> </span>-f
</code></pre></div> or</p> <div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_run<span class=w> </span>researcher<span class=w> </span>certificate<span class=w> </span>generate<span class=w> </span>-f
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Important</p> <p>After SSL certificates are re-generated, other parties that participate and common FL experiment should register the new certificate. Please see <a href=../certificate-registration/ >certificate registration</a></p> </div> <h4 id=mp-spdz-port-and-ip>MP-SPDZ Port and IP</h4> <p>Each component of Fed-BioMed in a FL experiment must have IP address and port number assigned for MP-SPDZ. IP address and port can be set through configuration file or environment variables.</p> <div class=highlight><pre><span></span><code><span class=k>[mpspdz]</span>
<span class=na>private_key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>certs/cert_node_e0394bff-4684-4f84-9c84-6c5e3c683dcb/MPSPDZ_certificate.key</span>
<span class=na>public_key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>certs/cert_node_e0394bff-4684-4f84-9c84-6c5e3c683dcb/MPSPDZ_certificate.pem</span>
<span class=na>mpspdz_ip</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>localhost</span>
<span class=na>mpspdz_port</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>14000</span>
<span class=na>allow_default_biprimes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>True</span>
</code></pre></div> <h4 id=setting-ip-and-port-through-environment-variables>Setting IP and PORT through environment variables</h4> <p>Setting <code>MPSDPZ_IP</code> and <code>MPSDPZ_PORT</code> environment variables can be set dynamically through environment variables while starting a Fed-BioMed component. This option does not re-write configuration file but uses the environment variable value during the component lifetime.</p> <div class=highlight><pre><span></span><code><span class=nv>MPSDPZ_IP</span><span class=o>=</span>&lt;ip-address&gt;<span class=w> </span><span class=nv>MPSDPZ_PORT</span><span class=o>=</span>&lt;port&gt;<span class=w> </span><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_run<span class=w> </span>node<span class=w> </span>--config<span class=w> </span>config-n1.ini<span class=w> </span>start
</code></pre></div> <p>or for researcher</p> <div class=highlight><pre><span></span><code><span class=nv>MPSDPZ_IP</span><span class=o>=</span>&lt;ip-address&gt;<span class=w> </span><span class=nv>MPSDPZ_PORT</span><span class=o>=</span>&lt;port&gt;<span class=w> </span><span class=si>${</span><span class=nv>FEDBIOMED_DIR</span><span class=si>}</span>/scripts/fedbiomed_run<span class=w> </span>researcher<span class=w> </span>start
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Important</p> <p>IP and port information of each party must be known by every other parties before using secure aggregation. Therefore, changing them without getting them updated on the other parties causes connection problems during the MPC.</p> </div> <h4 id=auto-increment-port-in-dev-mode>Auto-increment Port in Dev-Mode</h4> <p>Fed-BioMed configuration automatically assigns <code>localhost</code> as MP-SPDZ IP by default. The port is incremented automatically starting from <code>14000</code>. The port number for every other generated component in a single clone of Fed-BioMed equals to the previously assigned port number plus one.</p> <h4 id=certificate-and-ipport-registration-of-fl-parties>Certificate and IP/PORT Registration of FL Parties</h4> <p>Each party must register the network parameters of every other party in order to establish communication for MPC. This is because MP-SPDZ has its own communication procedure that differs from the one natively provided by Fed-BioMed. Registration process involves providing network details such as IP, port, and SSL certificate for establishing secure connections. Fortunately, Fed-BioMed provides scripts to simplify the registration process. For more details, please refer to the <a href=../certificate-registration/ >certificate registration</a> documentation.</p> </article> </main> </div> <div class=right-col> <div id=right-sidebar class=sidebar-right> <nav class=toc> <!-- Render item list --> <label class=toc-title for=__toc> <span class=toc-icon></span> </label> <ul class=toc-list data-md-component=toc data-md-scrollfix> <!-- Table of contents item --> <li class=toc-item> <a href=#mp-spdz-installation class=md-nav__link> MP-SPDZ Installation </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#creating-a-component class=md-nav__link> Creating a component </a> <nav class=toc-nav aria-label="Creating a component"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#using-cli-with-default-option class=md-nav__link> Using CLI with default option </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#updating-existing-configuration class=md-nav__link> Updating existing configuration </a> </li> </ul> </nav> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#mp-spdz-and-secure-aggregation-configuration class=md-nav__link> MP-SPDZ and Secure Aggregation Configuration </a> <nav class=toc-nav aria-label="MP-SPDZ and Secure Aggregation Configuration"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#activating-deactivating-and-forcing-secure-aggregation class=md-nav__link> Activating, Deactivating and Forcing Secure Aggregation </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#mp-spdz-network-parameters class=md-nav__link> MP-SPDZ Network Parameters </a> <nav class=toc-nav aria-label="MP-SPDZ Network Parameters"> <ul class=toc-list> <!-- Table of contents item --> <li class=toc-item> <a href=#certificates class=md-nav__link> Certificates </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#re-generating-certificates class=md-nav__link> Re-generating Certificates </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#mp-spdz-port-and-ip class=md-nav__link> MP-SPDZ Port and IP </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#setting-ip-and-port-through-environment-variables class=md-nav__link> Setting IP and PORT through environment variables </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#auto-increment-port-in-dev-mode class=md-nav__link> Auto-increment Port in Dev-Mode </a> </li> <!-- Table of contents item --> <li class=toc-item> <a href=#certificate-and-ipport-registration-of-fl-parties class=md-nav__link> Certificate and IP/PORT Registration of FL Parties </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> </div> <!-- News Main Page--> </div> <footer> <div class=container-fluid> <div class=footer-first-inner> <div class=container> <div class=row> <div class=col-md-6> <div class=footer-contact> <strong>Address:</strong> <p>2004 Rte des Lucioles, 06902 Sophia Antipolis</p> <strong>E-mail:</strong> <p>fedbiomed _at_ inria _dot_ fr</p> </div> </div> <div class=col-md-6> <div class=footer-contact> <p>Fed-BioMed © 2022</p> </div> </div> </div> </div> </div> </div> </footer> <!-- JQuery --> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script> <!-- Latest compiled and minified JavaScript --> <script src=https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../assets/javascript/lunr.js></script> <script src=../../../assets/javascript/theme.js></script> </body> </html>